(this["webpackJsonp@gorgias-chat/client"]=this["webpackJsonp@gorgias-chat/client"]||[]).push([[0],{244:function(e,n,t){"use strict";t.r(n),t.d(n,"FramedMessageWindow",(function(){return pi}));var r,a=t(18),o=t(3),i=t(0),c=t.n(i),l=t(11),u=t(46),s=t(21),d=t(103),p=t(34),f=t(27),b=t.n(f),m=Object(p.a)((function(e){return e.selfServicePortal.orders}),(function(e){return Object.values(e).sort((function(e,n){var t=e.processed_at,r=n.processed_at;return b()(t).isAfter(r)?-1:1}))})),g=t(111);!function(e){e.DEFAULT="default",e.VARIANT1="variant1",e.VARIANT2="variant2"}(r||(r={}));var h={xs:{default:{width:"100%",height:"100%"},variant1:{width:"100%",height:"100%"},variant2:{width:"100%",height:"100%"}},md:{default:{width:330,height:440},variant1:{width:330,height:518},variant2:{width:330,height:562}},sm:{default:{width:310,height:390},variant1:{width:310,height:400},variant2:{width:310,height:400}},lg:{default:{width:384,height:518},variant1:{width:384,height:518},variant2:{width:384,height:640}}};function v(){var e=Object(i.useState)(h.xs.default),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(i.useState)(h.xs.default),p=Object(a.a)(c,2),f=p[0],b=p[1],v=Object(g.a)(),O=Object(s.b)((function(e){return m(e)})),x=Object(d.i)(),j=t.width,E=t.height,y=f.width,w=f.height,k=x.pathname;return Object(i.useEffect)((function(){var e=function(e,n,t){return e===r.VARIANT2&&0===t.orders.length&&Object(u.b)(n,u.a.SELF_SERVICE_PORTAL__ORDERS)?r.VARIANT1:e}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(u.b)(e,u.a.SELF_SERVICE_PORTAL__LOGIN)?r.VARIANT1:Object(u.b)(e,u.a.SELF_SERVICE_PORTAL__ORDERS)||Object(u.b)(e,u.a.SELF_SERVICE_PORTAL__TRACK)||Object(u.b)(e,u.a.SELF_SERVICE_PORTAL__REPORT)?r.VARIANT2:r.DEFAULT}(k),k,{orders:O}),n=h[v][e],t=Object(l.a)({},"number"===typeof n.width?{width:n.width+30}:{width:n.width},{},"number"===typeof n.height?{height:n.height+30}:{height:n.height});o(t),b(n)}),[k,v,O]),Object(i.useMemo)((function(){return{widgetSize:v,iframe:{width:j,height:E},messageWindow:{width:y,height:w}}}),[v,y,w,j,E])}var O=t(47),x=t.n(O),j=t(61),E=t(12),y=t(56),w=t(5),k=t(39),R=t(25),S=t(205),C=t(206),A=t(35),_={primary:"#4a8df9",dark:"#161616",grey:"#A7ABC5",hoverColor:"#E8F1FE",focusRingColor:"#c8e0ff",white:"#fff",secondaryNavy:"#152065",secondaryRed:"#f24f66",secondaryGreen:"#24d69d",secondaryOrange:"#fd9b5a",secondaryPurple:"#8088d6",neutral10:"#1d365c",neutral9:"#2d4366",neutral8:"#556885",neutral7:"#8390a5",neutral6:"#99a5b6",neutral5:"#bbc3ce",neutral4:"#d2d7de",neutral3:"#dde1e7",neutral2:"#e8ebef",neutral1:"#f4f5f7",neutral0:"#fcfcfc",supportingBlue8:"#2c5390",supportingBlue7:"#3067c0",supportingBlue6:"#3373db",supportingBlue5:"#5c98fa",supportingBlue4:"#77a9fa",supportingBlue3:"#9bc0fc",supportingBlue2:"#d2e2fd",supportingBlue1:"#e4eefe",supportingBlue0:"#f6f9ff",supportingRed8:"#7b2323",supportingRed7:"#a32e2e",supportingRed6:"#d6384d",supportingRed5:"#f4697d",supportingRed4:"#f68494",supportingRed3:"#f89eab",supportingRed2:"#fab9c2",supportingRed1:"#fde5e8",supportingRed0:"#fef6f7",supportingYellow8:"#9b6f36",supportingYellow7:"#e69d3d",supportingYellow6:"#fdab40",supportingYellow5:"#febd69",supportingYellow4:"#fec882",supportingYellow3:"#fed7a3",supportingYellow2:"#ffedd5",supportingYellow1:"#fff4e6",supportingYellow0:"#fffbf7",supportingGreen8:"#12694d",supportingGreen7:"#1a9970",supportingGreen6:"#20c08c",supportingGreen5:"#3adaa7",supportingGreen4:"#66e2bb",supportingGreen3:"#87e8c9",supportingGreen2:"#a8eed8",supportingGreen1:"#def9f0",supportingGreen0:"#f4fdfa",shopify:"#95bf46",hubspot:"#f8761f",recharge:"#53bad3",hdoc:"#f44599",smile:"#fbc335",stripe:"#6875e2"};function I(){var e=Object(R.a)(["\n    --focus-color: ",";\n    a:focus {\n        outline-color: var(--focus-color);\n    }\n\n    background: ",";\n    overflow: hidden;\n    z-index: 2;\n    border-radius: 5px;\n    display: flex;\n    flex-direction: column;\n\n    box-shadow: 0 3px 15px rgba(0, 0, 0, 0.15);\n\n    width: ","px;\n    height: ","px;\n\n    position: relative;\n    top: 10px;\n    left: 15px;\n\n    transform: translateY(0);\n\n    animation: ","\n        0.3s ease-in-out;\n\n    &:focus {\n        outline: none;\n    }\n\n    &.widget-xs {\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        border-radius: 0;\n        animation: ","\n            0.3s ease-in-out;\n    }\n\n    transition: width 0.2s ease, height 0.2s ease;\n"]);return I=function(){return e},e}function N(){var e=Object(R.a)(["\n    0% {\n        opacity: 1;\n        transform: translateY(0);\n    }\n    100% {\n        opacity: 0;\n        transform: translateY(10px);\n    }\n"]);return N=function(){return e},e}function T(){var e=Object(R.a)(["\n    0% {\n        opacity: 0;\n        transform: translateY(10px);\n    }\n    100% {\n        opacity: 1;\n        transform: translateY(0);\n    }\n"]);return T=function(){return e},e}function L(){var e=Object(R.a)(["\n    margin: 0px 15px 0px 0px;\n    overflow: hidden;\n    user-select: none;\n\n    border: none;\n    border-radius: 5px;\n\n    position: fixed;\n    right: 0;\n    bottom: 90px;\n    top: auto;\n\n    display: ",";\n\n    ","\n\n    z-index: 2147483002;\n\n    transition: width 0.2s ease, height 0.2s ease;\n"]);return L=function(){return e},e}function D(e){var n=S.a.replace(/aria-label/g,"data-balloon-content"),t=e.createElement("style");t.setAttribute("data-testid","balloon-styles"),t.innerHTML="".concat(E.d," ").concat(n," ").concat(C.a," ").concat(function(){var e="";return Object.keys(_).forEach((function(n){e="".concat(e," --").concat(n,": ").concat(_[n],";")})),":root { ".concat(e," }")}()," ").concat(":root {\n        --text20: 1.25rem;\n        --text16: 1rem;\n        --text14: 0.875rem;\n        --text13: 0.8125rem;\n        --text12: 0.75rem;\n        --text10: 0.625rem;\n        --text8: 0.5rem;\n        --secondaryText: var(--text12);\n        --messageText: var(--text14);\n        --shadowBase: 0px 1px 2px rgba(0, 0, 0, 0.1), 0px 1px 3px rgba(0, 0, 0, 0.16);\n\n        --headingColor: var(--neutral10);\n        --textColor: var(--neutral10);\n        --pageBasePaddingTop: 10px;\n    }"," ").concat(E.c),e.head.appendChild(t);var r=e.createElement("title");r.innerText="Gorgias live chat window",e.head.appendChild(r);var a=e.createElement("script");a.src="https://polyfill.io/v3/polyfill.min.js?features=smoothscroll",e.head.appendChild(a)}var M,P=Object(A.a)((function(e){e.size,e.shouldRender,e.dimensions;var n=Object(k.a)(e,["size","shouldRender","dimensions"]);return c.a.createElement(x.a,n)}))(L(),(function(e){return e.shouldRender?"block":"none"}),(function(e){return function(e,n){var t=n.width,r=n.height;switch(e){case"xs":return"\n                width: ".concat(t," !important;\n                height: ").concat(r," !important;\n                left: 0 !important;\n                bottom: 0 !important;\n                top: auto !important;\n                border-radius: 0;\n            ");case"md":case"sm":case"lg":default:return"\n                width: ".concat(t,"px !important;\n                height: ").concat(r,"px !important;\n            ")}}(e.size,e.dimensions)})),F=function(){return Object(o.f)(T())},G=function(){return Object(o.f)(N())},z=A.a.div(I(),(function(e){return Object(E.h)(e.theme.mainColor)}),E.a.White,(function(e){return e.dimensions.width}),(function(e){return e.dimensions.height}),(function(e){return e.isOpen?F():G()}),(function(e){return e.isOpen?F():G()})),V=t(120),B=t(42),H=t(22),U=t(10),W=t(119),Y=t(29),Z=t(110),q=t(106);function K(){var e=Object(R.a)(["\n    font-family: FontAwesome;\n    -moz-osx-font-smoothing: grayscale;\n    -webkit-font-smoothing: antialiased;\n    display: inline-block;\n    font-style: normal;\n    font-variant: normal;\n    text-rendering: auto;\n    line-height: 1;\n    font-weight: 900;\n\n    &:before {\n        content: ",";\n    }\n"]);return K=function(){return e},e}!function(e){e.PLANE='"\f1d8"',e.CAMERA='"\f030"',e.CHEVRON_LEFT='"\f053"',e.CHEVRON_RIGHT='"\f054"',e.CHECK='"\f00c"',e.CHECK_CIRCLE='"\f058"',e.WARNING='"\f071"',e.INFO='"\f129"',e.INFO_SOLID='"\f05a"',e.EXCLAMATION_CIRCLE='"\f06a"',e.ANGLE_RIGHT='"\f105"',e.FA_ANGLE_DOWN='"\f107"',e.FA_ANGLE_UP='"\f106"',e.FA_EXTERNAL_LINK='"\f0c1"',e.FA_PHOTO='"\f03e"'}(M||(M={}));var X=A.a.i(K(),(function(e){return e.code}));function J(){var e=Object(R.a)(["\n    position: absolute;\n    width: 10px;\n    height: 10px;\n    bottom: 1px;\n    right: 2px;\n    border-radius: 50%;\n"]);return J=function(){return e},e}function $(){var e=Object(R.a)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 40px;\n    z-index: 2;\n\n    transition: background 0.2 linear;\n    transform: none;\n    position: relative;\n    border-radius: 50%;\n    background-size: 100%;\n    background-position: center;\n    background-repeat: no-repeat;\n    color: ",";\n\n    &:first-of-type,\n    &:last-of-type {\n        z-index: 1;\n    }\n\n    span {\n        background: ",";\n    }\n\n    ","\n"]);return $=function(){return e},e}function Q(){var e=Object(R.a)(["\n    display: flex;\n    flex-wrap: nowrap;\n    margin-right: 15px;\n    align-items: center;\n"]);return Q=function(){return e},e}function ee(){var e=Object(R.a)(["\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    height: 100%;\n    color: ",";\n    max-height: 120px;\n\n    h2.chat-title {\n        color: white;\n        font-size: 13px;\n        font-weight: 600;\n        line-height: 16px;\n        margin-bottom: 4px;\n        word-break: break-word;\n    }\n\n    h2 {\n        margin: 0;\n        color: white;\n        line-height: 18px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-height: 90px;\n        font-size: 15px;\n        font-weight: normal;\n        word-break: break-word;\n    }\n\n    .back-online {\n        line-height: 12px;\n        font-size: 12px;\n        padding: 4px 8px;\n        border-radius: 8px;\n        background: rgba(0, 0, 0, 0.08);\n        margin-top: 8px;\n    }\n"]);return ee=function(){return e},e}function ne(){var e=Object(R.a)(["\n    position: relative;\n    min-width: 48px;\n    min-height: 48px;\n    border-radius: 50%;\n    order: 1;\n\n    svg {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n    }\n\n    &:focus {\n        box-shadow: 0 0 3px 3px white;\n        outline: none;\n    }\n"]);return ne=function(){return e},e}function te(){var e=Object(R.a)(["\n    box-sizing: border-box;\n    width: 100%;\n    min-height: 86px;\n\n    box-shadow: 0 2px 23px 0px rgba(57, 57, 57, 0.26);\n    position: relative;\n    z-index: 2;\n    display: flex;\n    justify-content: space-between;\n    background-color: ",";\n    align-items: center;\n\n    padding-top: 18px;\n    padding-bottom: 18px;\n    padding-left: 20px;\n    padding-right: 20px;\n\n    .widget-md &,\n    .widget-sm & {\n        padding-left: 15px;\n        padding-right: 15px;\n    }\n\n    .go-back-btn {\n        background: transparent;\n        border: none;\n        color: white;\n        animation: "," 150ms ease-out;\n        &:focus {\n            outline: none;\n            transform: scale(1.3);\n            &::after {\n                color: var(--neutral2);\n            }\n        }\n\n        &::after {\n            font-family: FontAwesome;\n            -moz-osx-font-smoothing: grayscale;\n            -webkit-font-smoothing: antialiased;\n            font-style: normal;\n            font-variant: normal;\n            text-rendering: auto;\n            line-height: 1;\n            font-weight: normal;\n            font-size: 1rem;\n            content: ",";\n            display: inline-block;\n            margin-right: 0.4rem;\n            margin-left: 0;\n        }\n    }\n\n    .close-handle {\n        display: none;\n        cursor: pointer;\n\n        .widget-xs & {\n            display: block;\n        }\n    }\n\n    .header-group {\n        display: flex;\n        align-items: center;\n    }\n"]);return te=function(){return e},e}X.defaultProps={"aria-hidden":!0};var re=A.a.div(te(),(function(e){return e.isChatOnline?e.theme.mainColor:e.theme.offlineColor}),E.b,M.CHEVRON_LEFT),ae=Object(A.a)(q.a)(ne()),oe=A.a.div(ee(),E.a.White),ie=A.a.div(Q()),ce=A.a.div($(),E.a.DarkGrey,(function(e){return e.isActive?E.a.Green:E.a.Orange}),(function(e){return e.extraStyles})),le=A.a.span(J());function ue(){var e=Object(R.a)(["\n        background-image: ",";\n        width: ",";\n        height: ",";\n    "]);return ue=function(){return e},e}function se(){var e=Object(R.a)(["\n        background-color: rgba(0, 0, 0, 0.2);\n        background-image: ",";\n        width: ",";\n        height: ",";\n        transform: ",";\n    "]);return se=function(){return e},e}var de={small:"32px",medium:"40px",tall:"50px"},pe=function(e){var n=e.isActive,t=e.agents,r=e.index,a=t[r],i=function(e,n){return e.length>2&&(0===n||n===e.length-1)?"small":1===e.length?"tall":2===e.length&&0===n?"small":"medium"}(t,r),l=Object(o.d)(se(),a.avatarUrl?"url('".concat(a.avatarUrl,"')"):"none",de[i],de[i],(0===r||r===t.length-1)&&t.length>1?"translateX(".concat(0===r?3:-3,"px)"):"none");return c.a.createElement(ce,{extraStyles:l,isActive:n,"aria-label":"".concat(a.name," profile picture")},!a.avatarUrl&&c.a.createElement(Z.a,{name:a.name}),c.a.createElement(le,null))},fe=Object(i.memo)((function(e){var n=e.isActive,t=Object(s.b)((function(e){var n,t,r,a;return[e.application.settings.agents,null===(n=e.application.settings)||void 0===n||null===(t=n.decoration)||void 0===t?void 0:t.avatarType,null===(r=e.application.settings)||void 0===r||null===(a=r.decoration)||void 0===a?void 0:a.avatarTeamPictureUrl]})),r=Object(a.a)(t,3),i=r[0],l=r[1],u=r[2];if(l===Y.b.TEAM_MEMBERS)return c.a.createElement(ie,null,i.map((function(e,t){return c.a.createElement(pe,{key:t,isActive:n,agents:i,index:t})})));var d=Object(o.d)(ue(),u?"url('".concat(u,"')"):"none",de.tall,de.tall);return c.a.createElement(ie,null,c.a.createElement(ce,{isActive:n,extraStyles:d,"aria-label":"Team avatar picture"},c.a.createElement(le,null)))})),be=Object(i.memo)((function(){var e=Object(s.a)(),n=c.a.useState(""),t=Object(a.a)(n,2),r=t[0],l=t[1],p=Object(d.i)(),f=Object(d.h)(),b=Object(s.b)((function(e){var n,t;return{businessHours:e.application.settings.businessHours,texts:e.application.texts,sspTexts:e.selfServicePortal.sspTexts,isChatOnline:e.application.status.isChatOnline,areAgentsAvailable:e.application.status.areAgentsAvailable,introductionText:null===(n=e.application.settings.decoration)||void 0===n?void 0:n.introductionText,offlineIntroductionText:null===(t=e.application.settings.decoration)||void 0===t?void 0:t.offlineIntroductionText,name:e.application.settings.name,enabledSSP:e.selfServicePortal.enabled}})),m=b.businessHours,g=b.texts,h=b.sspTexts,v=b.isChatOnline,O=b.areAgentsAvailable,x=b.introductionText,j=b.offlineIntroductionText,E=b.name,y=b.enabledSSP;Object(i.useEffect)((function(){if(!v){var e=function(){var e=function(e,n,t){if(0===e.length||Object(V.b)(e))return"";var r=function(e){return 1===e?n.backLabelBackInAMinute:n.backLabelBackInMinutes.replace("{value}",e.toString())},a=function(e){return 1===e?n.backLabelBackInAnHour:n.backLabelBackInHours.replace("{value}",e.toString())},o=function(e){return 1===e?n.backLabelBackTomorrow:n.backLabelBackInDays.replace("{value}",e.toString())},i=Object(V.a)(e);if(0===e.length||i||H.a.dispatch(Object(w.n)({text:t.pleaseRefreshPageToUseChat,type:U.d.WARNING,category:U.c.GENERAL,isOpen:!0})),!i)return"";var c=Object(B.a)(),l=Object(B.a)(i),u=l.diff(c,"minute");if(c.clone().add(u,"minute").day()!==c.day()&&u<1440)return o(1);if(u>=1440){var s=l.diff(c,"day"),d=l.clone().hour(23).minute(59).second(59);return c.add(s+1,"day")<=d&&(s+=1),o(s)}return u>=60?a(Math.round(u/60)):r(u)}(m,g,h);l(e)};e();var n=setInterval(e,6e4);return function(){clearInterval(n)}}l("")}),[m,g,h,v]);var k=v?x:j,R=(f.entries[0]||{}).pathname===p.pathname,S=Object(d.g)(p.pathname,{path:u.a.CHAT,strict:!0,exact:!0});return Object(o.e)(re,{isChatOnline:v,role:"region","aria-label":"Live chat window header"},Object(o.e)(ae,{"aria-label":"Close the chat window",className:"close-handle",onClick:function(){return e(Object(w.m)(!1))}},Object(o.e)(W.a,null)),Object(o.e)("div",{className:"header-group"},f.length>1&&!R&&Object(o.e)("button",{type:"button","aria-label":"navigate back",className:"go-back-btn",onClick:function(){return f.goBack()}}),R&&S&&y&&Object(o.e)("button",{type:"button","aria-label":"go to home page",className:"go-back-btn",onClick:function(){return f.replace(u.a.SELF_SERVICE_PORTAL__HOME)}}),Object(o.e)(fe,{isActive:O&&v}),Object(o.e)(oe,null,E?Object(o.e)("h2",{className:"chat-title"},E):null,Object(o.e)("h2",null,k||""),!v&&""!==r&&Object(o.e)("div",{className:"back-online"},r))))})),me=t(4),ge=t(102),he=t(245);function ve(){var e=Object(R.a)(["\n    position: absolute;\n    width: 90%;\n    z-index: 1;\n    margin: 8px auto 0 auto;\n    left: 0;\n    right: 0;\n    border-radius: 14px;\n    font-size: 14px;\n    --focus-color: ",";\n    button.close:focus {\n        outline: none;\n        box-shadow: 0 0 0 3px var(--focus-color);\n        border-radius: 10px;\n    }\n"]);return ve=function(){return e},e}var Oe=Object(A.a)(he.a)(ve(),(function(e){return Object(E.h)(e.theme.mainColor)})),xe=Object(i.memo)((function(){var e=Object(s.a)(),n=Object(s.b)((function(e){return e.application.status.messageBanner})),t=Object(i.useState)(n),r=Object(a.a)(t,2),o=r[0],u=r[1];Object(i.useEffect)((function(){u((function(e){return Object(l.a)({},e,{isOpen:!1})})),n.isOpen&&setTimeout((function(){u(n)}),200)}),[n]);return c.a.createElement(Oe,{color:o.type,isOpen:o.isOpen,toggle:function(){o.isOpen&&(u((function(e){return Object(l.a)({},e,{isOpen:!1})})),e(Object(w.a)(o.category)))},timeout:200},o.text)})),je=t(181),Ee=t(180);function ye(){var e=Object(R.a)(["\n    position: relative;\n    height: 100%;\n"]);return ye=function(){return e},e}function we(){var e=Object(R.a)(["\n    position: relative;\n    background-color: var(--neutral0);\n    flex: 1;\n    width: 100%;\n    overflow-y: auto;\n\n    .ssp-page {\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        padding: ","px;\n\n        &.page-navigation-enter {\n            opacity: 0;\n            transform: translateY(4px);\n        }\n        &.page-navigation-enter-active {\n            opacity: 1;\n            transition: opacity ","ms,\n                transform ","ms;\n            transition-timing-function: ease-out;\n            transform: translateY(0px);\n        }\n        &.page-navigation-exit {\n            opacity: 1;\n            transform: translateY(0px);\n        }\n        &.page-navigation-exit-active {\n            opacity: 0;\n            transition: opacity ","ms,\n                transform ","ms;\n            transition-timing-function: ease-out;\n            transform: translateY(-4px);\n        }\n    }\n"]);return we=function(){return e},e}var ke=ge.a.div(we(),10,200,200,200,200),Re=Object(ge.a)(je.a)(ye()),Se=function(e){var n=Object(d.i)();return c.a.createElement(ke,{id:"self-service-portal-container",className:"self-service-portal-container"},c.a.createElement(xe,null),c.a.createElement(Re,null,c.a.createElement(Ee.a,{key:n.key,classNames:"page-navigation",timeout:200},c.a.createElement(d.e,{location:n},e.children))))},Ce=t(72),Ae=function(e){var n=e.children,t=Object(k.a)(e,["children"]),r=Object(s.b)((function(e){return m(e)})).length>0;return c.a.createElement(d.c,t,r?n:c.a.createElement(d.b,{to:u.a.SELF_SERVICE_PORTAL__LOGIN}))};function _e(){var e=Object(R.a)(["\n    position: absolute;\n    top: 0.3rem;\n    width: 80%;\n    left: 50%;\n    transform: translateX(-50%);\n    text-align: center;\n    color: black;\n    background: white;\n    padding: 0.3rem 1rem;\n\n    user-select: none;\n    pointer-events: none;\n    opacity: 0;\n\n    z-index: 100;\n\n    &:focus {\n        opacity: 1;\n        outline-color: var(--focus-color);\n    }\n"]);return _e=function(){return e},e}var Ie=A.a.a(_e()),Ne=t(133),Te=t.n(Ne),Le=t(7),De=t(26),Me=t(88),Pe=t(79),Fe=t(71),Ge=t(105),ze=t(6);function Ve(){var e=Object(R.a)(["\n    display: inline-block;\n    font-weight: 400;\n    text-align: center;\n    vertical-align: middle;\n    touch-action: manipulation; /* disable the double tap zoom on touch screens */\n    cursor: pointer;\n    border: 1px solid transparent;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis; /* adds '...' when the text is too long */\n    padding: 5px 12px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    background: ",";\n    margin: 0 5px 5px 0;\n    border-radius: 14px;\n    color: ",";\n    border-color: ",";\n    user-select: none;\n\n    &:focus,\n    &:hover {\n        font-weight: bold;\n        outline: none;\n        text-decoration: none;\n        opacity: 0.8;\n        filter: alpha(opacity=80);\n    }\n"]);return Ve=function(){return e},e}var Be=Object(o.d)({display:"flex",flexWrap:"wrap",justifyContent:"center"}),He=A.a.button(Ve(),E.a.White,(function(e){return e.theme.mainColor}),(function(e){return e.theme.mainColor})),Ue=Object(i.memo)((function(e){var n=e.onClick,t=e.shouldDisplay,r=Object(s.b)((function(e){var n,t;return[Object(Ge.b)(e),null===(n=e.application.settings.quickReplies)||void 0===n?void 0:n.enabled,null===(t=e.application.settings.quickReplies)||void 0===t?void 0:t.replies,e.application.status.historyReceivedCount,e.application.status.historyComplete]})),i=Object(a.a)(r,5),c=i[0],l=i[1],u=i[2],d=i[3],p=i[4];return l&&u&&0!==(null===u||void 0===u?void 0:u.length)&&(!0===t||function(e,n){if(!e)return!1;if(0===n.length)return!0;var t=n.concat().reverse().find((function(e){var n=e.type===ze.a.CONVERSATION_MESSAGE&&"number"===typeof e.id,t=e.type===ze.a.PENDING_CONVERSATION_MESSAGE;return n||t}));return!t||t.type!==ze.a.PENDING_CONVERSATION_MESSAGE&&!(t.type!==ze.a.CONVERSATION_MESSAGE||!(null===t||void 0===t?void 0:t.createdDatetime)||!Object(B.a)().subtract(24,"hour").isAfter(null===t||void 0===t?void 0:t.createdDatetime))}(1===d||p,c))?Object(o.e)("div",{css:Be},u.map((function(e){return Object(o.e)(He,{"aria-label":'Send "'.concat(e,'" message'),key:e,onClick:n(e)},e)}))):null})),We=t(109);function Ye(){var e=Object(R.a)(["\n    display: inline-block;\n"]);return Ye=function(){return e},e}var Ze=A.a.div(Ye());function qe(){return(qe=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ke(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var Xe=c.a.createElement("path",{d:"M1.84849 10.388L1.10628 10.2802L1.84849 10.388ZM26.1515 10.388L26.8937 10.2802L26.8937 10.2802L26.1515 10.388ZM25.75 14.5C25.75 20.9893 20.4893 26.25 14 26.25V27.75C21.3178 27.75 27.25 21.8178 27.25 14.5H25.75ZM14 26.25C7.51065 26.25 2.25 20.9893 2.25 14.5H0.75C0.75 21.8178 6.68223 27.75 14 27.75V26.25ZM2.25 14.5C2.25 13.5323 2.36641 12.0402 2.59071 10.4958L1.10628 10.2802C0.874978 11.8729 0.75 13.44 0.75 14.5H2.25ZM25.4093 10.4958C25.6336 12.0402 25.75 13.5323 25.75 14.5H27.25C27.25 13.44 27.125 11.8729 26.8937 10.2802L25.4093 10.4958ZM8.93465 5.75H19.0654V4.25H8.93465V5.75ZM26.8937 10.2802C26.3229 6.34987 22.7999 4.25 19.0654 4.25V5.75C22.3041 5.75 24.9779 7.52525 25.4093 10.4958L26.8937 10.2802ZM2.59071 10.4958C3.02212 7.52525 5.69593 5.75 8.93465 5.75V4.25C5.20009 4.25 1.67709 6.34987 1.10628 10.2802L2.59071 10.4958Z",fill:"white"}),Je=c.a.createElement("path",{d:"M9.99827 19.4394C9.68869 19.1643 9.21463 19.1921 8.93944 19.5017C8.66425 19.8113 8.69214 20.2854 9.00173 20.5606L9.99827 19.4394ZM9.90918 20.3234L9.47528 20.9351L9.47528 20.9351L9.90918 20.3234ZM18.0908 20.3234L18.5247 20.9351L18.5247 20.9351L18.0908 20.3234ZM18.9983 20.5606C19.3079 20.2854 19.3357 19.8113 19.0606 19.5017C18.7854 19.1921 18.3113 19.1643 18.0017 19.4394L18.9983 20.5606ZM9.00173 20.5606C9.15158 20.6938 9.31083 20.8185 9.47528 20.9351L10.3431 19.7116C10.217 19.6222 10.1016 19.5313 9.99827 19.4394L9.00173 20.5606ZM18.5247 20.9351C18.6892 20.8185 18.8484 20.6938 18.9983 20.5606L18.0017 19.4394C17.8984 19.5313 17.783 19.6222 17.6569 19.7116L18.5247 20.9351ZM9.47528 20.9351C12.1228 22.813 15.8772 22.813 18.5247 20.9351L17.6569 19.7116C15.5292 21.2208 12.4708 21.2208 10.3431 19.7116L9.47528 20.9351Z",fill:"white"}),$e=c.a.createElement("rect",{width:17,height:4,rx:2,transform:"matrix(1 0 0 -1 5.5 14)",stroke:"white",strokeWidth:1.5}),Qe=c.a.createElement("path",{d:"M11.5 0.25C11.0858 0.25 10.75 0.585786 10.75 1C10.75 1.41421 11.0858 1.75 11.5 1.75V0.25ZM16.5 1.75C16.9142 1.75 17.25 1.41421 17.25 1C17.25 0.585786 16.9142 0.25 16.5 0.25V1.75ZM11.5 1.75H16.5V0.25H11.5V1.75Z",fill:"white"}),en=function(e){var n=e.svgRef,t=e.title,r=Ke(e,["svgRef","title"]);return c.a.createElement("svg",qe({width:25,height:25,viewBox:"0 0 28 28",fill:"none",ref:n},r),t?c.a.createElement("title",null,t):null,Xe,Je,$e,Qe)},nn=c.a.forwardRef((function(e,n){return c.a.createElement(en,qe({svgRef:n},e))}));t.p;function tn(){var e=Object(R.a)(["\n    label: AvatarBotWrapper;\n\n    background: ",";\n    display: inline-flex;\n    justify-content: center;\n    align-items: center;\n"]);return tn=function(){return e},e}function rn(){var e=Object(R.a)(["\n    label: AvatarWrapper;\n    border-radius: 100%;\n    width: 35px;\n    height: 35px;\n    margin-right: 9px;\n    margin-top: 0;\n    vertical-align: top;\n    display: inline-block;\n    opacity: ",";\n\n    img {\n        width: 35px;\n        height: 35px;\n        border-radius: 50%;\n        box-shadow: 0 1px 0 rgba(0, 0, 0, 0.05);\n    }\n"]);return rn=function(){return e},e}var an=A.a.div(rn(),(function(e){return e.isFirstInGroup?1:0})),on=Object(A.a)(an)(tn(),E.a.MediumDarkGrey),cn=function(e){var n=e.avatarURL,t=e.name,r=e.isFirstInGroup;return e.isBot?c.a.createElement(on,{isFirstInGroup:r,"aria-hidden":!r},c.a.createElement(nn,null)):c.a.createElement(an,{isFirstInGroup:r,"aria-hidden":!r},n?c.a.createElement("img",{alt:"".concat(t," profile"),src:n}):c.a.createElement(Z.a,{name:t}))};function ln(){var e=Object(R.a)(["\n    width: 44px;\n    min-height: 1px;\n    margin-right: 6px;\n"]);return ln=function(){return e},e}function un(){var e=Object(R.a)(["\n    font-weight: 500;\n    font-size: ",";\n    color: ",";\n    line-height: 16px;\n    margin-bottom: 6px;\n    word-break: break-word;\n"]);return un=function(){return e},e}function sn(){var e=Object(R.a)(["\n    padding: 15px 20px 0;\n    width: 100%;\n    flex-grow: 1;\n    border-bottom: 1px solid transparent;\n    box-sizing: border-box;\n"]);return sn=function(){return e},e}function dn(){var e=Object(R.a)(["\n    position: relative;\n    margin-right: 2px;\n    transition: padding-top 0.5s;\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n"]);return dn=function(){return e},e}function pn(){var e=Object(R.a)(["\n    overflow-y: auto;\n    overflow-x: hidden;\n    overscroll-behavior: contain;\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n"]);return pn=function(){return e},e}var fn=A.a.div(pn()),bn=A.a.div(dn()),mn=(Object(o.d)({lineHeight:"15px",marginBottom:"12px",textAlign:"center",a:{fontSize:"12px",color:E.a.Grey,textDecoration:"none"}}),Object(o.d)({width:"100%",textAlign:"center",textTransform:"uppercase",fontSize:"12px",lineHeight:"15px",letterSpacing:"0.05em",color:E.a.Grey,marginTop:"24px",marginBottom:"24px"})),gn=A.a.div(sn()),hn=Object(o.d)({display:"flex",flexDirection:"column",marginBottom:"6px"}),vn=function(e){return Object(o.d)({display:"flex",flexDirection:"row",marginTop:e?"20px":0,marginBottom:"6px"})},On=A.a.div(un(),E.f.senderName,E.a.DarkGrey),xn=A.a.div(ln());xn.defaultProps={"aria-hidden":!0};var jn,En=Object(o.d)({display:"inline-block",borderRadius:"14px",padding:"3px",maxWidth:"100%",overflowWrap:"break-word",color:E.a.White}),yn=Object(o.d)(En,{background:E.a.VeryLightGrey,boxShadow:"0px 1px 1px rgba(0, 0, 0, 0.05)",color:E.a.DarkGrey}),wn=Object(o.d)(yn,{borderTopLeftRadius:"0px",marginTop:"2px"}),kn=Object(o.d)({padding:"8px 13px",whiteSpace:"pre-line",fontWeight:400,fontSize:E.f.message,fontRendering:"optimizelegibility",wordBreak:"break-word"}),Rn=Object(o.d)({fontWeight:400,fontSize:"12px",color:E.a.Grey,marginTop:"5px",padding:0,lineHeight:"20px",backgroundColor:"transparent",border:"none",outline:"none",display:"flex",alignSelf:"flex-end",svg:{marginRight:"6px"},":focus, :active":{outline:"none"}}),Sn=Object(o.d)(Rn,{textAlign:"right"}),Cn=Object(o.d)([wn,{marginLeft:"-100px",opacity:"0.1",transition:"margin-left .25s cubic-bezier(.55,0,.1,1) .3s,\n    \topacity .25s cubic-bezier(.55,0,.1,1) .3s"}]),An=Object(o.d)({marginLeft:0,opacity:1}),_n=Object(o.d)(kn,{height:"18px"});!function(e){e.TEXT="text",e.HTML="html",e.ATTACHMENTS="attachments",e.OPTIONAL_EMAIL_CAPTURE_FORM="optional-email-capture-form"}(jn||(jn={}));function In(){var e=Object(R.a)(["\n    --balloon-font-size: 12px;\n    --balloon-border-radius: 4px;\n    --balloon-color: #333;\n"]);return In=function(){return e},e}var Nn=A.a.div(In()),Tn=Object(i.memo)((function(e){var n=e.content,t=e.placement,r=e.disabled,a=e.children;return r?Object(o.e)(i.Fragment,null,a):Object(o.e)(Nn,{"data-balloon-blunt":!0,"data-balloon-content":n,"data-balloon-pos":t},a)}));function Ln(){var e=Object(R.a)(["\n    & img {\n        width: 100%;\n    }\n"]);return Ln=function(){return e},e}var Dn=ge.a.div(Ln()),Mn=Object(i.memo)((function(e){var n=e.text,t=e.html,r=e.className,a=Object(i.useContext)(O.FrameContext).document;return Object(i.useEffect)((function(){if(t){var e=a.querySelectorAll(".inner-content a[href]"),n=a.querySelectorAll(".inner-content area[href]");e.forEach((function(e){e.target="_blank"})),n.forEach((function(e){e.target="_blank"}))}}),[a,t]),t?Object(o.e)(Dn,{className:r?"inner-content ".concat(r):"inner-content",css:kn,dangerouslySetInnerHTML:{__html:t}}):Object(o.e)("div",{className:r?"inner-content ".concat(r):"inner-content",css:kn},n)}));function Pn(){var e=Object(R.a)(["\n    max-width: 100%;\n    display: block;\n    cursor: pointer;\n    right: ",";\n    left: ",";\n    background-color: transparent;\n    border: none;\n    border-radius: ",";\n    padding: 0;\n    margin: 0;\n    overflow: hidden;\n\n    &:focus {\n        outline: none;\n        box-shadow: 0 0 0 4px var(--focus-color);\n    }\n"]);return Pn=function(){return e},e}function Fn(){var e=Object(R.a)(["\n    display: flex;\n    justify-content: ",";\n    align-items: flex-start;\n    margin-top: 4px;\n    margin-bottom: 4px;\n"]);return Fn=function(){return e},e}var Gn=Object(o.d)({width:"100%",p:{margin:0,wordBreak:"break-word"},".inner-content":{paddingTop:0,paddingLeft:0,paddingRight:0}}),zn=function(e,n){var t=Object(o.d)(Gn,{".attachment-content-image-container":{button:{borderRadius:"14px"}}});if(n){var r=e?{borderTopLeftRadius:0}:{borderTopRightRadius:0};return Object(o.d)(t,{".attachment-content-image-container":{button:r}})}return t},Vn=A.a.div(Fn(),(function(e){return e.fromAgent?"flex-start":"flex-end"}));Vn.defaultProps={className:"attachment-content-image-container"};var Bn=A.a.input(Pn(),(function(e){return e.fromAgent?"auto":0}),(function(e){return e.fromAgent?0:"auto"}),(function(e){return e.withText?"6px":"14px"}));Bn.defaultProps={type:"input"};var Hn=Object(i.memo)((function(e){var n=e.alt,t=e.url,r=e.className,o=e.fromAgent,l=e.withText,u=Object(i.useState)(!1),d=Object(a.a)(u,2),p=d[0],f=d[1],b=Object(i.useRef)(new Image),m=Object(i.useRef)(null),g=Object(i.useRef)(!1),h=Object(Pe.b)().scrollToBottomSmooth,v=Object(s.b)((function(e){return[1===e.application.status.historyReceivedCount,Object(Ge.b)(e),e.application.status.isScrolledUp]})),O=Object(a.a)(v,3),x=O[0],j=O[1],E=O[2],y=j[j.length-1],w=(y&&"attachments"in y.content?y.content.attachments:[]).find((function(e){var n=e.url;return(void 0===n?"":n)===t}));return Object(i.useEffect)((function(){b.current&&!p&&(b.current.src=t,b.current.onload=function(){f(!0)},w||setTimeout((function(){g.current=!0}),2e3))}),[t,p,w]),Object(i.useEffect)((function(){!g.current&&!w&&p&&x&&h&&(g.current=!0,h())}),[h,p,w,x]),Object(i.useEffect)((function(){if(p&&!g.current&&w){if(y.fromAgent&&E)return void(g.current=!0);h&&(g.current=!0,h(100))}}),[h,p,w,y,E,t]),c.a.createElement(Bn,{type:"image",role:"button",fromAgent:o,onClick:function(){var e;null===(e=m.current)||void 0===e||e.focus(),window.open(t)},withText:l,hide:!p||!b.current,ref:m,alt:n,className:r,src:t})})),Un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return 0===e.length?null:n||t!==ze.a.PENDING_CONVERSATION_MESSAGE?e.map((function(e,t){var a=e.url,i=e.contentType,c=a.split("/").pop();return i.startsWith("image/")?Object(o.e)(Vn,{"data-testid":"attachment-content-image-container",key:"".concat(a,"-").concat(t),fromAgent:n},Object(o.e)(Hn,{alt:"image attachment",fromAgent:n,withText:r,url:a})):i?Object(o.e)("a",{"data-testid":"file attachment","aria-label":"Link to a ".concat(i.split("/")[1]?i.split("/")[1]:""," file"),href:a,onClick:function(e){e.preventDefault(),window.open(a)},key:a},c):null})):null},Wn=Object(i.memo)((function(e){var n=e.content,t=e.createdDatetime,r=e.isFirstInGroup,a=e.fromAgent,i=e.typeOfMessage,c=n.text,l=void 0===c?null:c,u=n.html,s=n.attachments,d=Object(B.a)(t).format("hh:mm A"),p=a?"up-left":"up-right";return function(e){return!(!e.attachments||!Array.isArray(e.attachments))&&(1===e.attachments.length&&0===e.attachments[0].contentType.indexOf("image/")&&!e.text)}(n)?Object(o.e)(Tn,{placement:p,content:d,disabled:!t},Object(o.e)("div",{css:zn(a,r),"data-testid":"attachment-content-component"},l&&Object(o.e)(Mn,{text:l,html:u}),Un(s,a,i,Boolean(l)))):a?Object(o.e)("div",{css:r?wn:yn},Object(o.e)("div",{css:kn},Object(o.e)(Tn,{placement:p,content:d,disabled:!t},Object(o.e)("div",{css:Gn,"data-testid":"attachment-content-component"},l&&Object(o.e)(Mn,{text:l,html:u}),Un(s,a,i,Boolean(l)))))):null})),Yn=t(69);function Zn(){var e=Object(R.a)(["\n    a {\n        color: ",";\n    }\n    a:hover {\n        color: ",";\n    }\n"]);return Zn=function(){return e},e}var qn=Object(A.a)(Mn)(Zn(),E.a.White,E.a.LightGrey),Kn=Object(i.memo)((function(e){var n=e.text,t=e.html,r=e.isFirstInGroup,a=e.createdDatetime,c=e.fromAgent,l=e.typeOfMessage,u=Object(Yn.b)(),d=Object(s.b)((function(e){return e.application.status.isChatOnline})),p=Object(i.useMemo)((function(){return l!==ze.a.CONVERSATION_MESSAGE?d?u.pendingConversationColor:u.offlinePendingConversationColor:d?u.conversationColor:u.offlineColor}),[l,d,u]),f=Object(B.a)(a).format("hh:mm A");return c?Object(o.e)("div",{css:r?wn:yn},Object(o.e)(Tn,{placement:"down-left",content:f,disabled:!a},Object(o.e)(Mn,{text:n,html:t}))):Object(o.e)("div",{css:En,style:Object.assign({backgroundColor:p},r?{borderTopRightRadius:"0px",marginTop:"12px"}:{})},Object(o.e)(Tn,{placement:"down-right",content:f,disabled:l!==ze.a.CONVERSATION_MESSAGE},Object(o.e)(qn,{text:n,html:t})))})),Xn=function(e){var n=e.createdDatetime,t=e.isFirstInGroup,r=e.fromAgent,o=e.typeOfMessage,i=Object(s.b)((function(e){return[e.application.texts,e.application.status.isChatOnline]})),l=Object(a.a)(i,2),u=l[0],d=l[1]?u.emailCaptureOnlineTriggerText:u.emailCaptureOfflineTriggerText;return c.a.createElement(Kn,{text:d,createdDatetime:n,isFirstInGroup:t,fromAgent:r,typeOfMessage:o})},Jn=function(e){var n=e.content,t=e.createdDatetime,r=e.isFirstInGroup,a=e.fromAgent,i=e.typeOfMessage;switch(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.attachments||[],t=e.text||"",r=e.html||"",a=e.type||"";return n.length>0?jn.ATTACHMENTS:r?jn.HTML:t?jn.TEXT:a||void 0}(n)){case jn.ATTACHMENTS:return Object(o.e)(Wn,{content:n,createdDatetime:t,isFirstInGroup:r,fromAgent:a,typeOfMessage:i});case jn.OPTIONAL_EMAIL_CAPTURE_FORM:return Object(o.e)(Xn,{createdDatetime:t,isFirstInGroup:r,fromAgent:a,typeOfMessage:i});case jn.HTML:return Object(o.e)(Kn,{text:n.text,html:n.html,createdDatetime:t,isFirstInGroup:r,fromAgent:a,typeOfMessage:i});case jn.TEXT:default:return Object(o.e)(Kn,{text:n.text,createdDatetime:t,isFirstInGroup:r,fromAgent:a,typeOfMessage:i})}},$n=t(13),Qn=t.n($n),et=t(20),nt=t(121),tt=function(e,n){var t=Object(B.a)(e);return t>Object(B.a)().subtract(1,"minute")?n.messageRelativeTimeJustNow:t>Object(B.a)().subtract(1,"hour")?n.messageRelativeTimeMinute.replace("{value}",Math.floor(Object(B.a)().diff(t,"minute")).toString()):t>Object(B.a)().subtract(1,"day")?n.messageRelativeTimeHour.replace("{value}",Math.floor(Object(B.a)().diff(t,"hour")).toString()):n.messageRelativeTimeDay.replace("{value}",Math.floor(Object(B.a)().diff(t,"day")).toString())},rt=Object(i.memo)((function(e){var n=e.id,t=e.typeOfMessage,r=e.createdDatetime,c=Object(i.useState)(!1),l=Object(a.a)(c,2),u=l[0],d=l[1],p=Object(i.useState)(!1),f=Object(a.a)(p,2),b=f[0],m=f[1],g=Object(s.a)(),h=Object(s.b)((function(e){var n=e.application,t=n.status,r=n.texts;return[t.isConnected,t.initializedSocket,t.historyStatus,r]})),v=Object(a.a)(h,4),O=v[0],x=v[1],j=v[2],E=v[3],y=Object(i.useMemo)((function(){return!(x&&!O||u)}),[x,O,u]);Object(i.useEffect)((function(){x&&b&&(m((function(){return!1})),d((function(){return!0})))}),[x,b]),Object(i.useEffect)((function(){u&&j===U.g.SUCCESS&&(g(Object(De.a)({id:n})),d((function(){return!1})))}),[u,j,g,n]);var w=Object(i.useCallback)(function(){var e=Object(et.a)(Qn.a.mark((function e(t){return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),x||(g(Object(nt.a)()),m(!0)),O&&g(Object(De.a)({id:n}));case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[O,g,n,x]);return t===ze.a.CONVERSATION_MESSAGE||t===ze.a.PENDING_CONVERSATION_MESSAGE?Object(o.e)("div",{css:Sn},Object(o.e)("span",{className:"sr-only"},","),r?tt(r,E):E.messageSending):Object(o.e)("button",{type:"button",css:Sn,style:y?{cursor:"pointer"}:{},onClick:w},Object(o.e)("span",{style:{color:"#FFC600",marginRight:"4px"},role:"img","aria-label":"Warning emoji"},"\u26a0\ufe0f"),"Message not delivered. ",y&&Object(o.e)("span",{style:{fontWeight:"bold",marginLeft:"4px"}},"Click to retry"))})),at=t(9);function ot(){var e=Object(R.a)(["\n    display: inline-block;\n    font-size: 12px;\n    line-height: 14px;\n    margin-top: 6px;\n    color: ",";\n"]);return ot=function(){return e},e}function it(){var e=Object(R.a)(["\n    box-sizing: border-box;\n    width: 40px;\n    background: ",";\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    color: white;\n    opacity: 0.9;\n    transition: all 0.1s linear;\n    border-radius: 0 3px 3px 0;\n\n    &:hover {\n        opacity: 1;\n    }\n\n    &:focus {\n        outline: none;\n        border-color: white;\n        i {\n            transform-origin: center;\n            transform: scale(1.3);\n        }\n    }\n"]);return it=function(){return e},e}function ct(){var e=Object(R.a)(["\n    width: 100%;\n    box-sizing: border-box;\n    flex: 1;\n    border: 1px solid #c3c8d0;\n    border-right: none;\n    border-radius: 3px 0 0 3px;\n    padding-left: 10px;\n\n    transition: border 0.1s linear;\n\n    &:hover,\n    &:focus {\n        border-color: ",";\n    }\n\n    &:focus {\n        outline: none;\n    }\n"]);return ct=function(){return e},e}function lt(){var e=Object(R.a)(["\n    display: flex;\n    margin-top: 13px;\n    height: 40px;\n"]);return lt=function(){return e},e}function ut(){var e=Object(R.a)(["\n    font-size: 14px;\n    line-height: 17px;\n    font-weight: 600;\n    color: ",";\n"]);return ut=function(){return e},e}var st=function(e,n){return Object(o.d)(kn,{label:"optional-email-capture",marginTop:e?"10px":"15px",padding:"15px",background:e?E.a.LightGreen:E.a.VeryLightGrey,border:"1px solid ".concat(e?"rgba(36, 214, 157, 0.15)":"rgba(0, 0, 0, 0.05)"),boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.1)",borderRadius:"14px",transition:"all linear 0.1s",opacity:n?.5:1})},dt=A.a.span(ut(),E.a.DarkGrey),pt=A.a.form(lt()),ft=A.a.input(ct(),(function(e){return e.theme.mainColor})),bt=A.a.button(it(),(function(e){return e.theme.mainColor})),mt=A.a.span(ot(),E.a.Red);function gt(){var e=Object(R.a)(["\n    display: flex;\n    align-items: center;\n    font-size: 14px;\n    line-height: 20px;\n    color: ",";\n\n    p {\n        margin: 0;\n    }\n\n    i {\n        margin-right: 11px;\n    }\n\n    span {\n        font-weight: bold;\n    }\n"]);return gt=function(){return e},e}var ht=A.a.div(gt(),E.a.DarkGreen),vt=function(){var e=Object(s.b)((function(e){return[e.application.texts.emailCaptureOfflineThanksText,e.application.texts.emailCaptureOnlineThanksText,e.application.status.isChatOnline,e.user.email]})),n=Object(a.a)(e,4),t=n[0],r=n[1],o=n[2],i=n[3],l=o?r.split("{email}"):t.split("{email}"),u=Object(a.a)(l,2),d=u[0],p=u[1];return Boolean(i)?c.a.createElement(ht,{tabIndex:-1},c.a.createElement(X,{code:M.CHECK}),c.a.createElement("p",null,"".concat(d," "),c.a.createElement("span",null,i)," ".concat(p))):null},Ot=function(e){var n=e.email,t=e.hasError,r=e.isLoading,o=e.onChange,l=e.onSubmit,u=Object(s.b)((function(e){return[e.application.texts.emailCaptureInputLabel,e.application.texts.actionPostbackError]})),d=Object(a.a)(u,2),p=d[0],f=d[1],b=c.a.useRef(null);return c.a.createElement(i.Fragment,null,c.a.createElement(dt,null,p),c.a.createElement(pt,{onSubmit:function(e){var t;e.preventDefault(),n.trim()&&(null===(t=b.current)||void 0===t?void 0:t.reportValidity())&&l(e)}},c.a.createElement(ft,{value:n,"aria-label":"Provide your email to be notified",placeholder:"your@email.com",onChange:o,type:"email",name:"email",pattern:"^[\\w\\-\\+=']+[\\w\\.\\-\\+=']*@[\\w\\.\\-]+\\.\\w+$",disabled:r,maxLength:320,ref:b,required:!0}),c.a.createElement(bt,{type:"submit",disabled:r,"aria-label":"Submit your email"},c.a.createElement(X,{code:M.CHEVRON_RIGHT}))),t?c.a.createElement(mt,null,f):null)},xt=function(){var e=Object(s.a)(),n=Object(s.b)((function(e){return e.user.email})),t=Object(i.useState)(!1),r=Object(a.a)(t,2),c=r[0],l=r[1],u=Object(i.useState)(""),d=Object(a.a)(u,2),p=d[0],f=d[1],b=Object(i.useState)(!1),m=Object(a.a)(b,2),g=m[0],h=m[1],v=Object(i.useRef)(null);Object(i.useEffect)((function(){c&&null===v.current&&(v.current=setTimeout((function(){c&&!n&&(l(!1),h(!0))}),5e3)),c&&n&&(null!==v.current&&(clearTimeout(v.current),v.current=null),l(!1)),c||null===v.current||clearTimeout(v.current)}),[n,c]);var O=Object(i.useCallback)((function(e){f(e.target.value)}),[]);return Object(o.e)("div",{css:st(Boolean(n),c)},n?Object(o.e)(vt,null):Object(o.e)(Ot,{hasError:g,email:p,isLoading:c,onChange:O,onSubmit:function(n){n.preventDefault(),at.a.addBreadcrumb({message:"User tried to submit an email",data:{email:p}}),h(!1),v.current=null,e(Object(De.d)(p)),l(!0)}}))},jt=function(e){var n,t=e.content;return("type"in(n=t)?n.type:"")===jn.OPTIONAL_EMAIL_CAPTURE_FORM?c.a.createElement(xt,null):null},Et=Object(i.memo)((function(e){var n=e.id,t=e.isFirstInGroup,r=e.showStatusIndicator,a=e.content,i=e.createdDatetime,c=e.senderInfo,l=e.typeOfMessage,u=(null===c||void 0===c?void 0:c.name)?c.name:"Agent",s=Object(B.a)(i).format("h:mm A");return Object(o.e)("div",{css:vn(t),tabIndex:-1},Object(o.e)(xn,null,Object(o.e)(cn,{isFirstInGroup:t,avatarURL:null===c||void 0===c?void 0:c.avatarURL,name:null===c||void 0===c?void 0:c.name,isBot:Boolean(null===c||void 0===c?void 0:c.isBot)})),Object(o.e)(Ze,null,t&&Object(o.e)(On,{"aria-hidden":"true"},null===c||void 0===c?void 0:c.name),Object(o.e)("span",{className:"sr-only"},"".concat(s,". ").concat(u," says:")),Object(o.e)(Jn,{content:a,createdDatetime:i,fromAgent:!0,isFirstInGroup:t,typeOfMessage:l}),Object(o.e)(jt,{content:a}),r&&Object(o.e)(rt,{createdDatetime:i,id:n,typeOfMessage:ze.a.CONVERSATION_MESSAGE})))})),yt=Object(i.memo)((function(e){var n=e.id,t=e.showStatusIndicator,r=e.content,a=e.isFirstInGroup,i=e.createdDatetime,c=e.typeOfMessage,l=Object(B.a)(i).format("h:mm A");return Object(o.e)("div",{css:hn,tabIndex:-1},Object(o.e)("div",{css:{width:"100%",display:"flex",flexDirection:"row-reverse"}},Object(o.e)("span",{className:"sr-only"},"".concat(l,". You say:")),Object(o.e)(Jn,{content:r,createdDatetime:i,fromAgent:!1,isFirstInGroup:a,typeOfMessage:c})),t&&Object(o.e)(rt,{createdDatetime:i,id:n,typeOfMessage:c}))})),wt=Object(i.memo)((function(e){var n=e.id,t=e.showStatusIndicator,r=e.typeOfMessage,i=e.isFirstInDay,c=e.isFirstInGroup,l=e.timestamp,u=e.fromAgent,d=e.senderInfo,p=e.content,f=e.createdDatetime,b=Object(s.b)((function(e){return[e.application.settings.language,e.application.texts]})),m=Object(a.a)(b,2),g=m[0],h=m[1],v=new Date(l).getTime()>(new Date).getTime()-5e3;return Object(o.e)("div",{"aria-live":v?"assertive":"off"},i&&Object(o.e)("h3",{key:"first_in_day_".concat(n),css:mn},Object(B.a)(l).locale(Object(B.c)(g)).format(h.conversationTimestampHeaderFormat)),u?Object(o.e)(Et,{id:n,showStatusIndicator:t,isFirstInGroup:c,content:p,createdDatetime:f,senderInfo:d,typeOfMessage:r}):Object(o.e)(yt,{id:n,showStatusIndicator:t,isFirstInGroup:c,typeOfMessage:r,content:p,createdDatetime:f}))}));function kt(){var e=Object(R.a)(["\n    0% { transform: scale(1); }\n    50% { transform: scale(1.05); }\n"]);return kt=function(){return e},e}function Rt(){var e=Object(R.a)(["\n    50% { opacity: 1 }\n"]);return Rt=function(){return e},e}var St=Object(o.f)(Rt()),Ct=Object(o.f)(kt()),At=Object(o.d)({display:"flex",justifyContent:"center",alignItems:"center","> span:first-of-type":{animation:"1s ".concat(St," infinite .3333s")},"> span:nth-of-type(2)":{animation:"1s ".concat(St," infinite .6666s")},"> span:nth-of-type(3)":{animation:"1s ".concat(St," infinite .9999s")},boxSizing:"content-box"}),_t=Object(o.d)({float:"left",display:"inline-block",height:"6px",width:"6px",margin:"0 2px",borderRadius:"50%",backgroundColor:E.a.MediumDarkGrey,opacity:"0.4",animation:"2s ".concat(Ct," infinite ease-out")}),It=function(e){var n=e.className;return Object(o.e)("div",{className:n,css:At},Object(o.e)("span",{"data-testid":"typingIndicator-dot",css:_t}),Object(o.e)("span",{"data-testid":"typingIndicator-dot",css:_t}),Object(o.e)("span",{"data-testid":"typingIndicator-dot",css:_t}))},Nt=Object(i.memo)((function(){var e=Object(i.useState)(Cn),n=Object(a.a)(e,2),t=n[0],r=n[1];return Object(i.useEffect)((function(){r([Cn,An])}),[]),Object(o.e)("div",{css:vn(!1)},Object(o.e)(xn,null),Object(o.e)(Ze,null,Object(o.e)("div",{css:t,"aria-live":"polite","aria-label":"Agent is typing"},Object(o.e)(It,{css:_n}))))})),Tt=Object(i.memo)((function(){var e=Object(s.b)((function(e){return[Object(Ge.b)(e),e.conversation.agentTyping,e.application.status.isScrolledUp]})),n=Object(a.a)(e,3),t=n[0],r=n[1],c=n[2],l=Object(Pe.b)(),u=l.scrollToBottomSmooth,d=l.scrollHistory,p=Object(i.useRef)(0),f=Object(i.useRef)();Object(i.useLayoutEffect)((function(){if(t.length!==p.current){if(t.length>0){var e=t.length>1?t.length-1:0,n=t[e];f.current&&n.createdDatetime?n.createdDatetime!==f.current?(u&&!c&&u(),f.current=n.createdDatetime):d&&d():(u&&u(),f.current=n.createdDatetime)}p.current=t.length}}),[t,d,u,c]),Object(i.useEffect)((function(){u&&r&&!c&&u()}),[u,r,c]);var b=Object(i.useMemo)((function(){return t.filter((function(e,n){var r=e.timestamp;return Object(B.a)(r).dayOfYear()!==(n>0?Object(B.a)(t[n-1].timestamp).dayOfYear():-1)})).map((function(e){return e.id}))}),[t]),m=Object(i.useMemo)((function(){return t.filter((function(e,n){var r,a=e.fromAgent,o=e.senderInfo;if(0===n)return!0;var i=t[n-1],c=a!==i.fromAgent,l=a&&(null===o||void 0===o?void 0:o.name)!==(null===(r=i.senderInfo)||void 0===r?void 0:r.name);return c||l})).map((function(e){return e.id}))}),[t]),g=Object(i.useMemo)((function(){return t.map((function(e,n){var r=e.id,a=e.type,i=e.timestamp,c=e.createdDatetime,l=e.senderInfo,u=e.updatedDatetime,s=e.deletedDatetime,d=e.fromAgent,p=e.content;return Object(o.e)(wt,{key:r,id:r.toString(),showStatusIndicator:a===ze.a.CONVERSATION_MESSAGE&&n===t.length-1||a!==ze.a.CONVERSATION_MESSAGE,timestamp:i,isFirstInDay:b.includes(r),isFirstInGroup:m.includes(r),typeOfMessage:a,createdDatetime:c,senderInfo:l,updatedDatetime:u,deletedDatetime:s,fromAgent:d,content:p})}))}),[t,m,b]);return Object(o.e)(gn,null,g,r&&Object(o.e)(Nt,null))}));function Lt(){var e=Object(R.a)(["\n    margin: 0 auto;\n    width: 90%;\n    font-size: 12px;\n    padding: 0.6rem 0;\n    color: ",";\n    text-align: center;\n"]);return Lt=function(){return e},e}var Dt=A.a.div(Lt(),E.a.Grey),Mt=Object(i.memo)((function(){var e=Object(s.b)((function(e){var n=e.application,t=n.status,r=n.texts;return[t.historyStatus,r]})),n=Object(a.a)(e,2),t=n[0],r=n[1];return t===U.g.PENDING?Object(o.e)(Dt,{"aria-live":"polite",role:"status"},r.fetchingHistory):t===U.g.SUCCESS?Object(o.e)("span",{className:"sr-only","aria-live":"polite",role:"status"},"History has been fetched"):t===U.g.FAILED?Object(o.e)(Dt,{"aria-live":"assertive",role:"alert"},r.actionPostbackError):null}));var Pt=Object(i.memo)((function(){var e=Object(s.a)(),n=Object(i.useRef)(!1),t=Object(Pe.b)(),r=t.conversationRef,c=t.preHistoryScrollBottomDistance,l=t.scrollToBottomSmooth,u=Object(s.b)((function(e){return[e.application.status.isScrolledUp,e.application.status.isWindowOpened,e.application.status.historyComplete,e.application.status.wsRetryCount,e.conversation.unseenMessages]})),d=Object(a.a)(u,5),p=d[0],f=d[1],b=d[2],m=d[3],g=d[4];Object(i.useEffect)((function(){f&&!p&&g>0&&(e(Object(Le.m)(0)),l&&l())}),[l,e,p,f,g]);var h=Object(i.useCallback)(Te()((function(){!function(e,n,t,r){e&&r&&e.current&&Object(Me.a)(e)&&!t&&(r.current=e.current.scrollHeight,n(Object(w.g)(!0)))}(r,e,b,c),function(e,n,t){if(e){var r=Object(Me.b)(e);r!==t.current&&(t.current=r,n(Object(w.l)(t.current)))}}(r,e,n)}),100),[b,e]),v=Object(i.useCallback)((function(n){return function(t){t.preventDefault(),e(Object(De.g)(n))}}),[e]);if(m>Fe.b)throw new Error(U.f.WS_RETRY_COUNT_EXCEEDED);return Object(o.e)(fn,{id:"conversation",role:"region","aria-label":"Conversation messages","data-testid":"conversation-component",onScroll:h,ref:r},Object(o.e)(xe,null),Object(o.e)(bn,null,Object(o.e)(Mt,null),Object(o.e)(Tt,null),Object(o.e)(Ue,{onClick:v}),Object(o.e)(We.a,null)))})),Ft=t(214),Gt=t.n(Ft);function zt(){var e=Object(R.a)(["\n    height: ","px;\n    width: 36px;\n    position: relative;\n\n    color: ",";\n\n    &:focus {\n        box-shadow: none;\n        i {\n            transform: translate(-50%, -50%) scale(1.1);\n            transform-origin: center right;\n        }\n    }\n\n    i {\n        font-size: 18px;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%, -50%);\n    }\n"]);return zt=function(){return e},e}var Vt=Object(o.d)({width:"100%",display:"flex",overflowY:"auto",minHeight:"".concat(56,"px"),boxShadow:"-2px -4px 12px 1px rgba(109, 81, 81, 0.08)",background:"white"}),Bt=Object(o.d)({paddingLeft:"20px",minHeight:"".concat(56,"px"),display:"flex",position:"relative",width:"100%",form:{display:"inline-block",width:"86%",margin:0}}),Ht=Object(o.d)({padding:"5px 0"}),Ut=Object(o.d)({opacity:0,fontSize:"14px",marginTop:0,marginBottom:"-5px",paddingTop:"".concat(16,"px"),paddingBottom:"".concat(15,"px"),width:"96%",whiteSpace:"pre-wrap",wordWrap:"break-word",wordBreak:"break-word",overflow:"hidden"}),Wt=Object(o.d)({boxSizing:"border-box",position:"absolute",top:0,paddingTop:"".concat(16,"px"),paddingBottom:"".concat(15,"px"),border:0,width:"79%",height:"95%",fontSize:"14px",overflow:"hidden",resize:"none",color:E.a.DarkGrey,":focus":{border:0,boxShadow:"none",outline:"none"},"::placeholder":{color:E.a.MediumGrey}}),Yt=Object(A.a)(q.a)(zt(),56,(function(e){return e.disabled?e.theme.offlineColor:e.theme.conversationColor})),Zt=t(54),qt="".concat(me.b.chatApiUrl,"/attachments"),Kt=function(){var e=Object(et.a)(Qn.a.mark((function e(n){var t,r,a,o,i;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.file,r=n.conversationId,!(t.size>1024e4)){e.next=3;break}throw new Error("File should be smaller than 10 MB");case 3:return a=JSON.stringify({filename:t.name,size:t.size.toString(),mimetype:t.type,conversationId:r}),e.next=6,Object(Zt.a)(qt,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:a});case 6:return o=e.sent,e.next=9,o.json();case 9:if(i=e.sent,o.ok){e.next=12;break}throw new Error;case 12:if((null===i||void 0===i?void 0:i.url)&&(null===i||void 0===i?void 0:i.fields)){e.next=14;break}throw new Error;case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Xt=function(){var e=Object(et.a)(Qn.a.mark((function e(n){var t,r,a,o,i,c,l,u,s,d=arguments;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t=d.length>1&&void 0!==d[1]?d[1]:fetch,r=n.file,a=n.signedPostPolicy,o=n.errorMessage,i=a.url,c=a.fields,l=encodeURI(i+c.key),u=new FormData,c)u.append(s,c[s]);return u.append("Content-Type",r.type),u.append("file",r,r.name),e.prev=8,e.next=11,t(i,{method:"POST",body:u});case 11:if(e.sent.ok){e.next=14;break}throw new Error(o);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(8),new Error(o);case 19:return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(n){return e.apply(this,arguments)}}();function Jt(){var e=Object(R.a)(["\n    color: ",";\n    &:hover {\n        cursor: pointer;\n        color: ",";\n    }\n    &:active,\n    &:focus {\n        color: ",";\n    }\n"]);return Jt=function(){return e},e}var $t=Object(A.a)(Yt)(Jt(),E.a.MediumGrey,(function(e){return e.disabled?E.a.MediumGrey:e.theme.conversationColor}),(function(e){return e.theme.conversationColor})),Qt=Object(i.memo)((function(e){var n=e.getUploadUrl,t=void 0===n?Kt:n,r=e.uploadFile,l=void 0===r?Xt:r,u=e.focusTextInput,d=Object(s.a)(),p=Object(s.b)((function(e){return[e.application.texts.messageError,e.application.credentials.conversationId,e.application.texts.actionPostbackError]})),f=Object(a.a)(p,3),b=f[0],m=f[1],g=f[2],h=Object(i.useState)(!1),v=Object(a.a)(h,2),O=v[0],x=v[1],j=c.a.useRef(null),E=function(){var e=Object(et.a)(Qn.a.mark((function e(n){var r,o,i,c,s;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),n.target.files){e.next=3;break}return e.abrupt("return");case 3:return r=Object(a.a)(n.target.files,1),o=r[0],at.a.addBreadcrumb({message:"User tried to upload a file",data:{filename:o.name,size:o.size,mimetype:o.type}}),e.prev=5,e.next=8,t({file:o,conversationId:m});case 8:return i=e.sent,e.next=11,l({file:o,signedPostPolicy:i,errorMessage:b});case 11:c=e.sent,d(Object(De.b)([{url:c,contentType:o.type}])),d(Object(w.a)(U.c.ATTACHMENT_UPLOAD)),e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(5),s=e.t0.message||g,d(Object(w.n)({text:s,type:U.d.WARNING,category:U.c.ATTACHMENT_UPLOAD,isOpen:!0})),e.abrupt("return");case 21:return e.prev=21,j.current&&(j.current.value=""),x(!1),u(),e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[5,16,21,25]])})));return function(n){return e.apply(this,arguments)}}();return Object(o.e)($t,{type:"button",onClick:function(){var e;return null===(e=j.current)||void 0===e?void 0:e.click()},disabled:O,"aria-label":"Upload an image"},O?Object(o.e)(It,null):Object(o.e)(X,{code:M.CAMERA}),Object(o.e)("input",{"data-testid":"upload-image-input",css:{display:"none"},ref:j,type:"file",accept:"image/*",onChange:E}))})),er=Object(i.memo)((function(){var e=Object(i.useState)(""),n=Object(a.a)(e,2),t=n[0],r=n[1],c=Object(s.a)(),l=Object(i.useRef)(null),u=Object(s.b)((function(e){return[Object(Ge.a)(e),e.application.texts]})),d=Object(a.a)(u,2),p=d[0],f=d[1],b=Object(i.useCallback)((function(){l.current&&l.current.focus()}),[]),m=function(){at.a.addBreadcrumb({message:"User tried to send a message",data:{message:t}});var e=Gt()(t);c(Object(De.e)(t,e)),r(""),b()},g=Object(i.useCallback)((function(e){c(Object(Le.m)(0)),p&&p.createdDatetime&&c(Object(Le.g)(p.createdDatetime))}),[c,p]),h=!t,v=Object(o.e)(Yt,{"aria-label":"Send message",disabled:h,type:"submit",onClick:m},Object(o.e)(X,{code:M.PLANE}));return Object(o.e)("div",{"data-testid":"footer-component",css:Vt},Object(o.e)("div",{css:Bt},Object(o.e)("form",null,Object(o.e)("div",{css:Ht},Object(o.e)("pre",{css:Ut},t+"\n"),Object(o.e)("textarea",{id:"message-input",ref:l,"data-testid":"message-input","aria-label":"Gorgias live chat message input",css:Wt,placeholder:f.inputPlaceholder,value:t,onChange:function(e){return r(e.currentTarget.value)},onKeyPress:function(e){e.shiftKey||e.key!==U.b.Enter||(e.preventDefault(),t&&m())},onFocus:g,maxLength:5e3}))),h?Object(o.e)(Qt,{focusTextInput:b}):v))})),nr={form:Object(o.d)({label:"email-capture-required__form",alignItems:"center",paddingBottom:"5px",display:"flex",flexDirection:"column",flexGrow:1}),container:Object(o.d)({display:"flex",flexGrow:1,flexDirection:"column",width:"100%"}),emailWrapper:Object(o.d)({label:"email-capture-required__email-wrapper",width:"100%",padding:"20px 0 0 0",borderBottom:"1px solid ".concat(E.a.LightGrey),flexGrow:0,input:{fontSize:"14px",boxSizing:"border-box",background:"none",padding:"10px 15px",borderRadius:"5px",border:"none",outline:"none",boxShadow:"none",height:"100%",width:"100%",color:E.a.DarkGrey,"&:focus":{boxShadow:"none",border:"none",outline:"none"},"&::placeholder":{color:E.a.Grey}}}),messageWrapper:Object(o.d)({width:"100%",padding:"0",flexGrow:1,display:"flex",flexDirection:"column",textarea:{flex:1,boxSizing:"border-box",resize:"none",fontSize:"14px",background:"none",padding:"10px 15px 10px 15px",borderRadius:"5px",border:"none",outline:"none",boxShadow:"none",height:"100%",width:"100%",color:E.a.DarkGrey,"&:focus":{boxShadow:"none",border:"none",outline:"none"},"&::placeholder":{color:E.a.Grey}}}),buttonWrapper:function(e){return function(n){return Object(o.d)({boxSizing:"border-box",width:"100%",padding:"20px 20px 13px 20px",flexGrow:0,display:"flex",justifyContent:"center",button:Object(o.d)({border:"none",borderRadius:"3px",color:"white",background:e?n.offlineColor:n.mainColor,textAlign:"center",fontSize:"14px",fontWeight:500,width:"100%",height:"50px","&:hover":{cursor:e?"auto":"pointer"},"&:focus":{boxShadow:"0 0 0 3px ".concat(Object(E.h)(n.mainColor)),outline:"none"}})})}}},tr=Object(i.memo)((function(e){var n=e.afterSubmit,t=Object(s.a)(),r=Object(i.useRef)(null),c=Object(i.useRef)(null),l=Object(s.b)((function(e){var n,t;return[e.application.texts.emailCaptureRequiredEmailPlaceholder,e.application.texts.emailCaptureRequiredMessagePlaceholder,e.application.texts.send,(null===(n=e.application.settings)||void 0===n||null===(t=n.quickReplies)||void 0===t?void 0:t.replies)||[]]})),u=Object(a.a)(l,4),d=u[0],p=u[1],f=u[2],b=u[3],m=Object(i.useState)(""),g=Object(a.a)(m,2),h=g[0],v=g[1],O=Object(i.useState)(""),x=Object(a.a)(O,2),j=x[0],E=x[1],y=function(e){var a,o;e&&e.preventDefault(),j.trim()&&(null===(a=r.current)||void 0===a?void 0:a.reportValidity())&&(null===(o=c.current)||void 0===o?void 0:o.reportValidity())&&(t(Object(De.g)(j,{capturedMail:h})),v(""),E(""),n())},w=j.trim(),k=Boolean(!h.trim()||!w),R=b.length>0;return Object(o.e)("form",{"data-testid":"require-email-capture-component",css:nr.form,onSubmit:y},Object(o.e)("div",{css:nr.container,role:"presentation",onKeyDown:function(e){if(e.key===U.b.Enter&&(e.ctrlKey||e.metaKey))return y(),!1},"data-testid":"require-email-capture-component-container"},Object(o.e)("div",{css:nr.emailWrapper,className:"email-input-wrapper"},Object(o.e)("input",{type:"email",ref:r,placeholder:d,"aria-label":d,pattern:"^[\\w\\-\\+=']+[\\w\\.\\-\\+=']*@[\\w\\.\\-]+\\.\\w+$",onChange:function(e){v(e.target.value)},maxLength:320,required:!0})),Object(o.e)("div",{css:nr.messageWrapper},Object(o.e)("textarea",{placeholder:p,"aria-label":!w&&R?"You can either write a message or leave this input blank and submit the form by choosing one of the following option":"Write your message",ref:c,onChange:function(e){E(e.target.value)},required:!0})),!w&&R&&Object(o.e)(Ue,{onClick:function(e){return function(a){var o;a.preventDefault(),(null===(o=r.current)||void 0===o?void 0:o.reportValidity())&&(t(Object(De.g)(e,{capturedMail:h})),v(""),E(""),n())}},shouldDisplay:!0}),Object(o.e)("div",{css:nr.buttonWrapper(k)},Object(o.e)("button",{"aria-label":"Submit the form",type:"submit",disabled:k},f))),Object(o.e)(We.a,null))})),rr=c.a.memo((function(){var e=Object(s.b)((function(e){return[e.user.email,e.application.settings.preferences.emailCaptureEnforcement,e.application.status.isChatOnline]})),n=Object(a.a)(e,3),t=n[0],r=n[1],o=n[2],l=Object(i.useState)(Boolean(t)),u=Object(a.a)(l,2),d=u[0],p=u[1],f=Object(i.useCallback)((function(){p(!0)}),[]);return function(e,n,t,r){if(Boolean(e)||r)return!1;switch(n){case Y.e.ALWAYS_REQUIRED:return!0;case Y.e.REQUIRED_OUTSIDE_BUSINESS_HOURS:return!t;case Y.e.OPTIONAL:default:return!1}}(t,r,o,d)?c.a.createElement(c.a.Fragment,null,c.a.createElement(tr,{afterSubmit:f})):c.a.createElement(c.a.Fragment,null,c.a.createElement(Ie,{href:"#message-input"},"Go to message input"),c.a.createElement(Pt,null),c.a.createElement(er,null))})),ar=t(224),or=t.n(ar).a,ir=t(226),cr=t.n(ir);function lr(){var e=Object(R.a)(["\n    height: 40px;\n    border-radius: 3px;\n    border-color: var(--form-input-border-color, ",");\n\n    font-size: 14px;\n    color: var(--form-input-color, ",");\n\n    ::placeholder {\n        /* Chrome, Firefox, Opera, Safari 10.1+ */\n        color: var(--neutral2);\n        opacity: 1; /* Firefox */\n    }\n\n    :-ms-input-placeholder {\n        /* Internet Explorer 10-11 */\n        color: var(--neutral2);\n    }\n\n    ::-ms-input-placeholder {\n        /* Microsoft Edge */\n        color: var(--neutral2);\n    }\n"]);return lr=function(){return e},e}var ur=Object(ge.a)(cr.a)(lr(),_.neutral4,_.neutral10),sr=function(e){var n=e.children,t=Object(k.a)(e,["children"]);return c.a.createElement(ur,t,n)},dr=t(227),pr=t.n(dr).a,fr=t(228),br=t.n(fr);function mr(){var e=Object(R.a)(["\n    font-weight: 500;\n    font-size: 13px;\n    line-height: 16px;\n    color: var(--label-color, ",");\n    margin-bottom: 0.4rem;\n"]);return mr=function(){return e},e}var gr=Object(ge.a)(br.a)(mr(),_.neutral10),hr=t(229),vr=t.n(hr);function Or(){var e=Object(R.a)(["\n                  &::after {\n                      content: ",";\n                      display: inline-block;\n                      margin-left: ",";\n                      margin-right: 0;\n                  }\n              "]);return Or=function(){return e},e}function xr(){var e=Object(R.a)(["\n                  &::before {\n                      content: ",";\n                      display: inline-block;\n                      margin-right: ",";\n                      margin-left: 0;\n                  }\n              "]);return xr=function(){return e},e}function jr(){var e=Object(R.a)(["\n                padding: ",";\n            "]);return jr=function(){return e},e}function Er(){var e=Object(R.a)(["\n    &.primary {\n        --btn-background-color: var(--primary);\n        --btn-border-color: var(--supportingBlue6);\n        --btn-color: var(--white);\n        --btn-background-color-hover: var(--supportingBlue5);\n        --btn-border-color-hover: var(--primary);\n        --btn-color-hover: var(--white);\n        --btn-background-color-active: var(--supportingBlue6);\n        --btn-border-color-active: var(--supportingBlue7);\n        --btn-color-active: var(--white);\n        --btn-background-color-active-focus: var(--supportingBlue6);\n        --btn-border-color-active-focus: var(--supportingBlue7);\n        --btn-border-color-focus: var(--primary);\n        --btn-border-color-focus-ring-color: var(--focusRingColor);\n        --btn-background-color-disabled: var(--supportingBlue3);\n        --btn-color-disabled: var(--white);\n        --btn-border-color-disabled: var(--supportingBlue4);\n    }\n\n    &.text {\n        --btn-background-color: transparent;\n        --btn-border-color: transparent;\n        --btn-color: var(--neutral10);\n        --btn-background-color-hover: transparent;\n        --btn-border-color-hover: transparent;\n        --btn-color-hover: var(--neutral10);\n        --btn-background-color-active: transparent;\n        --btn-border-color-active: transparent;\n        --btn-color-active: var(--neutral10);\n        --btn-background-color-active-focus: transparent;\n        --btn-border-color-active-focus: transparent;\n        --btn-border-color-focus: transparent;\n        --btn-border-color-focus-ring-color: var(--focusRingColor);\n        --btn-background-color-disabled: transparent;\n        --btn-color-disabled: var(--neutral10);\n        --btn-border-color-disabled: transparent;\n\n        --btn-box-shadow-hover: none;\n        --box-shadow-active-focus: none;\n    }\n\n    position: relative;\n    background-color: var(--btn-background-color, ",");\n    border-color: var(--btn-border-color, ",");\n    color: var(--btn-color, ",");\n\n    box-sizing: border-box;\n    border-radius: 3px;\n    height: ",";\n    padding: ",";\n    ","\n\n    font-family: Inter;\n    font-style: normal;\n    font-weight: normal;\n    font-size: ",";\n    line-height: ",";\n    letter-spacing: normal;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden;\n\n    &:hover:not([disabled]) {\n        box-shadow: var(\n            --btn-box-shadow-hover,\n            0px 1px 2px rgba(0, 0, 0, 0.15)\n        );\n        background-color: var(\n            --btn-background-color-hover,\n            ","\n        );\n        border-color: var(--btn-border-color-hover, ",");\n        color: var(--btn-color-hover, ",");\n    }\n    &&:active:not([disabled]) {\n        background-color: var(\n            --btn-background-color-active,\n            ","\n        );\n        border-color: var(--btn-border-color-active, ",");\n        color: var(--btn-color-active, ",");\n    }\n    &&:active:focus:not([disabled]) {\n        box-shadow: var(\n            --box-shadow-active-focus,\n            inset 0px 1px 3px rgba(0, 0, 0, 0.15)\n        );\n        background-color: var(\n            --btn-background-color-active-focus,\n            ","\n        );\n        border-color: var(\n            --btn-border-color-active-focus,\n            ","\n        );\n    }\n    &:focus:not(:active):not([disabled]) {\n        border-color: var(--btn-border-color-focus, ",");\n        outline: none;\n        box-shadow: 0 0 0 0.2rem\n            var(--btn-border-color-focus-ring-color, ",");\n    }\n\n    &[disabled] {\n        background-color: var(\n            --btn-background-color-disabled,\n            ","\n        );\n        color: var(--btn-color-disabled, ",");\n        border-color: var(\n            --btn-border-color-disabled,\n            ","\n        );\n    }\n\n    &::before,\n    &::after {\n        display: none;\n        font-family: FontAwesome;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-font-smoothing: antialiased;\n        font-style: normal;\n        font-variant: normal;\n        text-rendering: auto;\n        line-height: 1;\n        font-weight: normal;\n        font-size: ",";\n    }\n\n    ","\n\n    ","\n"]);return Er=function(){return e},e}var yr=Object(ge.a)(vr.a,{shouldForwardProp:function(e){return!["size","faIconBefore","faIconAfter"].includes(e)}})(Er(),_.neutral1,_.neutral3,_.neutral10,(function(e){return"small"===e.size?"26px":"32px"}),(function(e){return"small"===e.size?"0 10px":"0 12px"}),(function(e){var n=e.faIconBefore,t=e.faIconAfter,r=e.children,a=e.size;return r||!n&&!t?"":Object(o.d)(jr(),"small"===a?"0 6px":"0 8px")}),(function(e){return"small"===e.size?"12px":"14px"}),(function(e){return"small"===e.size?"20px":"32px"}),_.neutral1,_.neutral4,_.neutral10,_.neutral1,_.neutral4,_.neutral10,_.neutral1,_.neutral5,_.neutral8,_.neutral2,_.white,_.neutral5,_.neutral3,(function(e){return"small"===e.size?"0.8rem":"1rem"}),(function(e){var n=e.faIconBefore,t=e.children;return n?Object(o.d)(xr(),n,t?"0.4rem":"0rem"):""}),(function(e){var n=e.faIconAfter,t=e.children;return n?Object(o.d)(Or(),n,t?"0.4rem":"0rem"):""})),wr=function(e){var n=e.children,t=e.size,r=void 0===t?"normal":t,a=e.className,o=Object(k.a)(e,["children","size","className"]);return c.a.createElement(yr,Object.assign({className:"gg-button ".concat(r," ").concat(a||""),outline:!0,size:r},o),n)},kr=wr,Rr=t(81);function Sr(){var e=Object(R.a)(["\n    &&& {\n        ","\n    }\n"]);return Sr=function(){return e},e}var Cr=Object(A.a)(wr)(Sr(),(function(e){var n=e.theme.mainColor,t=Object(Rr.a)(n,.95),r=Object(Rr.a)(n,.9),a=Object(Rr.a)(n,.85),o=Object(Rr.a)(n,.8),i=Object(Rr.a)(n,.75),c=Object(Rr.a)(n,.4);return"\n            --btn-background-color: ".concat(n,";\n            --btn-border-color: ").concat(r,";\n            --btn-color: var(--white);\n            --btn-background-color-hover: ").concat(a,";\n            --btn-border-color-hover: ").concat(n,";\n            --btn-color-hover: var(--white);\n            --btn-background-color-active: ").concat(r,";\n            --btn-border-color-active: ").concat(t,";\n            --btn-color-active: var(--white);\n            --btn-background-color-active-focus: ").concat(r,";\n            --btn-border-color-active-focus: ").concat(t,";\n            --btn-border-color-focus: ").concat(n,";\n            --btn-border-color-focus-ring-color: ").concat(c,";\n            --btn-background-color-disabled: ").concat(i,";\n            --btn-color-disabled: var(--white);\n            --btn-border-color-disabled: ").concat(o,";\n            ")}));function Ar(){var e=Object(R.a)(["\n    padding: ",";\n    border-radius: ",";\n    box-shadow: var(\n        --elevationShadow,\n        0px 1px 2px rgba(0, 0, 0, 0.1),\n        0px 1px 3px rgba(0, 0, 0, 0.16)\n    );\n    background: #ffffff;\n"]);return Ar=function(){return e},e}var _r=ge.a.div(Ar(),(function(e){var n=e.padding;return n||"16px"}),(function(e){var n=e.radius;return n||"3px"}));_r.defaultProps={className:"elevation"};var Ir=_r,Nr=t(104),Tr=t(112),Lr=t(19),Dr=t(48);function Mr(){var e=Object(s.b)((function(e){return function(e){return e.selfServicePortal.sspTexts}(e)}));return{t:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.entries(t).reduce((function(e,n){var t=Object(a.a)(n,2),r=t[0],o=t[1];return e.replace("{".concat(r,"}"),o)}),e[n])},texts:e}}function Pr(){var e=Object(R.a)(["\n    margin: 0;\n    color: var(--headingColor, '#000');\n    font-size: var(--text16, 1rem);\n    padding-bottom: 10px;\n"]);return Pr=function(){return e},e}var Fr,Gr=ge.a.h3(Pr()),zr=t(108),Vr=t(232),Br=t.n(Vr),Hr=t(230),Ur=t.n(Hr);function Wr(){var e=Object(R.a)(["\n    &::before {\n        content: var(--alert-icon);\n        font-family: FontAwesome;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-font-smoothing: antialiased;\n        font-style: normal;\n        font-variant: normal;\n        text-rendering: auto;\n        font-weight: 400;\n        font-size: 15px;\n        display: inline-block;\n        margin-right: 13px;\n        margin-left: 2px;\n    }\n\n    .info > span&::before {\n        font-size: 7px;\n        border: 2px solid var(--alert-text-color);\n        border-radius: 50%;\n        display: inline-flex;\n        width: 15px;\n        height: 15px;\n        text-align: center;\n        vertical-align: middle;\n        justify-content: center;\n        align-items: center;\n    }\n"]);return Wr=function(){return e},e}function Yr(){var e=Object(R.a)(["\n                  padding-left: 18px;\n                  &::before {\n                      content: '';\n                      position: absolute;\n                      left: 0;\n                      top: 0;\n                      width: 50px;\n                      height: 100%;\n                      border-radius: 3px;\n                      box-shadow: inset 5px 0 0 0 var(--alert-accent-color);\n                  }\n              "]);return Yr=function(){return e},e}function Zr(){var e=Object(R.a)(["\n    &.error {\n        --alert-background-color: var(--supportingRed0);\n        --alert-border-color: rgba(242, 79, 102, 0.15);\n        --alert-text-color: var(--supportingRed6);\n        --alert-icon: ",";\n        --alert-accent-color: var(--secondaryRed);\n    }\n\n    &.warning {\n        --alert-background-color: var(--supportingYellow0);\n        --alert-border-color: rgba(253, 171, 64, 0.15);\n        --alert-text-color: var(--supportingYellow7);\n        --alert-icon: ",";\n        --alert-accent-color: var(--supportingYellow6);\n    }\n\n    &.confirmation {\n        --alert-background-color: var(--supportingGreen0);\n        --alert-border-color: rgba(36, 214, 157, 0.15);\n        --alert-text-color: var(--supportingGreen6);\n        --alert-icon: ",";\n        --alert-accent-color: var(--secondaryGreen);\n    }\n\n    &.info {\n        --alert-background-color: var(--supportingBlue0);\n        --alert-border-color: rgba(74, 141, 249, 0.15);\n        --alert-text-color: var(--supportingBlue6);\n        --alert-icon: ",";\n        --alert-accent-color: var(--primary);\n    }\n\n    background-color: var(--alert-background-color, var(--supportingBlue0));\n    color: var(--alert-text-color, var(--supportingBlue6));\n\n    border: 0px;\n    box-shadow: inset 0 0 0 1px var(--alert-border-color);\n    box-sizing: border-box;\n\n    font-family: Inter;\n    font-style: normal;\n    font-weight: normal;\n    font-size: 14px;\n    line-height: 19px;\n\n    ","\n"]);return Zr=function(){return e},e}!function(e){e.ERROR="error",e.WARNING="warning",e.CONFIRMATION="confirmation",e.INFO="info"}(Fr||(Fr={}));var qr,Kr=Object(ge.a)(Ur.a,{shouldForwardProp:function(e){return"showAccent"!==e}})(Zr(),M.EXCLAMATION_CIRCLE,M.WARNING,M.CHECK_CIRCLE,M.INFO,(function(e){return e.showAccent?Object(o.d)(Yr()):""})),Xr=ge.a.span(Wr()),Jr=function(e){var n=e.children,t=e.className,r=e.type,a=e.showIcon,o=void 0!==a&&a,i=e.showAccent,l=void 0!==i&&i,u=Object(k.a)(e,["children","className","type","showIcon","showAccent"]);return c.a.createElement(Kr,Object.assign({className:"gg-alert ".concat(t||""," ").concat(r||""),showAccent:l},u),o?c.a.createElement(Xr,null):null,n)};function $r(){var e=Object(R.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-content: center;\n    padding: 5px;\n    padding-top: var(--pageBasePaddingTop);\n    min-height: 100%;\n\n    max-width: 500px;\n    margin: 0 auto;\n\n    .widget-sm & {\n        padding-top: 5px;\n    }\n    .widget-md & {\n        padding-top: 10px;\n    }\n\n    .elevation {\n        width: 100%;\n        margin-left: auto;\n        margin-right: auto;\n    }\n\n    .lost-order-details {\n        color: var(--textColor);\n        font-size: var(--text13);\n        font-weight: 600;\n        text-decoration: underline;\n        margin-top: 1rem;\n        &:focus {\n            outline-color: var(--focus-color);\n        }\n    }\n\n    .login-loader {\n        margin: 0 auto;\n        color: "," !important;\n    }\n"]);return $r=function(){return e},e}!function(e){e[e.NONE=0]="NONE",e[e.ORDER_NOT_FOUND=1]="ORDER_NOT_FOUND",e[e.PROVIDE_ORDER_DETAILS=2]="PROVIDE_ORDER_DETAILS",e[e.ERROR_FETCHING_ORDERS=3]="ERROR_FETCHING_ORDERS"}(qr||(qr={}));var Qr=A.a.div($r(),(function(e){return e.theme.mainColor})),ea=function(){var e=c.a.useState(!1),n=Object(a.a)(e,2),t=n[0],r=n[1],o=c.a.useState(!1),l=Object(a.a)(o,2),p=l[0],f=l[1],b=c.a.useState(""),m=Object(a.a)(b,2),g=m[0],h=m[1],v=c.a.useState(""),O=Object(a.a)(v,2),x=O[0],j=O[1],E=c.a.useState({isOpen:!1,message:qr.NONE}),y=Object(a.a)(E,2),w=y[0],k=y[1],R=Object(s.a)(),S=Object(d.h)(),C=Mr().t,A=Object(i.useCallback)((function(e){switch(e){case qr.ORDER_NOT_FOUND:return c.a.createElement(c.a.Fragment,null,C("orderNotFound"),c.a.createElement(Nr.a,{to:u.a.CHAT},C("talkToLiveAgent")),".");case qr.PROVIDE_ORDER_DETAILS:return c.a.createElement(c.a.Fragment,null,C("provideEmailAndOrderNumber"));case qr.ERROR_FETCHING_ORDERS:return c.a.createElement(c.a.Fragment,null,C("errorFetchingOrders"));default:return null}}),[C]),_=c.a.useCallback(function(){var e=Object(et.a)(Qn.a.mark((function e(n){var t,a,o,i;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.email,a=n.orderNumber,o=n.customerId,e.prev=1,e.next=4,Object(Tr.b)({email:t.toLowerCase(),orderNumber:a,customerId:o,shopName:Object(zr.a)(me.b.shopifyPermanentDomain())});case 4:if(i=e.sent,0!==Object.keys(i).length){e.next=11;break}return R(Object(Lr.b)()),k({isOpen:!0,message:qr.ORDER_NOT_FOUND}),f(!1),r(!0),e.abrupt("return");case 11:k({isOpen:!1,message:qr.NONE}),R(Object(Lr.f)(i,{email:t,orderNumber:Object.keys(i)[0]})),f(!1),R(Object(Dr.a)(t)),at.a.addBreadcrumb({message:"user successfully fetched orders - form login"}),S.replace(u.a.SELF_SERVICE_PORTAL__ORDERS,{orderNumber:a||""}),e.next=26;break;case 19:e.prev=19,e.t0=e.catch(1),at.a.error(e.t0),R(Object(Lr.b)()),403===e.t0.code?k({isOpen:!0,message:qr.ORDER_NOT_FOUND}):k({isOpen:!0,message:qr.ERROR_FETCHING_ORDERS}),f(!1),r(!0);case 26:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(n){return e.apply(this,arguments)}}(),[R,S]),I=c.a.useCallback(function(){var e=Object(et.a)(Qn.a.mark((function e(n){var t,r;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),k({isOpen:!1,message:qr.NONE}),f(!0),t=g.trim(),r=x.trim(),t&&r){e.next=9;break}return k({isOpen:!0,message:qr.PROVIDE_ORDER_DETAILS}),f(!1),e.abrupt("return");case 9:return e.next=11,_({email:t,orderNumber:r});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[g,x,_]);return Object(i.useEffect)((function(){k({isOpen:!1,message:qr.NONE});var e=me.b.shopifyCustomerEmail();if(e){h(e),f(!0);var n=me.b.shopifyCustomerId();if(!n)return f(!1),void r(!0);_({email:e,customerId:n})}else r(!0)}),[R,_,S]),t?c.a.createElement(Qr,{className:"ssp-page"},c.a.createElement(Gr,null,C("findOrder")),c.a.createElement(Ir,null,c.a.createElement(Jr,{type:Fr.ERROR,isOpen:w.isOpen},A(w.message)),c.a.createElement(or,{onSubmit:I},c.a.createElement(pr,null,c.a.createElement(gr,{for:"customerEmail"},C("yourEmail")),c.a.createElement(sr,{id:"customerEmail",name:"customerEmail",placeholder:"email@domain.com",type:"email",pattern:"^[\\w\\-\\+=']+[\\w\\.\\-\\+=']*@[\\w\\.\\-]+\\.\\w+$",maxLength:320,onChange:function(e){return h(e.target.value)},value:g,required:!0,disabled:p})),c.a.createElement(pr,null,c.a.createElement(gr,{for:"orderNumber"},C("orderNumber")),c.a.createElement(sr,{id:"orderNumber",name:"orderNumber",placeholder:"L1234",type:"text",onChange:function(e){return j(e.target.value)},value:x,disabled:p,required:!0})),c.a.createElement(Cr,{disabled:p||!g||!x,type:"submit",className:"primary"},C("seeOrders")))),c.a.createElement(Nr.a,{className:"lost-order-details",to:u.a.CHAT},C("lostOrderDetails"))):c.a.createElement(Qr,{className:"ssp-page"},c.a.createElement(Br.a,{className:"login-loader",color:"primary"}))},na=t(233),ta=t.n(na);function ra(){var e=Object(R.a)(["\n    &.list-group-flush > .list-group-item:last-of-type {\n        border-bottom-width: 1px;\n    }\n    &.list-group-flush > .list-group-item:first-of-type {\n        border-top-width: 1px;\n    }\n"]);return ra=function(){return e},e}var aa=Object(ge.a)(ta.a)(ra()),oa=t(234),ia=t.n(oa);function ca(){var e=Object(R.a)(["\n                  &::after {\n                      position: absolute;\n                      right: 20px;\n                      top: 50%;\n                      transform: translateY(-50%);\n                      display: inline-block;\n                      content: ",";\n                      color: var(\n                          --list-group-item-icon-color,\n                          ","\n                      );\n                  }\n              "]);return ca=function(){return e},e}function la(){var e=Object(R.a)(["\n    position: relative;\n    min-height: 50px;\n    padding: 14px 48px 14px 16px;\n\n    background-color: var(--list-group-item-background-color, #fff);\n    font-style: normal;\n    font-weight: normal;\n    font-size: 14px;\n    line-height: 17px;\n    color: var(--list-group-item-color, ",");\n    border-color: var(\n        --list-group-item-border-color,\n        ","\n    );\n\n    &:hover,\n    &:focus {\n        background-color: ",";\n        color: var(--list-group-item-color, ",");\n        outline: none;\n    }\n\n    &::before,\n    &::after {\n        display: none;\n        font-family: FontAwesome;\n        -moz-osx-font-smoothing: grayscale;\n        -webkit-font-smoothing: antialiased;\n        font-style: normal;\n        font-variant: normal;\n        text-rendering: auto;\n        line-height: 1;\n        font-weight: normal;\n        font-size: 1rem;\n    }\n\n    ","\n"]);return la=function(){return e},e}var ua=Object(ge.a)(ia.a,{shouldForwardProp:function(e){return!["arrowRight"].includes(e)}})(la(),_.neutral10,_.neutral1,_.hoverColor,_.neutral10,(function(e){return e.arrowRight?Object(o.d)(ca(),M.CHEVRON_RIGHT,_.neutral4):""}));function sa(){var e=Object(R.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    width: 100%;\n    max-width: 500px;\n    margin-left: auto;\n    margin-right: auto;\n\n    h2 {\n        margin: 0;\n        margin-right: 0.4rem;\n        font-size: var(--text15);\n        color: var(--headingColor);\n    }\n\n    button.small {\n        display: none;\n    }\n\n    .widget-md &,\n    .widget-sm & {\n        button.small {\n            display: inline-block;\n        }\n        button.normal {\n            display: none;\n        }\n        h2 {\n            font-size: var(--text14);\n        }\n    }\n"]);return sa=function(){return e},e}var da=ge.a.div(sa()),pa=function(e){var n=e.onStartClick,t=void 0===n?function(){}:n,r=Mr().t;return c.a.createElement(da,{className:"start-chat"},c.a.createElement("h2",null,r("needHelp")),c.a.createElement(Cr,{faIconBefore:M.PLANE,className:"primary normal",onClick:t,size:"normal"},r("startConversation")),c.a.createElement(Cr,{faIconBefore:M.PLANE,className:"primary small",onClick:t,size:"small"},r("startConversation")))};function fa(){var e=Object(R.a)(["\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-end;\n\n    .elevation > .list-group {\n        border-radius: 6px;\n    }\n\n    .elevation:last-of-type {\n        display: flex;\n        min-height: 64px;\n        margin-top: 12px;\n    }\n\n    .widget-lg & {\n        .elevation:last-of-type {\n            min-height: 72px;\n        }\n    }\n\n    .widget-sm & {\n        .elevation:first-of-type {\n            position: relative;\n            top: ","px;\n        }\n        .elevation:last-of-type {\n            padding: 16px;\n            position: relative;\n            top: ","px;\n            width: calc(100% + ","px);\n            left: -","px;\n            --elevationShadow: 0px -2px 8px rgba(22, 22, 22, 0.08);\n        }\n    }\n    .widget-xs & {\n        .start-chat {\n            width: 100%;\n            display: flex;\n        }\n    }\n"]);return fa=function(){return e},e}var ba=ge.a.div(fa(),10,10,20,10),ma=function(){var e=Object(d.h)(),n=Mr().t,t=Object(s.a)();return c.a.createElement(ba,{className:"ssp-page","data-testid":"self-service-portal__homepage"},c.a.createElement(_r,{padding:"0",radius:"6px"},c.a.createElement(aa,{flush:!0},[{sspText:"trackOrder",choice:"track"},{sspText:"reportAnIssueWithOrder",choice:"report_issue"}].map((function(r){var a=r.sspText,o=r.choice;return c.a.createElement(ua,{key:a,onClick:function(){return function(n){t(Object(Lr.e)(n)),e.push(u.a.SELF_SERVICE_PORTAL__ORDERS)}(o)},action:!0,arrowRight:!0,tag:"button"},n(a))})))),c.a.createElement(_r,{radius:"6px"},c.a.createElement(pa,{onStartClick:function(){e.push(u.a.CHAT)}})))},ga=t(235),ha=t.n(ga);function va(){var e=Object(R.a)(["\n    border-width: 0;\n    border-radius: 6px;\n    box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.1), 0px 1px 3px rgba(0, 0, 0, 0.16);\n"]);return va=function(){return e},e}var Oa=Object(ge.a)(ha.a)(va()),xa=t(236),ja=t.n(xa);function Ea(){var e=Object(R.a)(["\n    min-height: 29px;\n    padding: 10px 10px 9px 10px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    border-radius: 6px 6px 0 0;\n    border-width: 0;\n    border-bottom-width: 1px;\n    background-color: #fff;\n    border-bottom-color: var(\n        --card-header-border-bottom-color,\n        ","\n    );\n\n    font-size: 14px;\n\n    &.card-header:first-of-type {\n        border-radius: 6px 6px 0 0;\n    }\n\n    h2 {\n        margin: 0;\n        color: var(--card-header-h3-color, ",");\n        font-size: 14px;\n        display: inline-block;\n    }\n\n    .header-button-group {\n        display: inline-block;\n    }\n"]);return Ea=function(){return e},e}var ya=Object(ge.a)(ja.a)(Ea(),_.neutral2,_.neutral10),wa=t(237),ka=t.n(wa);function Ra(){var e=Object(R.a)(["\n    padding: 10px;\n\n    p {\n        margin: 0;\n    }\n\n    h1,\n    h2,\n    h3,\n    h4,\n    h5,\n    h6 {\n        margin-top: 0;\n        margin-bottom: 0.1rem;\n        font-weight: 500;\n        color: var(--card-title-color, ",");\n        line-height: 1rem;\n        font-style: normal;\n    }\n\n    h1.card-title {\n        font-size: 1.25rem;\n        line-height: 1.25rem;\n    }\n    h2.card-title {\n        font-size: 1rem;\n    }\n    h3.card-title {\n        font-size: 0.8125rem;\n    }\n    h4.card-title {\n        font-size: 0.75rem;\n    }\n    h5.card-title {\n        font-size: 0.625rem;\n    }\n    h6.card-title {\n        font-size: 0.5rem;\n    }\n\n    p.card-text {\n        font-size: 0.8125rem;\n        line-height: 1rem;\n        color: var(--card-text-color, ",");\n    }\n"]);return Ra=function(){return e},e}var Sa=Object(ge.a)(ka.a)(Ra(),_.neutral9,_.neutral8),Ca=t(238),Aa=t.n(Ca);function _a(){var e=Object(R.a)([""]);return _a=function(){return e},e}var Ia=Object(ge.a)(Aa.a)(_a()),Na=t(239),Ta=t.n(Na);function La(){var e=Object(R.a)([""]);return La=function(){return e},e}var Da=Object(ge.a)(Ta.a)(La());Da.defaultProps={className:"card-text"};var Ma=Da,Pa=t(204),Fa=t.n(Pa),Ga=t(242),za=t.n(Ga),Va=t(66);function Ba(){var e=Object(R.a)(["\n    display: grid;\n    grid-gap: 10px;\n    grid-template-columns: 50px 1fr;\n    align-items: center;\n    min-height: 0;\n    min-width: 0;\n\n    .img-wrapper {\n        position: relative;\n        box-sizing: border-box;\n        width: 50px;\n        height: 50px;\n        border: 1px solid var(--line-item-img-border-color, var(--neutral2));\n        border-radius: 2px;\n        overflow: hidden;\n\n        i.img-placeholder::before {\n            position: absolute;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n\n            font-family: 'FontAwesome';\n            content: ",";\n            color: var(--neutral5);\n            display: block;\n        }\n\n        img {\n            width: 50px;\n            height: 50px;\n        }\n    }\n\n    .line-item__details {\n        // so that it does not overflow the li when its text content grows\n        min-width: 0;\n        overflow: hidden;\n    }\n\n    .card-title {\n        text-overflow: ellipsis;\n        overflow: hidden;\n        white-space: nowrap;\n    }\n\n    .card-text span {\n        color: var(--neutral6);\n    }\n"]);return Ba=function(){return e},e}var Ha=ge.a.li(Ba(),M.FA_PHOTO),Ua=c.a.memo((function(e){var n=e.lineItem,t=n.product_image_url,r=n.name,a=n.price_set.presentment_money,o=a.amount,i=a.currency_code,l=n.quantity,u=e.className,s=Object(k.a)(e,["lineItem","className"]),d=Fa()(i)||i;return c.a.createElement(Ha,Object.assign({className:"line-item ".concat(u||"")},s),c.a.createElement("div",{className:"img-wrapper"},t?c.a.createElement("img",{alt:r,src:t}):c.a.createElement("i",{className:"img-placeholder"})),c.a.createElement("div",{className:"line-item__details"},c.a.createElement(Ia,{tag:"h3"},r),c.a.createElement(Ma,null,"".concat(o," ").concat(d),c.a.createElement("span",null," x ".concat(l)))))}));function Wa(){var e=Object(R.a)(["\n    font-size: 12px;\n    line-height: 13.8px;\n    font-weight: 400;\n    color: var(--color, ",");\n"]);return Wa=function(){return e},e}var Ya=A.a.p(Wa(),_.neutral6),Za=function(e){var n=e.className,t=e.children,r=Object(k.a)(e,["className","children"]);return c.a.createElement(Ya,Object.assign({className:"secondary-text ".concat(n||"")},r),t)},qa=t(241),Ka=t.n(qa);function Xa(){var e=Object(R.a)(["\n    height: 18px;\n    padding: 0 8px;\n    border-radius: 9px;\n\n    line-height: 18px;\n    font-style: normal;\n    font-weight: 500;\n    font-size: 12px;\n    color: #fff;\n\n    background-color: ",";\n"]);return Xa=function(){return e},e}var Ja,$a=Object(ge.a)(Ka.a)(Xa(),(function(e){var n=e.color;return n?_[n]:_.secondaryGreen})),Qa=function(e){var n=e.children,t=e.color,r=void 0===t?"secondaryGreen":t,a=e.className,o=Object(k.a)(e,["children","color","className"]);return c.a.createElement($a,Object.assign({className:"gg-badge ".concat(a||""),color:r},o),n)};!function(e){e.PENDING="pending",e.AUTHORIZED="authorized",e.PARTIALLY_PAID="partially_paid",e.PAID="paid",e.PARTIALLY_REFUNDED="partially_refunded",e.REFUNDED="refunded",e.VOIDED="voided"}(Ja||(Ja={}));var eo=t(70),no={delivered:"dark",in_transit:"secondaryGreen",confirmed:"primary",label_printed:"primary",label_purchased:"primary",attempted_delivery:"secondaryRed",ready_for_pickup:"secondaryGreen",out_for_delivery:"secondaryGreen",failure:"secondaryRed",processing:"grey",refunded:"secondaryNavy",partially_refunded:"secondaryNavy",canceled:"secondaryRed"},to=function(e){var n=e.shipmentStatus,t=e.lineItems,r=e.financialStatus,a=Mr(),o=a.texts,l=a.t,u=Object(i.useMemo)((function(){return n?Object.keys(o).find((function(e){var t=n.toString().replace(/_/g,"");return new RegExp(t,"i").test(e)})):""}),[n,o]);if([Ja.REFUNDED,Ja.PARTIALLY_REFUNDED,Ja.VOIDED].includes(r)){if(!r)throw new Error("an error occurred while creating the badge");var s=r.toString().replace(/_/g," ");return c.a.createElement(Qa,{color:no[r.toString()]},Object(eo.a)(s))}if(0===t.length||!n)return c.a.createElement(Qa,{color:"grey"},l("unavailable"));if(u)return c.a.createElement(Qa,{color:no[n.toString()]},l(u));var d=n.toString(),p=Object(eo.a)(d.replace(/_/g," "));return c.a.createElement(Qa,{color:no[d]},p)};function ro(){var e=Object(R.a)(["\n    position: relative;\n    display: flex;\n    flex-direction: column;\n\n    h3 {\n        font-size: 14px;\n        font-weight: 600;\n    }\n\n    .action-buttons {\n        text-align: left;\n        button {\n            margin-top: 1px;\n        }\n    }\n\n    .status {\n        display: flex;\n        align-items: flex-start;\n        justify-content: space-between;\n        padding: 0px 0 10px 0;\n\n        .fulfillment-label {\n            font-weight: 600;\n            font-size: 14px;\n            line-height: 20px;\n            color: var(--neutral10);\n            word-break: break-word;\n        }\n\n        .fulfillment-statuses {\n            display: flex;\n            flex-direction: row;\n            justify-content: flex-end;\n            align-items: center;\n        }\n\n        .secondary-text {\n            margin-right: 0.5rem;\n        }\n    }\n\n    .action-buttons button + button {\n        margin-left: 10px;\n    }\n\n    .normal-format {\n        display: inline-block;\n    }\n\n    /**\n        Specific rules for smaller widgets\n     */\n    .widget-sm &,\n    .widget-md & {\n        .action-buttons > button {\n            padding-left: 5px;\n            padding-right: 5px;\n        }\n        .action-buttons > button:first-of-type {\n            margin-left: 0;\n        }\n    }\n    .widget-sm & {\n        .action-buttons > button {\n            margin-left: 4px;\n        }\n    }\n    .widget-md & {\n        .action-buttons > button {\n            margin-left: 6px;\n        }\n    }\n"]);return ro=function(){return e},e}var ao=ge.a.header(ro()),oo=function(e){var n=e.date,t=e.format,r=void 0===t?"MM/DD/YYYY":t;return c.a.createElement(Za,{className:"normal-format"},Object(B.a)(n).format(r))},io=function(e){var n=e.name,t=void 0===n?"":n,r=e.shipmentStatus,a=e.updatedDate,o=e.buttons,i=void 0===o?[]:o,l=e.lineItems,u=e.financialStatus,s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=Mr(),t=n.t,r=t("fulfillmentDetails"),a=e.split(".");return a.length>1&&a[a.length-1]&&(r="".concat(t("fulfillment")," #").concat(a[a.length-1])),r}(t);return c.a.createElement(ao,{className:"fulfillment-header"},c.a.createElement("div",{className:"status"},c.a.createElement("span",{className:"fulfillment-label"},s),c.a.createElement("div",{className:"fulfillment-statuses"},c.a.createElement(oo,{date:a}),c.a.createElement(to,{shipmentStatus:r,lineItems:l,financialStatus:u}))),c.a.createElement("div",{className:"action-buttons"},i.map((function(e){var n=e.text,t=e.onClick;return e.isEnabled&&c.a.createElement(wr,{key:n,size:"small",onClick:t},n)}))))};function co(){var e=Object(R.a)(["\n    margin-top: 5px;\n    margin-bottom: 5px;\n    padding-left: 15px;\n    padding-right: 5px;\n\n    && {\n        --btn-color: var(--primary);\n        --btn-color-active: var(--primary);\n        --btn-color-hover: var(--primary);\n        --btn-color-disabled: var(--primary);\n    }\n\n    &:hover:not([disabled]),\n    &:focus:not(:active):not([disabled]) {\n        text-decoration: underline;\n    }\n\n    &::before,\n    &::after {\n        position: absolute;\n        left: 4px;\n        font-size: 0.5rem;\n        margin: 0;\n    }\n    &::before {\n        top: 5px;\n    }\n    &::after {\n        top: 11px;\n    }\n\n    &:focus:not(:active):not([disabled]) {\n        box-shadow: none;\n    }\n"]);return co=function(){return e},e}function lo(){var e=Object(R.a)(["\n    .fulfillment-header {\n        margin-bottom: 12px;\n    }\n\n    .line-items-group {\n        margin-bottom: 0;\n    }\n\n    &.single {\n        .line-item {\n            margin-bottom: 12px;\n        }\n    }\n\n    .collapse,\n    .collapsing {\n        .line-item {\n            margin-top: 10px;\n        }\n    }\n"]);return lo=function(){return e},e}var uo=ge.a.div(lo()),so=Object(ge.a)(kr)(co()),po=function(e){var n=e.fulfillment,t=e.financialStatus,r=e.onReportIssue,o=e.onTrack,l=n.shipment_status,u=n.updated_at,s=n.line_items,d=s.length>1,p=c.a.useState(!1),f=Object(a.a)(p,2),b=f[0],m=f[1],g=Object(Va.c)(),h=Mr().t,v=Object(i.useMemo)((function(){return[{text:h("track"),onClick:function(){return o(n)},isEnabled:n.tracking_urls.length>0},{text:h("reportIssue"),onClick:function(){return r(n)},isEnabled:!0}]}),[h,n,o,r]),O=h("showLessItems"),x=s.length-1===1;return b||(O=x?h("see1MoreItem"):h("seeMoreItems",{moreItemsCount:"".concat(s.length-1)})),c.a.createElement(uo,{className:"fulfillment ".concat(d?"multiple":"single"),isOpen:b},c.a.createElement(io,{name:n.name,buttons:v,shipmentStatus:l,lineItems:s,updatedDate:u,financialStatus:t}),c.a.createElement("ul",{className:"line-items-group"},s.length>0?c.a.createElement(Ua,{key:s[0].id,lineItem:s[0]}):null,d?c.a.createElement(za.a,{isOpen:b},s.map((function(e,n){return 0!==n&&c.a.createElement(Ua,{key:e.id,lineItem:e})}))):null),d?c.a.createElement(so,{className:"text",size:"small",onClick:function(){g(Object(Lr.g)()),m((function(e){return!e}))},faIconBefore:b?M.FA_ANGLE_DOWN:M.FA_ANGLE_UP,faIconAfter:b?M.FA_ANGLE_UP:M.FA_ANGLE_DOWN},O):null)};function fo(){var e=Object(R.a)(["\n    margin-bottom: 10px;\n    animation: "," 0.2s ease-out;\n\n    .card-header {\n        border-bottom-style: dashed;\n\n        h2 {\n            font-size: 16px;\n            font-weight: 600;\n            word-break: break-all;\n        }\n\n        .order-total-price {\n            min-width: 10ch;\n            font-size: var(--text14);\n            color: var(--neutral8);\n            text-align: right;\n            margin: 0;\n        }\n    }\n\n    .card-body {\n        padding: 10px 0;\n        padding-bottom: 0;\n    }\n\n    .fulfillment {\n        padding-left: 10px;\n        padding-right: 10px;\n        /* margin-bottom: 5px; */\n    }\n\n    .fulfillment:not(:last-of-type) {\n        border-bottom: 1px solid var(--neutral2);\n        margin-bottom: 10px;\n    }\n"]);return fo=function(){return e},e}var bo=Object(ge.a)(Oa)(fo(),E.b),mo=c.a.memo((function(e){var n=e.order,t=n.name,r=n.fulfillments,a=n.financial_status,o=n.total_price_set.presentment_money,i=o.amount,l=o.currency_code,u=e.onReportIssue,s=e.onTrack,d=e.id,p=Mr().t,f=Fa()(l)||l;return c.a.createElement(bo,{className:"card-order",id:d},c.a.createElement(ya,null,c.a.createElement("h2",null,"".concat(p("order")," ").concat(t||"N/A")),c.a.createElement("p",{className:"order-total-price"},"".concat(i," ").concat(f))),c.a.createElement(Sa,null,r.map((function(e){return c.a.createElement(po,{onReportIssue:u,onTrack:s,key:e.id,fulfillment:e,financialStatus:a})}))))}));function go(){var e=Object(R.a)(["\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    background-color: #fff;\n    height: ",";\n    box-shadow: 0px -4px 4px rgba(0, 0, 0, 0.09), 0px 1px 2px rgba(0, 0, 0, 0.1),\n        0px 1px 3px rgba(0, 0, 0, 0.16);\n    border-bottom-left-radius: 5px;\n    border-bottom-right-radius: 5px;\n    padding: 15px;\n    z-index: 1;\n\n    opacity: 0;\n    animation: "," 500ms ease-out forwards 1000ms;\n\n    .page-navigation-exit-active & {\n        display: none;\n    }\n\n    .widget-md & {\n        height: ",";\n    }\n    .widget-sm & {\n        height: ",";\n    }\n\n    .start-chat {\n        height: 100%;\n        display: flex;\n        justify-content: space-around;\n        align-items: center;\n    }\n"]);return go=function(){return e},e}function ho(){var e=Object(R.a)(["\n    from {\n        opacity: 0;\n        transform: translateY(5px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0px);\n    }\n"]);return ho=function(){return e},e}var vo="60px",Oo="55px",xo="72px",jo=Object(o.f)(ho()),Eo=ge.a.div(go(),xo,jo,vo,Oo),yo=function(){var e=Object(d.h)();return c.a.createElement(Eo,{className:"start-chat-footer"},c.a.createElement(pa,{onStartClick:function(){e.push(u.a.CHAT)}}))};function wo(){var e=Object(R.a)(["\n    padding-top: var(--pageBasePaddingTop);\n    padding-bottom: 0.75rem;\n    overflow-y: auto;\n\n    button.show-more-orders {\n        color: var(--primary);\n        display: block;\n        margin-left: auto;\n        margin-right: auto;\n        &:focus,\n        &:hover {\n            text-decoration: underline;\n            color: var(--primary);\n        }\n    }\n\n    .card:last-of-type {\n        margin-bottom: 5px;\n    }\n\n    &::after {\n        content: ' ';\n        display: block;\n        height: ",";\n        width: 100%;\n    }\n"]);return wo=function(){return e},e}var ko=ge.a.div(wo(),xo),Ro={current:!0},So=function(){var e,n=3,t=Object(s.b)((function(e){return m(e)})),r=Object(d.h)(),o=Object(s.a)(),l=Object(i.useContext)(O.FrameContext).document,p=null===(e=Object(d.i)().state)||void 0===e?void 0:e.orderNumber,f=Mr().t,b=Object(i.useState)((function(){if(Ro.current){var e=t.findIndex((function(e){var n=e.name.toLowerCase(),t=String(p).toLowerCase();return n.includes(t)}));-1!==e&&(n=e+1>n?e+1:n)}return n})),g=Object(a.a)(b,2),h=g[0],v=g[1];Object(i.useEffect)((function(){o(Object(Lr.c)())}),[o]),Object(i.useEffect)((function(){(function(){var e=Object(et.a)(Qn.a.mark((function e(){var n,t,r,a,i,c,l,u,s,d,p,f;return Qn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=localStorage.getItem(me.b.localStorageSSPKey)){e.next=3;break}return e.abrupt("return");case 3:if(t=JSON.parse(n),r=t.updatedAt,a=void 0===r?"":r,!Object(B.a)(a).isBefore(Object(B.a)().subtract(2,"minute"))){e.next=19;break}return i=t.details||{},c=i.email,l=void 0===c?"":c,u=i.orderNumber,s=void 0===u?"":u,d=me.b.shopifyCustomerId()||void 0,p={email:l,shopName:Object(zr.a)(me.b.shopifyPermanentDomain()),customerId:d,orderNumber:s},e.prev=9,e.next=12,Object(Tr.b)(p);case 12:f=e.sent,Object.keys(f).length>0&&o(Object(Lr.f)(f,{email:l,orderNumber:s})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),at.a.error(new Error("Automatic orders refresh failed"),{},{params:p});case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(){return e.apply(this,arguments)}})()()}),[o]),Object(i.useEffect)((function(){Ro.current&&setTimeout((function(){if(p){var e=l.querySelector('[id*="'.concat(p,'" i]'));e&&e.scrollIntoView({behavior:"smooth",block:"center"})}Ro.current=!1}),300)}),[l,r,p]),Object(i.useEffect)((function(){return function(){var e=l.getElementById("self-service-portal-container");e&&e.scrollTo(0,0)}}),[l]);var x=t.length-h>=6?6:t.length-h,j=1===x?f("see1MoreOrder"):f("seeMoreOrders",{nextPageOrderCount:x.toString()});return c.a.createElement(ko,{className:"ssp-page"},c.a.createElement(Gr,null,f("yourOrders")),t.map((function(e,n){var t=e.name;return n<h?c.a.createElement(mo,{id:t,onReportIssue:function(e){return function(e,n){r.push(u.a.SELF_SERVICE_PORTAL__REPORT,{orderName:e,fulfillmentId:n})}(t,e.id.toString())},onTrack:function(e){return function(e,n){r.push(u.a.SELF_SERVICE_PORTAL__TRACK,{orderName:e,fulfillmentId:n})}(t,e.id.toString())},key:t,order:e}):null})),t.length>h?c.a.createElement(kr,{className:"text show-more-orders",size:"small",onClick:function(){v((function(e){return t.length-e<6?t.length:e+6})),o(Object(Lr.h)()),setTimeout((function(){var e=l.querySelector('[id*="'.concat(t[h].name,'" i]'));e&&e.scrollIntoView({behavior:"smooth",block:"center"})}),100)}},j):null,c.a.createElement(yo,null))};function Co(){return(Co=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Ao(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var _o=c.a.createElement("path",{d:"M3.12744 11.62V18.495H8.12744V13.495C8.12744 12.8046 8.68709 12.245 9.37744 12.245H10.6274C11.3178 12.245 11.8774 12.8046 11.8774 13.495V18.495H16.8774V11.62",stroke:"#8390A5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),Io=c.a.createElement("path",{d:"M0.627441 10.37L9.11827 1.87916C9.35272 1.64456 9.67078 1.51276 10.0024 1.51276C10.3341 1.51276 10.6522 1.64456 10.8866 1.87916L19.3774 10.37",stroke:"#8390A5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),No=function(e){var n=e.svgRef,t=e.title,r=Ao(e,["svgRef","title"]);return c.a.createElement("svg",Co({width:21,height:20,viewBox:"0 0 21 20",fill:"none",ref:n},r),t?c.a.createElement("title",null,t):null,_o,Io)},To=c.a.forwardRef((function(e,n){return c.a.createElement(No,Co({svgRef:n},e))}));t.p;function Lo(){return(Lo=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Do(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var Mo=c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 0.625L0.625 4.375L10 8.125L19.375 4.375L10 0.625Z",stroke:"#8390A5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),Po=c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.625 4.375V15.625L10 19.375V8.125L0.625 4.375V4.375Z",stroke:"#8390A5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),Fo=c.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.375 4.375V15.625L10 19.375V8.125L19.375 4.375V4.375Z",stroke:"#8390A5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),Go=c.a.createElement("path",{d:"M15.1559 6.0625L5.78088 2.3125",stroke:"#8390A5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),zo=c.a.createElement("path",{d:"M17.1875 13.75L15.625 14.375",stroke:"#8390A5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),Vo=function(e){var n=e.svgRef,t=e.title,r=Do(e,["svgRef","title"]);return c.a.createElement("svg",Lo({width:21,height:21,viewBox:"0 0 21 21",fill:"none",ref:n},r),t?c.a.createElement("title",null,t):null,Mo,Po,Fo,Go,zo)},Bo=c.a.forwardRef((function(e,n){return c.a.createElement(Vo,Lo({svgRef:n},e))}));t.p;function Ho(){return(Ho=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Uo(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var Wo=c.a.createElement("path",{d:"M6.5918 0.125H10.375V3.9082H9.2832V1.97852L3.97656 7.28516L3.21484 6.52344L8.52148 1.2168H6.5918V0.125ZM9.2832 8.7832V5H10.375V8.7832C10.375 9.07096 10.265 9.32487 10.0449 9.54492C9.82487 9.76497 9.57096 9.875 9.2832 9.875H1.7168C1.41211 9.875 1.14974 9.77344 0.929688 9.57031C0.726562 9.35026 0.625 9.08789 0.625 8.7832V1.2168C0.625 0.912109 0.726562 0.658203 0.929688 0.455078C1.14974 0.235026 1.41211 0.125 1.7168 0.125H5.5V1.2168H1.7168V8.7832H9.2832Z",fill:"#4A8DF9"}),Yo=function(e){var n=e.svgRef,t=e.title,r=Uo(e,["svgRef","title"]);return c.a.createElement("svg",Ho({width:11,height:10,viewBox:"0 0 11 10",fill:"none",ref:n},r),t?c.a.createElement("title",null,t):null,Wo)},Zo=c.a.forwardRef((function(e,n){return c.a.createElement(Yo,Ho({svgRef:n},e))}));t.p;function qo(){var e=Object(s.b)((function(e){return m(e)})),n=Object(d.i)().state,t=n.orderName,r=n.fulfillmentId,a=e.find((function(e){return e.name===t})),o=a&&a.fulfillments.find((function(e){return e.id.toString()===r.toString()}));return{order:a,fulfillment:o||null}}function Ko(){var e=Object(R.a)(["\n    margin-top: var(--pageBasePaddingTop);\n\n    a,\n    b {\n        position: relative;\n        line-height: inherit;\n    }\n    .card-body {\n        padding-top: 20px;\n        padding-bottom: 20px;\n    }\n    svg.decoration {\n        margin-left: 0.5rem;\n        margin-right: 1rem;\n    }\n    .track-row {\n        display: flex;\n        align-items: flex-start;\n    }\n    .track-row:not(:last-of-type) {\n        margin-bottom: 1rem;\n    }\n    h3 {\n        margin-bottom: 0.2rem;\n    }\n    button.tracking-url {\n        position: relative;\n        padding-left: 0;\n        display: inline-block;\n        background-color: transparent;\n        border: none;\n        color: var(--primary);\n        outline: none;\n\n        &:hover,\n        &:focus {\n            text-decoration: underline;\n        }\n\n        padding-right: 1.1rem;\n        svg {\n            position: absolute;\n            right: 4px;\n            top: 50%;\n            transform: translateY(-50%);\n        }\n    }\n"]);return Ko=function(){return e},e}var Xo,Jo=Object(ge.a)(Oa)(Ko()),$o=function(){var e=qo(),n=e.order,t=e.fulfillment,r=Mr().t,a=Object(d.h)(),o=n.shipping_address;return c.a.createElement("div",{className:"ssp-page"},c.a.createElement(Jo,null,c.a.createElement(ya,null,c.a.createElement("h2",null,"".concat(r("order")," ").concat(n.name)),c.a.createElement("div",{className:"header-button-group"},c.a.createElement(wr,{size:"small",onClick:function(){a.push(u.a.SELF_SERVICE_PORTAL__REPORT,{orderName:n.name,fulfillmentId:t.id})}},r("reportIssue")))),c.a.createElement(Sa,null,c.a.createElement("div",{className:"track-row"},c.a.createElement(Bo,{className:"decoration"}),c.a.createElement("div",null,c.a.createElement(Ia,{tag:"h3"},r("deliveredVia"),"\xa0",c.a.createElement("b",null,t.tracking_company)),c.a.createElement(Ma,null,r("trackingNumberPrefix"),"\xa0",t.tracking_urls.filter(Boolean).map((function(e,n){return c.a.createElement("button",{type:"button",className:"tracking-url",title:"Tracking ".concat(t.tracking_numbers[n]||t.tracking_numbers[t.tracking_numbers.length-1]),onClick:function(){return window.open(e)},key:e},t.tracking_numbers[n]||t.tracking_numbers[t.tracking_numbers.length-1],c.a.createElement(Zo,null))}))))),o&&Object.keys(o).length>0?c.a.createElement("div",{className:"track-row"},c.a.createElement(To,{className:"decoration"}),c.a.createElement("div",null,c.a.createElement(Ia,{tag:"h3"},r("shippingAddress")),c.a.createElement(Ma,null,[o.address1,o.city,o.province_code,o.zip].filter(Boolean).join(", ")))):null)))};function Qo(){var e=Object(R.a)(["\n    --list-group-item-background-color: var(--neutral0);\n    --list-group-item-border-color: var(--neutral2);\n\n    && {\n        // override the ssp-page base paddings\n        padding: 15px 0 0 0;\n    }\n\n    h3 {\n        font-size: var(--text14);\n        font-weight: bold;\n        color: var(--neutral10);\n        padding: 0.75rem 2rem 0.75rem 1.25rem;\n        margin: 1px;\n    }\n"]);return Qo=function(){return e},e}!function(e){e.LABEL_PRINTED="label_printed",e.LABEL_PURCHASED="label_purchased",e.ATTEMPTED_DELIVERY="attempted_delivery",e.READY_FOR_PICKUP="ready_for_pickup",e.CONFIRMED="confirmed",e.IN_TRANSIT="in_transit",e.OUT_FOR_DELIVERY="out_for_delivery",e.DELIVERED="delivered",e.FAILURE="failure"}(Xo||(Xo={}));var ei=ge.a.div(Qo()),ni=function(e){return Object(B.a)(e).format("MM/DD/YYYY HH:mm")},ti=function(){var e=Mr().t,n=Object(s.a)(),t=Object(d.h)(),r=qo(),a=r.order,o=r.fulfillment,l=Object(i.useMemo)((function(){return function(e){var n=[];switch((e||{}).shipment_status){case Xo.DELIVERED:n=["incorrectOrder","pastDeliveryDate","damagedInDelivery","other"];break;case Xo.IN_TRANSIT:case Xo.OUT_FOR_DELIVERY:case Xo.ATTEMPTED_DELIVERY:case Xo.READY_FOR_PICKUP:case Xo.FAILURE:n=["stuckInTransit","changeShippingAddress","other"];break;case null:case Xo.LABEL_PRINTED:case Xo.LABEL_PURCHASED:case Xo.CONFIRMED:default:n=["pastDeliveryDate","changeShippingAddress","editOrder","applyPromoCode","other"]}return n}(o)}),[o]),p=function(r,i){var c,l=function(e,n,t,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ni,o=r.itemNames,i=r.order,c=r.orderPlaced,l=r.trackingNumber,u="----------------------------------",s="".concat(i,": ").concat(n.name),d="".concat(o,": ").concat(t.line_items.map((function(e){return e.name})).join(", ")),p="".concat(l,": ").concat(t.tracking_numbers.join(", ")||"/"),f="".concat(c,": ").concat(a(n.processed_at)),b=[e,u,s,d,p,f].join("\n");return b}(i,a,o,{order:e("order"),orderPlaced:e("orderPlaced"),itemNames:e("itemNames"),trackingNumber:e("trackingNumber")}),s=window.localStorage.getItem(me.b.localStorageSSPKey);n(Object(De.g)(l,s?{capturedMail:null===(c=s.details)||void 0===c?void 0:c.email}:{})),n(Object(Lr.d)(a,r)),t.push(u.a.CHAT)};return c.a.createElement(ei,{className:"ssp-page"},c.a.createElement("h3",null,e("whatIsWrongWithOrder")),c.a.createElement(aa,{flush:!0},l.map((function(n){return c.a.createElement(ua,{onClick:function(){return p(n,e(n))},key:n,action:!0,arrowRight:!0,tag:"button"},e(n))}))))},ri=function(){var e=Object(d.h)(),n=Object(s.b)((function(e){return[e.selfServicePortal.enabled,e.application.campaigns.clicked]})),t=Object(a.a)(n,2),r=t[0],o=t[1];return Object(i.useEffect)((function(){e.listen(Ce.b)}),[e]),Object(i.useEffect)((function(){o&&e.replace(u.a.CHAT)}),[o,e]),Object(i.useEffect)((function(){if(!o){var n=localStorage.getItem(me.b.localStorageChatLastPendingMessageKey),t=!!n&&Object(B.a)(n).add(1,"day").isAfter(Object(B.a)().toISOString());!r||t||e.replace(u.a.SELF_SERVICE_PORTAL__HOME)}}),[r,o,e]),c.a.createElement(d.e,null,c.a.createElement(d.c,{exact:!0,path:u.a.CHAT},c.a.createElement(rr,null)),c.a.createElement(d.c,{path:u.a.SELF_SERVICE_PORTAL},c.a.createElement(Se,null,c.a.createElement(d.c,{path:u.a.SELF_SERVICE_PORTAL__LOGIN},c.a.createElement(ea,null)),c.a.createElement(d.c,{path:u.a.SELF_SERVICE_PORTAL__HOME},c.a.createElement(ma,null)),c.a.createElement(Ae,{path:u.a.SELF_SERVICE_PORTAL__ORDERS},c.a.createElement(So,null)),c.a.createElement(Ae,{path:u.a.SELF_SERVICE_PORTAL__TRACK},c.a.createElement($o,null)),c.a.createElement(Ae,{path:u.a.SELF_SERVICE_PORTAL__REPORT},c.a.createElement(ti,null)))))},ai=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(be,null),c.a.createElement(ri,null))},oi=t(117);function ii(){var e=Object(R.a)(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n    padding: 0 2em;\n    text-align: center;\n\n    i {\n        font-size: 4em;\n        color: ",";\n        .widget-xs & {\n            font-size: 7em;\n        }\n    }\n\n    button {\n        padding: 0.5rem 1rem;\n        background-color: ",";\n        border-radius: 5px;\n    }\n"]);return ii=function(){return e},e}var ci=A.a.div(ii(),E.a.Orange,E.a.LightGrey),li=function(){var e=Object(s.b)((function(e){return e.application.texts.actionPostbackError}))||"An error occurred. Please retry.";return c.a.createElement(ci,null,c.a.createElement(X,{code:M.WARNING}),c.a.createElement("h5",{"aria-live":"assertive",role:"alert"},e),c.a.createElement(q.a,{onClick:function(){return window.location.reload()}},"Reload the page"))},ui=function(e){var n=e.children;return c.a.createElement(oi.a,{fallbackComponent:function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(be,null),c.a.createElement(li,null))}},n)},si=function(e,n,t){e&&!n&&t()},di=Object(i.memo)((function(e){var n=e.isOpen,t=e.hideIframe,r=e.reconnectWs,c=void 0===r?si:r,l=v(),u=l.messageWindow,d=l.widgetSize,p=Object(s.a)(),f=Object(i.useRef)(null),b=Object(i.useRef)(!1),m=Object(i.useContext)(O.FrameContext).document,g=Object(i.useState)(null),h=Object(a.a)(g,2),x=h[0],k=h[1],R=Object(s.b)((function(e){return[e.application.status.isConnected,e.application.credentials.accessToken]})),S=Object(a.a)(R,2),C=S[0],A=S[1];return Object(i.useEffect)((function(){n&&!A&&p(Object(y.d)())}),[p,A,n]),Object(i.useEffect)((function(){!b.current&&C&&(b.current=!0)}),[C]),Object(i.useEffect)((function(){c(b.current,C,(function(){return p(Object(w.d)())}))}),[p,c,C]),Object(i.useEffect)((function(){n&&setTimeout((function(){f.current&&f.current.focus()}),100)}),[n]),Object(i.useEffect)((function(){!x&&m&&(k(Object(j.a)({key:"message-window-iframe",container:m.head})),D(m))}),[x,m]),x&&Object(o.e)(o.a,{value:x},Object(o.e)(o.b,{styles:E.g}),Object(o.e)(z,{ref:f,className:"widget-".concat(d),dimensions:u,isOpen:n,onAnimationEnd:t,tabIndex:0,"aria-label":"Chat conversation window",role:"region"},Object(o.e)(ui,null,Object(o.e)(ai,null))))})),pi=function(e){var n=e.isOpen,t=Object(i.useState)(n),r=Object(a.a)(t,2),c=r[0],l=r[1],u=v(),s=u.iframe,d=u.widgetSize;Object(i.useEffect)((function(){n&&l(!0)}),[n]);var p=Object(i.useCallback)((function(){n||l(!1)}),[n]);return Object(o.e)(P,{id:"chat-window",title:"Gorgias live chat window",size:d,dimensions:s,shouldRender:c},Object(o.e)(di,{isOpen:n,hideIframe:p}))};n.default=Object(i.memo)(pi)}}]);