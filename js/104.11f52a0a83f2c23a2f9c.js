(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{PY8Z:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return S}));n("pIFo"),n("VRzm"),n("Btvt");var a,i=n("o0o1"),o=n.n(i),s=(n("ls82"),n("q1tI")),c=n.n(s),r=n("ZqbR"),l=n("Dczv"),u=n("1aYq"),p=n("bndP"),d=n("JRPe"),f=n("TSYQ"),h=n.n(f),g=n("lKPK"),m=(n("0l/t"),n("RMmg")),C=n("cl6U"),b=n("fhqO"),y=c.a.createElement,M=Object(d.injectIntl)((function(e){var t=e.handleLocationChange,n=e.intl.formatMessage,a=Object(s.useState)(!1),i=a[0],o=a[1],c=Object(s.useRef)(null),r={id:"components.sk.components.shopify.shipping.changeLocation",defaultMessage:"Change Location"},l=n({id:"components.sk.components.shopify.shipping.stateCodeLabel",defaultMessage:"Select your preferred location"}),u=b.tb.filter((function(e){return"PR"!==e.key})),p=function(){return o((function(e){return!e}))};return y("div",{className:"shipping-and-instore__location-picker"},y(m.Button,{onClick:function(){return o((function(e){return!e}))},className:"edit-child-form__title-button",ariaLabel:n(r)},y(d.FormattedMessage,r)),i?y(m.Modal,{className:"overlay location-picker",isOpen:!0,onRequestClose:p},y("section",{className:"overlay-containter"},y("div",{ref:c,className:"overlay"},y("form",{className:"location-picker__form"},y(C.default,{items:u,isSearchable:!0,label:l,onChange:function(e){var n=e.target.value;t(n),p()},onBlur:function(){return null}})),y("button",{className:"overlay__close-button",onClick:p,"aria-label":n({id:"components.closeButton",defaultMessage:"Close menu"}),type:"button"},y(d.FormattedMessage,{id:"components.closeButton",defaultMessage:"Close menu"}))))):null)}));!function(e){e.Alabama="AL",e.Alaska="AK",e.Arizona="AZ",e.Arkansas="AR",e.California="CA",e.Colorado="CO",e.Connecticut="CT",e.Delaware="DL",e.Florida="FL",e.Georgia="GA",e.Hawaii="HI",e.Idaho="ID",e.Illinois="IL",e.Indiana="IN",e.Iowa="IA",e.Kansas="KS",e.Kentucky="KY",e.Louisiana="LA",e.Maine="ME",e.Maryland="MD",e.Massachusetts="MA",e.Michigan="MI",e.Minnesota="MN",e.Mississippi="MS",e.Missouri="MO",e.Montana="MT",e.Nebraska="NE",e.Nevada="NV",e["New Hampshire"]="NH",e["New Jersey"]="NJ",e["New Mexico"]="NM",e["New York"]="NY",e["North Carolina"]="NC",e["North Dakota"]="ND",e.Ohio="OH",e.Oklahoma="OK",e.Oregon="OR",e.Pennsylvania="PA",e["Rhode Island"]="RI",e["South Carolina"]="SC",e["South Dakota"]="SD",e.Tennessee="TN",e.Texas="TX",e.Utah="UT",e.Vermont="VT",e.Virginia="VA",e.Washington="WA",e["West Virginia"]="WV",e.Wisconsin="WI",e.Wyoming="WY",e["District of Columbia"]="DC"}(a||(a={}));var N={id:"components.sk.components.shopify.shipping.shippingTitle",defaultMessage:"Shipping"},v=c.a.createElement,O=Object(d.injectIntl)((function(e){var t=e.isLocationIdentified,n=e.handleLocationChange,a=e.shippingSummary,i=e.intl.formatMessage;return v("div",{className:h()("shipping-and-instore",{"shipping-and-instore--with-location":t})},v("div",{className:"shipping-and-instore__title"},v("div",{className:"shipping-and-instore__title-shipping"},i(N))),v(M,{handleLocationChange:n}),v(g.a,{className:"shipping-and-instore__content",html:a}))})),k=c.a.createElement,S=function(){var e=Object(r.useSelector)((function(e){return e.shopify.config})).shippingInformation,t=e.shippingDetail,n=e.shippingText,i=e.freeShippingText,c=Object(s.useState)(""),d=c[0],f=c[1],h=Object(s.useState)(!1),g=h[0],m=h[1],C=Object(s.useState)({city:"",stateCode:""}),b=C[0],y=C[1],M=Object(r.useSelector)((function(e){return e.webConfig})).isAMP,N={city:"",stateCode:""},v="",S=function(){var e,t,n,i,s,c,r,d;return o.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,o.a.awrap(Object(l.b)());case 2:if(e=f.sent,!((t=e.data)&&t[u.i.addressCity]&&t[u.i.addressStateCode])){f.next=10;break}n=t[u.i.addressCity],i=t[u.i.addressStateCode],M?N={city:n,stateCode:i}:y({city:n,stateCode:i}),f.next=28;break;case 10:if(s="",c="",!Object(p.c)("ipCity")||!Object(p.c)("ipRegion")){f.next=17;break}s=Object(p.c)("ipCity"),c=Object(p.c)("ipRegion"),f.next=27;break;case 17:return f.next=19,o.a.awrap(fetch("/ipinfo",{method:"GET"}));case 19:return r=f.sent,f.next=22,o.a.awrap(r.json());case 22:d=f.sent,s=d.city,c=d.region,Object(p.e)("ipCity",s||""),Object(p.e)("ipRegion",c||"");case 27:c&&(M?N={city:s,stateCode:a[c]?a[c]:c}:y({city:s,stateCode:a[c]?a[c]:c}));case 28:case"end":return f.stop()}}),null,null,null,Promise)},j=function(e){var a=e.city,o=e.stateCode,s="";if(t[o.toLowerCase()]){var c=t[o.toLowerCase()],r=c.ground,l=c.express,u=c.freeShipping,p=a?"".concat(a,", "):"";s=n.replace(/@region/,"".concat(p).concat(o.toUpperCase())).replace(/@ground/,r).replace(/@express/,l)+(u?i:""),m(!0),M?v=s:f(s)}else t.default&&(s='<div class="shipping-and-instore__content-item">\n          '.concat(t.default.express,'\n        </div>\n        <div class="shipping-and-instore__content-item">\n          ').concat(t.default.ground,"\n        </div>").concat(t.default.freeShipping?i:""),M?v=s:f(s))};return Object(s.useEffect)((function(){S()}),[]),Object(s.useEffect)((function(){j(b)}),[b]),M&&(S(),j(N)),k(O,{isLocationIdentified:g,handleLocationChange:function(e){y({city:"",stateCode:e})},shippingSummary:M?v:d})}}}]);