(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{pREp:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return Mt}));a("HAE/"),a("WLL4"),a("jm62"),a("ioFf"),a("pIFo");var o=a("KQm4"),n=(a("V+eJ"),a("Tze0"),a("rGqo"),a("yt8O"),a("RW0V"),a("8+KV"),a("f3/d"),a("KKXr"),a("Z2Ku"),a("L9s1"),a("a1Th"),a("h7Nl"),a("Btvt"),a("rePB")),r=(a("0l/t"),a("bWfx"),a("dRSK"),a("q1tI")),s=a.n(r),i=a("JRPe"),c=a("ZqbR"),l=a("nOHt"),u=a("ex4G"),p=a("JfNZ"),d=a("bnQg"),m=a("77NR"),f=a("Dczv"),b=a("aM5I"),v=a("TSYQ"),y=a.n(v),g=a("RMmg"),O=a("gIis"),h=a("3aMu"),_=s.a.createElement;function j(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}var P=Object(i.injectIntl)((function(t){var e=t.handleFormatChange,a=t.selectedVariant,o=t.variantFormats,r=t.index,s=a?Object(d.o)(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?j(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},{title:a.title,variantOption:d.f.format})):"",l=function(t){var e=t.trim().toLowerCase();return e=O.f[e]?O.f[e]:e,a&&s===e},u=Object(c.useSelector)((function(t){return t.webConfig})).isAMP,p=function(t){return _(g.Button,{type:"button",option:"{{".concat(t,"format}}"),ariaLabel:"{{".concat(t,"format}}"),className:"product-options__button","data-amp-bind-class":"(product.selectedFormat == '{{".concat(t,"format}}') ? 'product-options__button  product-options__button--active' : 'product-options__button'")},"{{".concat(t,"format}}"))};return _(g.Row,{className:"product-options__row"},_(h.a,{index:r,id:"components.sk.components.shopify.productDetails.options.format",defaultMessage:"Select format"}),u?_("amp-list",{src:"amp-state:product",items:"variantFormats",width:"auto",height:"60",layout:"flex-item"},_("div",{placeholder:!0,className:"amp_loader"},_(i.FormattedMessage,{id:"components.sk.components.amp.loading",defaultMessage:"Loading..."})),_("template",{type:"amp-mustache"},_("amp-selector",{name:"format",layout:"container","data-amp-bind-selected":"product.selectedFormat",on:"select:AMP.setState({ product: { selectedFormat: event.targetOption, selectedType: product.defaultVariantTypes[event.targetOption], selectedId: product.defaultVariantSizesByType[product.defaultVariantTypes[event.targetOption]], quantity: 1 }, nutriTab: 1, nutriId: product.formats[event.targetOption].nutriMetaIndex, prepId: product.variants[product.selectedId].prepMetaIndex, ampfrequency: { subscription: ampfrequency.subscription } })"},_("div",{className:"product-options__content product-options__content--format"},p("current."),"{{#items}}",p(""),"{{/items}}")))):_("div",{className:"product-options__content product-options__content--format"},o.map((function(t){return _(g.Button,{onClick:l(t)?void 0:function(){return e(t)},ariaLabel:t,key:t,className:y()("product-options__button",{"product-options__button--active":l(t)})},t)}))))})),k=s.a.createElement;function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}var C=Object(i.injectIntl)((function(t){var e=t.handleTypeChange,a=t.selectedVariant,o=t.variantTypes,r=t.index,s=function(t){var e=t.replace(d.g,"-").toLowerCase();return O.d[e]||e},l=Object(c.useSelector)((function(t){return t.webConfig})).isAMP,u=function(t){return k(g.Button,{type:"button",option:"{{".concat(t,"type}}"),ariaLabel:"{{".concat(t,"type}}"),className:"product-options__button product-options__button-{{current.type}}","data-amp-bind-class":"(product.selectedFormat == '{{".concat(t,"format}}' ? 'product-options__button' : 'element-hidden')+' '+(product.selectedType == '{{").concat(t,"type}}' ? 'product-options__button-{{").concat(t,"typeClass}} product-options__button--active product-options__button-{{").concat(t,"typeClass}}--active' : 'product-options__button product-options__button-{{").concat(t,"typeClass}}')")},"{{".concat(t,"type}}"))},p=a?Object(d.o)(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?S(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},{title:a.title,variantOption:d.f.type})):"",m=function(t){var e=t.trim().toLowerCase();return a&&(p===e||p===O.f[e])};return k(g.Row,{className:"product-options__row"},k(h.a,{index:r,id:"components.sk.components.shopify.productDetails.options.type",defaultMessage:"Select type"}),l?k("amp-list",{src:"amp-state:product",items:"variantTypes",width:"auto",height:"140",layout:"flex-item"},k("div",{placeholder:!0,className:"amp_loader"},k(i.FormattedMessage,{id:"components.sk.components.amp.loading",defaultMessage:"Loading..."})),k("template",{type:"amp-mustache"},k("amp-selector",{name:"type",layout:"container","data-amp-bind-selected":"product.selectedType",on:"select:AMP.setState({ product: { selectedType: event.targetOption, selectedId: product.defaultVariantSizesByType[event.targetOption], quantity: 1 }, nutriTab: 1, nutriId: product.formats[product.selectedFormat].nutriMetaIndex, prepId: product.variants[product.selectedId].prepMetaIndex, ampfrequency: { subscription: ampfrequency.subscription } })"},k("div",{className:"product-options__content product-options__content--type"},u("current."),"{{#items}}",u(""),"{{/items}}")))):k("div",{className:"product-options__content product-options__content--type"},o.map((function(t){return k(g.Button,{onClick:m(t)?void 0:function(){return e(t)},ariaLabel:t,key:t,className:y()("product-options__button product-options__button-".concat(s(t)),Object(n.a)({},"product-options__button--active product-options__button-".concat(s(t),"--active"),m(t)))},t)}))))})),M=(a("xfY5"),a("7h0T"),a("+21s")),D=a("LPWd"),F=a("z9QD"),N=a.n(F),w=a("RK/K"),V=a("4p/S"),I=(a("bHtr"),[{value:"1",key:"days",defaultMessage:"Day",pluralDefaultMessage:"Days",id:"components.sk.components.shopify.productDetails.formulaCalculator.durationDay",pluralId:"components.sk.components.shopify.productDetails.formulaCalculator.durationDay.plural"},{value:"7",key:"weeks",defaultMessage:"Week",pluralDefaultMessage:"Weeks",id:"components.sk.components.shopify.productDetails.formulaCalculator.durationWeek",pluralId:"components.sk.components.shopify.productDetails.formulaCalculator.durationWeek.plural"},{value:"30",key:"months",pluralDefaultMessage:"Months",defaultMessage:"Month",id:"components.sk.components.shopify.productDetails.formulaCalculator.durationMonth",pluralId:"components.sk.components.shopify.productDetails.formulaCalculator.durationMonth.plural"}]),T=[{value:"0-1",feddingHint:"6-8",volumeHint:"2-3"},{value:"1-2",feddingHint:"6-8",volumeHint:"4-5"},{value:"2-3",feddingHint:"6-8",volumeHint:"5-6"},{value:"3-6",feddingHint:"4-5",volumeHint:"6-8"},{value:"6-12",feddingHint:"3-4",volumeHint:"8"}],E=a("DIkY"),x=s.a.createElement;function U(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}var q=Object(i.injectIntl)((function(t){var e=t.options,a=t.placeholder,o=t.formulaParams,r=t.setFormulaParams,s=t.name,i=t.isError,c=t.intl.formatMessage;return x(E.a,{isSearchable:!1,key:s,className:y()("form-control__input form-control__input--select",{"form-control__input--error":i}),classNamePrefix:"select",options:e,onChange:function(t){var e,a=t.value,i=t.label;return r(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?U(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},o,(e={},Object(n.a)(e,s,a),Object(n.a)(e,"".concat(s,"Label"),i),e)))},value:e.filter((function(t){return t.value===o[s]})),placeholder:a||c({id:"components.sk.components.shopify.productDetails.formulaCalculator.selectPlaceholder",defaultMessage:"Select one"})})})),z=a("wx14"),L=s.a.createElement;function B(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function R(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?B(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var H=function(t){var e=t.formulaParams,a=t.placeholder,o=t.setFormulaParams,r=t.name,s=t.errorMessage;return L("input",Object(z.a)({className:"form__input--text",type:"text",pattern:"[1-9]|[1-3][0-9]|[4][0]",required:!0,size:4,id:r,title:s,value:e[r],onBlur:function(t){var a;return o(R({},e,(a={},Object(n.a)(a,r,t.target.value),Object(n.a)(a,"valueForGtm",t.target.value),a)))},onChange:function(t){return o(R({},e,Object(n.a)({},r,t.target.value)))}},a?{placeholder:a}:{}))},A=s.a.createElement;function W(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function J(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?W(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var K=function(t){var e=t.hintValue,a=t.hintId,o=t.hintMessage;return A("div",{className:"form__label-hint"},e&&e!=={}?A(i.FormattedMessage,Object(z.a)({id:a,defaultMessage:o},{values:J({},e)})):null)},G=s.a.createElement,Q=function(t){var e=t.controlFor,a=t.labelId,o=t.labelMessage,n=t.children,r=t.labelOptional;return G("div",{className:"form__control"},G("label",{className:"form__label",htmlFor:e},G(i.FormattedMessage,{id:a,defaultMessage:o}),r?G("span",{className:"form__label-optional"},r):null),n)},Y=s.a.createElement;function Z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function X(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var $=function(t,e){return new Array(t).fill(1).map((function(t,a){return{value:(t+a).toString(),label:"".concat((t+a).toString()).concat(e||"")}}))},tt=function(t){var e,a,o=t.formatMessage,n=t.formulaParams,c=t.setFormulaParams,l=t.submitFormulaForm,u=t.showResults,p=t.isNotSure,d=t.setIsNotSureForm,m=Object(r.useState)(!1),f=m[0],b=m[1],v=Object(r.useState)(!0),O=v[0],h=v[1],_=null===(e=T.find((function(t){return t.value===n.age})))||void 0===e?void 0:e.feddingHint,j=null===(a=T.find((function(t){return t.value===n.age})))||void 0===a?void 0:a.volumeHint,P=I.map((function(t){var e=t.value,a=t.id,n=t.defaultMessage;return X({},{value:e,label:o({id:a,defaultMessage:n})})})),k=T.map((function(t){var e=t.value;return X({},{value:e,label:"".concat(e," ").concat(o({id:"components.sk.components.shopify.productDetails.formulaCalculator.durationMonth",defaultMessage:"Month"}))})})),S=o({id:"components.sk.components.shopify.productDetails.formulaCalculator.notSure",defaultMessage:"I'm not sure"}),C=o({id:"components.sk.components.shopify.productDetails.formulaCalculator.back",defaultMessage:"Back"}),M=o({id:"components.sk.components.shopify.productDetails.formulaCalculator.changeResponses",defaultMessage:"Change responses"});return Y(g.Col,null,u?Y("div",{className:"formula-calculator__change-response-wrapper"},Y(g.Button,{onClick:function(){return b(!f)},className:y()("formula-calculator__change-response-button",{"formula-calculator__change-response-button--close":f}),ariaLabel:M},M)):null,f||!u?Y("form",{className:"form",onSubmit:function(t){t.preventDefault(),!p||""!==n.feedings&&""!==n.volume?(b(!!u&&!f),l()):h(!1)}},p?null:Y(s.a.Fragment,null,Y(Q,{controlFor:"totalVolume",labelId:"components.sk.components.shopify.productDetails.formulaCalculator.totalInputVolume",labelMessage:"How many ounces of formula do you give your child every day?"},Y("div",{className:"form__placeholder-input"},Y(H,{formulaParams:n,setFormulaParams:c,placeholder:o({id:"components.sk.components.shopify.productDetails.formulaCalculator.inputPlaceholder",defaultMessage:"Amount"}),name:"totalVolume",errorMessage:o({id:"components.sk.components.shopify.productDetails.formulaCalculator.form.totalVolumeErrorText",defaultMessage:"Enter a number from 1 and 40"}),maxlength:"2"}),Y("div",{className:"form__placeholder-text"},Y(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.inputUnitsPlaceholder",defaultMessage:"fl oz"})))),Y(g.Button,{onClick:function(){return d(!0)},className:"formula-calculator__unsure-button",ariaLabel:S},Y("span",null,S))),p?Y(s.a.Fragment,null,Y(g.Button,{onClick:function(){return d(!1)},className:"formula-calculator__unsure-button",ariaLabel:C},Y("span",null,C)),Y(Q,{controlFor:"age",labelId:"components.sk.components.shopify.productDetails.formulaCalculator.ageOfChild",labelMessage:"How old is your child?",labelOptional:o({id:"components.sk.components.shopify.productDetails.formulaCalculator.optional",defaultMessage:"Optional"})},Y(q,{options:k,formulaParams:n,setFormulaParams:c,name:"age"})),Y(Q,{controlFor:"feedings",labelId:"components.sk.components.shopify.productDetails.formulaCalculator.inputFeedings",labelMessage:"How often does your little one drink formula?"},Y(K,{hintValue:_?{feedingHint:_}:null,hintId:"components.sk.components.shopify.productDetails.formulaCalculator.feedingHint",hintMessage:"Babies this age are typically fed {feedingHint} times a day."}),Y(q,{options:$(V.b.selectFormulaOption,o({id:"components.sk.components.shopify.productDetails.formulaCalculator.selectFrequencyText",defaultMessage:" times per day"})),formulaParams:n,setFormulaParams:c,name:"feedings",isError:!O&&""===n.feedings}),O||""!==n.feedings?null:Y(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.form.errorText",defaultMessage:" field is required"},(function(t){return Y("span",{className:"form__control-error-message"},"".concat(o({id:"components.sk.components.shopify.productDetails.formulaCalculator.form.feedingsErrorText",defaultMessage:"Feedings"})," ").concat(t))}))),Y(Q,{controlFor:"volume",labelId:"components.sk.components.shopify.productDetails.formulaCalculator.inputVolume",labelMessage:"How much formula do you give your baby at each feeding?"},Y(K,{hintValue:j?{volumeHint:j}:null,hintId:"components.sk.components.shopify.productDetails.formulaCalculator.volumeHint",hintMessage:"Parents typically feed babies this age {volumeHint} fl oz of formula at a time."}),Y(q,{options:$(V.b.selectFormulaOption,o({id:"components.sk.components.shopify.productDetails.formulaCalculator.selectVolumeText",defaultMessage:" fl oz each"})),formulaParams:n,setFormulaParams:c,name:"volume",isError:!O&&""===n.volume}),O||""!==n.volume?null:Y(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.form.errorText",defaultMessage:" field is required"},(function(t){return Y("span",{className:"form__control-error-message"},"".concat(o({id:"components.sk.components.shopify.productDetails.formulaCalculator.form.volumeErrorText",defaultMessage:"Volume"})," ").concat(t))})))):null,Y("div",{className:"form__control"},Y("div",{className:"form__duration"},Y("label",{className:"form__label",htmlFor:"duration"},Y(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.duration",defaultMessage:"For what timeframe do you want to calculate your formula needs?"})),Y("div",{className:"form__duration-select"},Y(q,{options:$(V.b.selectTimeOption),formulaParams:n,setFormulaParams:c,name:"duration"}),Y(q,{options:P,formulaParams:n,setFormulaParams:c,name:"durationFactor"})))),Y("div",{className:"form__control"},Y(g.Button,{className:"form__submit",ariaLabel:o({id:"components.sk.components.shopify.productDetails.formulaCalculator.submit",defaultMessage:"Submit"}),type:"submit"},Y(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.submit",defaultMessage:"Submit"})))):null)},et=a("ODXe"),at=a("usVm"),ot=a("WLnS"),nt=s.a.createElement,rt=function(t){var e=t.image,a=e.originalSrc,o=e.altText,n=t.bgColor,r=t.title,s=Object(ot.a)(n||""),i=Object(et.a)(s,2),c=i[0],l=i[1];return nt(g.Col,null,nt("div",{style:l?{background:l}:{},className:"product product--".concat(c)},nt(at.default,{className:"product__image",image:{url:a,altText:o}}),nt("div",{className:"product__desc"},nt("p",{className:"product__title"},r))))},st=(a("SRfc"),a("RndJ")),it=a("GJcV"),ct=s.a.createElement;function lt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}var ut=Object(i.injectIntl)((function(t){var e,a,o,l,u=t.id,p=t.minPricePerUnit,d=t.title,f=t.image,v=t.product,O=t.currencyCode,h=t.availableForSale,_=t.currentFormat,j=t.formulaCalculatorResults,P=t.getLabelText,k=t.formatMessage,S=k({id:"components.sk.components.shopify.productDetails.quantity.bestValue",defaultMessage:"BEST VALUE"}),C=Object(c.useSelector)((function(t){return t})),D=C.shopify.config.configuration,F=D.shopCheckoutNowUrl,N=D.shopSubscribeUrl,w=C.intl.locale,V=new URL(F);V.searchParams.set("variant_id",u),V.searchParams.set("quantity",j.quantity.toString()),V.searchParams.set("redirection","1"),w===b.a&&V.searchParams.set("locale",b.a);var I=Object(r.useState)(b.e),T=I[0],x=I[1],U=Object(r.useState)(j.frequencyData.length>0?j.frequencyData[0]:""),q=U[0],z=U[1],L=(null===(e=j.frequencyData)||void 0===e?void 0:e.length)?j.frequencyData.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):lt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},{value:t,label:"".concat(k({id:"components.sk.components.shopify.productDetails.options.deliverEvery",defaultMessage:"Deliver every"})," ").concat(t)})})):[],B=new URL(N),R=null===(a=v.metafields)||void 0===a?void 0:null===(o=a.find((function(t){return t.key===b.f})))||void 0===o?void 0:o.value,H=R?Object(m.a)(JSON.parse(R)):{};B.searchParams.set("default_id",u),B.searchParams.set("variant_id",null===(l=H[u])||void 0===l?void 0:l.discountVariantId),B.searchParams.set("quantity",j.quantity.toString()),B.searchParams.set("handle",v.handle);var A=q.split(" ");B.searchParams.set("frequency",A[0]),B.searchParams.set("unit_type",A[1]),w===b.a&&B.searchParams.set("locale",b.a);var W=j.totalPrice-j.totalPrice*(j.discountPercent/100);return ct("div",{className:"results__item-wrapper",role:"presentation",onClick:function(t){return t.stopPropagation()}},ct("div",{className:"results__item"},j.pricePerUnit===p?ct("div",{className:"results__item-flag"},S):null,ct("label",{className:"results__item-label",htmlFor:u},ct("div",{className:"results__item-quantity-container"},ct("span",{className:"results__item-quantity"},P({quantity:j.quantity,title:d,suffix:j.suffix})),ct(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.resultCardQuantity",defaultMessage:" {totalWeight} {variantUnit} of {currentFormat}",values:{totalWeight:j.totalWeight,variantUnit:j.units,currentFormat:_}},(function(t){return ct("span",{className:"results__item-weight-details"},t)})))),ct("div",{className:"results__item-variant-container"},f?ct(at.default,{className:"results__item-image",image:{url:f.mobileSrc,altText:f.altText}}):null,ct("div",{className:"results__item-title-wrapper"},ct("div",{className:"results__item-title"},v.title),ct("div",{className:"results__item-type"},ct("span",{className:"results__item-type-title"},d.split("/")[2]||d.split("/")[1]),ct("span",{className:"results__item-type-quantity"},"x".concat(j.quantity))))),ct("div",{className:"results__item-frequency-container"},ct(g.Button,{ariaLabel:k({id:"components.sk.components.shopify.productDetails.formulaCalculator.resultsPrice",defaultMessage:"One-time order"}),className:y()("results__item-price-wrapper",{"results__item-price-wrapper--active":T===b.e}),onClick:function(){return x(b.e)}},ct("div",{className:"results__item-price-title"},ct(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.resultsPrice",defaultMessage:"One-time order"})),ct("div",{className:"results__item-unit-wrapper"},ct("div",{className:"results__item-price"},Object(M.b)(j.totalPrice,O)),ct("div",{className:"results__item-price-unit"},j.pricePerUnitText))),j.isSnsEnabled&&H[u]&&ct(s.a.Fragment,null,ct(g.Button,{className:y()("results__item-price-wrapper",{"results__item-price-wrapper--active":T===b.h}),ariaLabel:k({id:"components.sk.components.shopify.productDetails.formulaCalculator.subscribe",defaultMessage:"Subscribe & save"}),onClick:function(){return x(b.h)}},ct("div",{className:"results__item-price-title"},ct(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.subscribe",defaultMessage:"Subscribe & save"})," ".concat(j.discountPercent,"%")),ct("div",{className:"results__item-unit-wrapper"},ct("div",{className:"results__item-price"},Object(M.b)(W,O)),ct("div",{className:"results__item-price-unit"},j.snsPricePerUnitText))),T===b.h&&ct(E.a,{classNamePrefix:"select",className:"form-control__input form-control__input--select",options:L,onChange:function(t){var e=t.value;return z(e)},value:L.filter((function(t){return t.value===q})),isSearchable:!1,maxMenuHeight:100}))),ct("div",{className:"results__add-to-cart"},h&&ct("div",{className:"product-options__button-container product-cta product-cta--wrapper"},ct(it.default,{className:"product-options__button-add",to:T===b.h?B.toString():V.toString(),target:"_self"},ct(i.FormattedMessage,{id:h?"components.sk.components.shopify.productDetails.addToCart":"components.sk.components.shopify.productDetails.soldOut",defaultMessage:h?"Add to cart":"Sold Out"}))))))})),pt=s.a.createElement,dt=Object(i.injectIntl)((function(t){var e=t.formatMessage,a=t.enhancedVariants,n=t.product,r=t.duration,s=t.durationFactor,c=t.currentFormat,l=t.calculatedVolume,u=t.baseUnit,p=I.find((function(t){return t.value===s})),m=Number(r)>1,f="".concat(r," ").concat(e({id:p?m?p.pluralId:p.id:"",defaultMessage:m?null===p||void 0===p?void 0:p.pluralDefaultMessage:null===p||void 0===p?void 0:p.defaultMessage})),b=function(t){var a=t.name,o=t.quantity,n=a.replace(d.a," ").trim().replace(d.g,"_").toLowerCase();return e(o>1?{id:"components.sk.components.shopify.productDetails.pack.".concat(n,".plural"),defaultMessage:a}:{id:"components.sk.components.shopify.productDetails.pack.".concat(n),defaultMessage:a})},v=a.map((function(t){var e;return null===(e=t.formulaCalculatorResults)||void 0===e?void 0:e.pricePerUnit})),y=Math.min.apply(Math,Object(o.a)(v)),O=v.filter((function(t){return t===y})).length>1,h=1===v.length||O?-1:y,_=function(t){var e=t.quantity,a=t.title,o="case"===t.suffix.toLowerCase(),n=(o?a.split("(")[1].match(d.b):1)*e;return"".concat(n," ").concat(b({name:a.split("/")[1]&&a.split("/")[1].trim(),quantity:n})).concat(o?"(".concat(e," ").concat(b({name:"case",quantity:e}),")"):"",":")};return pt(g.Col,null,pt("div",{className:"results"},pt(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.resultsTitle",defaultMessage:"Based on your responses, you\u2019ll need at least {minFormula} {formatUnit} for {durationText}",values:{minFormula:l.toFixed(2),formatUnit:u,durationText:f}},(function(t){return pt("h3",{className:"results__title"},t)})),pt("div",{className:"results__desc"},pt(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.resultsDescription",defaultMessage:"Here are a few options from closest to what you need, to slightly more at a better value. "})),pt("div",{className:"results__items"},pt(st.a,{slidesToShow:1.1,cellAlign:"center",wrapAround:!0},a.map((function(t){var a=t.id,o=t.availableForSale,r=t.title,s=t.formulaCalculatorResults,i=t.priceV2.currencyCode,l=t.image,u=t.parsedId;return s?pt(ut,Object(z.a)({key:a},{id:u,formulaCalculatorResults:s,availableForSale:o,title:r,currencyCode:i,image:l,minPricePerUnit:h,getLabelText:_,product:n,currentFormat:c,formatMessage:e})):null}))))))})),mt=s.a.createElement,ft=Object(i.injectIntl)((function(t){var e,a=t.clearFormulaCalculatorState,o=t.product,n=t.product,r=n.images,s=n.title,c=n.metafields,l=t.formulaCalculatorVisible,u=t.intl.formatMessage,p=t.formulaParams,d=t.setFormulaParams,m=t.submitFormulaForm,f=t.enhancedVariants,b=t.showResults,v=t.currentFormat,y=t.calculatedVolume,O=t.baseUnit,h=t.isNotSure,_=t.setIsNotSureForm,j=t.imageIndex,P=void 0===j?0:j;return mt(g.Modal,{className:"formula-calculator",isOpen:l,onRequestClose:a},mt(g.Button,{className:"formula-calculator__close",onClick:a,ariaLabel:u({id:"components.sk.components.shopify.productDetails.formulaCalculator.close",defaultMessage:"Close"})},mt(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.close",defaultMessage:"Close"})),mt(g.Col,null,mt("h3",{className:"formula-calculator__title"},mt(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.title",defaultMessage:"Formula Calculator"}))),mt(rt,{image:r[P],bgColor:null===c||void 0===c?void 0:null===(e=c.find((function(t){return"pdp-bgcolor"===t.key})))||void 0===e?void 0:e.value,title:s}),mt(tt,{formatMessage:u,formulaParams:p,setFormulaParams:d,submitFormulaForm:m,showResults:b,isNotSure:h,setIsNotSureForm:_}),b?mt(dt,{formatMessage:u,enhancedVariants:f,product:o,duration:p.duration,durationFactor:p.durationFactor,currentFormat:v,calculatedVolume:y,baseUnit:O}):null)})),bt=(a("E0cn"),s.a.createElement);function vt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):vt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var gt=Object(i.injectIntl)((function(t){var e,a,n=t.handleFormulaCalculatorClick,s=t.product,i=t.product,l=i.variants,u=i.collections,p=t.formulaCalculatorVisible,m=t.intl.formatMessage,v=Object(r.useState)({baseUnit:"",calculatedVolume:0}),y=v[0],g=v[1],O=Object(r.useState)(!1),h=O[0],_=O[1],j=Object(r.useState)(!1),P=j[0],k=j[1],S={feedings:"",volume:"",duration:"1",durationFactor:"30",totalVolume:"",age:"",ageLabel:"",feedingsLabel:"",volumeLabel:"",durationFactorLabel:"Month",valueForGtm:""},C=Object(r.useState)(!1),F=C[0],I=C[1];Object(r.useEffect)((function(){Object(f.c)().then((function(t){return I(t)}))}),[]);var T=Object(c.useSelector)((function(t){return t.shopify.config.cartConfiguration})),E=!!T&&(T.excludeSnsVariants&&T.excludeSnsVariants.find((function(t){return s.id===t}))),x=!(!T||E)&&T.isSnsEnabled,U=T?T.snsFrequency:[],q=Object(r.useMemo)((function(){return Object(w.a)((null===T||void 0===T?void 0:T.snsItems)||[],{collections:u})}),[u]),z=q.isSpecialSnsEnabled,L=void 0!==z&&z,B=q.specialSnsDiscount,R=void 0===B?0:B,H=q.snsDiscount,A=void 0===H?0:H,W=Object(r.useState)(S),J=W[0],K=W[1],G=Object(r.useState)(l),Q=G[0],Y=G[1],Z=Object(r.useState)(!1),X=Z[0],$=Z[1],tt=Object(c.useSelector)((function(t){return t.currentVariant})).currentVariant,et=null===tt||void 0===tt?void 0:null===(e=tt.title)||void 0===e?void 0:e.split("/")[0],at=parseInt(J.feedings,10),ot=parseInt(J.volume,10),nt=parseInt(J.duration,10)*parseInt(J.durationFactor,10),rt=parseInt(J.totalVolume,10),st=Number.isNaN(rt)||!Number.isNaN(at)?at*ot*nt:rt*nt,it=function(t){N()(J,S)||D.b.dispatch(D.a.formulaCalculatorStep,{formulaCalculatorStep:t,formulaParams:J,baseResultOptions:y,isNotSure:h})},ct=function(){var t=[];Q.forEach((function(e){var a,o,n,r,s=e.formulaCalculatorParams,i=Math.ceil(st/Number(s.yield)),c=null===(a=e.metafields)||void 0===a?void 0:null===(o=a.find((function(t){return t.key===b.c})))||void 0===o?void 0:o.value,l=null===(n=e.metafields)||void 0===n?void 0:null===(r=n.find((function(t){return t.key===b.b})))||void 0===r?void 0:r.value,u=L&&!F&&"1"!==l?R:A,p=function(t,e,a){var o=t.weight,n=t.price,r=t.units,s=Object(d.y)(n/parseInt(o,10)),i=s-s*(a/100);return{pricePerUnit:s,pricePerUnitText:"".concat(Object(M.b)(s.toFixed(2),e)," ").concat(m({id:"components.sk.components.shopify.productDetails.options.unitPrefix",defaultMessage:"per"})," ").concat(r),snsPricePerUnit:i,snsPricePerUnitText:"".concat(Object(M.b)(i.toFixed(2),e)," ").concat(m({id:"components.sk.components.shopify.productDetails.options.unitPrefix",defaultMessage:"per"})," ").concat(r)}}(s,e.priceV2.currencyCode,u),f=p.pricePerUnit,v=p.pricePerUnitText,y=p.snsPricePerUnit,g=p.snsPricePerUnitText,O=Object(d.y)(i*s.price),h=Object(d.y)(i*Number(s.weight));t.push(yt({},e,{formulaCalculatorResults:{quantity:i,pricePerUnit:f,pricePerUnitText:v,snsPricePerUnit:y,snsPricePerUnitText:g,totalPrice:O,totalWeight:h,isSnsEnabled:x&&"1"!==c,frequencyData:U,discountPercent:u,suffix:s.suffix,units:s.units}}))}));var e=Math.min.apply(Math,Object(o.a)(t.map((function(t){return t.formulaCalculatorResults.quantity})))),a=t.find((function(t){return t.formulaCalculatorResults.quantity===e}));if(a&&a.metafields){var n=Object(d.k)(d.c.yield,a.metafields),r=Object(d.k)(d.c.weight,a.metafields),s=n&&r?Number(n)/Number(r):1;g({baseUnit:Object(d.k)(d.c.units,a.metafields),calculatedVolume:st/s})}Y(t),$(!0)};Object(r.useEffect)((function(){P&&(it(V.a.result6),k(!1))}),[y]),Object(r.useEffect)((function(){it(V.a.time5)}),[J.duration,J.durationFactor]),Object(r.useEffect)((function(){it(V.a.intro1)}),[J.age]),Object(r.useEffect)((function(){it(V.a.quantity2)}),[J.feedings]),Object(r.useEffect)((function(){it(V.a.formula3)}),[J.volume]),Object(r.useEffect)((function(){it(V.a.format4)}),[J.valueForGtm]);Object(r.useEffect)((function(){!function(){var t=[];l.forEach((function(e){var a={price:parseFloat(e.priceV2.amount),yield:"",weight:"",units:"",suffix:"",age:""};e&&e.metafields&&e.metafields.forEach((function(t){var e=t.namespace,o=t.key,n=t.value;e===d.d.glFormulaCalc&&(a[o]=n)})),""!==a.yield&&""!==a.weight&&""!==a.units&&t.push(yt({},e,{formulaCalculatorParams:a}))})),Y(t),X&&ct()}()}),[l]);var lt=function(t){if(s.images){var e=0;return s.images.forEach((function(a,o){a.id===t&&(e=o)})),e}}(null===tt||void 0===tt?void 0:null===(a=tt.image)||void 0===a?void 0:a.id);return bt(ft,{clearFormulaCalculatorState:function(){$(!1),K(S),n(!1)},product:s,formulaCalculatorVisible:p,formulaParams:J,setFormulaParams:K,submitFormulaForm:function(){k(!0),ct()},enhancedVariants:Q,showResults:X,currentFormat:et,calculatedVolume:y.calculatedVolume,baseUnit:y.baseUnit,isNotSure:h,setIsNotSureForm:_,imageIndex:lt})})),Ot=s.a.createElement,ht=Object(i.injectIntl)((function(t){var e=t.handleVariantChange,a=t.handleFormulaCalculatorClick,n=t.formulaCalculatorVisible,r=t.product,s=t.selectedVariant,l=t.variantSizesByType,u=t.intl.formatMessage,p=t.index,m=u({id:"components.sk.components.shopify.productDetails.quantity.formulaCalculator",defaultMessage:"How much do I need?"}),f=u({id:"components.sk.components.shopify.productDetails.quantity.bestValue",defaultMessage:"BEST VALUE"}),b=u({id:"components.sk.components.shopify.productDetails.quantity.outOfStock",defaultMessage:"OUT OF STOCK"}),v=l?l.filter((function(t){return!t.isOutOfStock})).map((function(t){return t.pricePerUnitValue})):[],O=Math.min.apply(Math,Object(o.a)(v)),_=v.filter((function(t){return t===O})).length>1,j=1===v.length||_?-1:O,P=function(t){return Ot(g.Button,{type:"button",option:"{{".concat(t,"id}}"),ariaLabel:"{{".concat(t,"id}}"),className:"product-options__size-button product-options__size-button--active","data-amp-bind-class":"(product.selectedType == '{{".concat(t,"type}}' ? 'product-options__size-button' : 'element-hidden')+' '+(product.selectedId == '{{").concat(t,"id}}' ? 'product-options__size-button--active' : '')")},Ot("div",{className:"product-options__size-button-content"},Ot("div",{className:"product-options__size-button-value {{".concat(t,"bestValue}}")},"{{".concat(t,"bestValue}}")),Ot("div",{className:"product-options__size-button-title"},"{{".concat(t,"title}}")),Ot("div",{className:"product-options__size-button-perunit"},"{{".concat(t,"pricePerUnit}}")),Ot("div",{className:"product-options__size-button-price"},"{{".concat(t,"price}}")),Ot("div",{"data-amp-bind-text":"('{{".concat(t,"stock}}' == '").concat(u({id:"components.sk.components.shopify.productDetails.price.inStock",defaultMessage:"In Stock"}),"') ? '' : '").concat(u({id:"components.sk.components.shopify.productDetails.quantity.outOfStock",defaultMessage:"OUT OF STOCK"}),"'"),"data-amp-bind-class":"('{{".concat(t,"stock}}' == '").concat(u({id:"components.sk.components.shopify.productDetails.price.inStock",defaultMessage:"In Stock"}),"') ? '' : 'product-options__size-button-no-stock'")})))};return Object(c.useSelector)((function(t){return t.webConfig})).isAMP?Ot(g.Row,{className:"product-options__row"},Ot(h.a,{index:p,id:"components.sk.components.shopify.productDetails.options.size",defaultMessage:"Select size"}),Ot("amp-list",{src:"amp-state:product",items:"variantSizesByType",width:"auto",height:"140",layout:"flex-item"},Ot("div",{placeholder:!0,className:"amp_loader"},Ot(i.FormattedMessage,{id:"components.sk.components.amp.loading",defaultMessage:"Loading..."})),Ot("template",{type:"amp-mustache"},Ot("amp-selector",{name:"size",layout:"container","data-amp-bind-selected":"product.selectedId",on:"select:AMP.setState({ product: { selectedId: event.targetOption, quantity: 1 }, nutriTab: 1, nutriId: product.formats[product.selectedFormat].nutriMetaIndex, prepId: product.variants[event.targetOption].prepMetaIndex, ampfrequency: { subscription: ampfrequency.subscription } })"},Ot("div",{className:"product-options__content product-options__content--size"},P("current."),"{{#items}}",P(""),"{{/items}}"))))):r.variants&&s?Ot(g.Row,{className:"product-options__row"},Ot(h.a,{index:p,id:"components.sk.components.shopify.productDetails.options.size",defaultMessage:"Select size"},r.variants.length>0&&Object(d.r)(r.variants)?Ot("div",{className:"product-options__label-formula"},Ot(g.Button,{onClick:a,className:"product-quantity__formula-calculator",ariaLabel:m},Ot("span",null,m)),Ot(gt,{formulaCalculatorVisible:n,handleFormulaCalculatorClick:a,product:r})):null),Ot("div",{className:"product-options__content product-options__content--size"},l?l.map((function(t){var a=t.id,o=t.isOutOfStock,n=t.title,r=t.price,i=t.pricePerUnitValue,c=t.pricePerUnit;return""!==n&&null!=c?Ot(g.Button,{onClick:a!==s.id?function(){return e(a)}:void 0,ariaLabel:n,key:a,className:y()("product-options__size-button",{"product-options__size-button--active":a===s.id&&!o},{"product-options__size-button--no-stock-active":a===s.id&&o},{"product-options__size-button--no-stock":a!==s.id&&o})},Ot("div",{className:"product-options__size-button-content"},i===j?Ot("div",{className:"product-options__size-button-value"},f):null,Ot("div",{className:"product-options__size-button-title"},n),Ot("div",{className:"product-options__size-button-perunit"},c),Ot("div",{className:y()("product-options__size-button-price",{"product-options__size-button-price--no-stock-active":a===s.id&&o},{"product-options__size-button-price--no-stock":a!==s.id&&o})},r),o?Ot("div",{className:"product-options__size-button-no-stock"},b):null)):null})):null)):null})),_t=a("o3ds"),jt=a("tQJn"),Pt=s.a.createElement,kt=function(t){var e=t.handleFormatChange,a=t.handleTypeChange,o=t.handleVariantChange,n=t.handleFormulaCalculatorClick,r=t.formulaCalculatorVisible,s=t.product,i=t.selectedVariant,c=t.variantFormats,l=t.variantTypes,u=t.variantSizesByType,p=[c.length>0&&P,s.variants&&l.length>0&&C,s.variants&&i&&ht,s.variants&&i&&jt.default].filter(Boolean);return Pt("div",{className:"product-options__wrapper"},Pt("h1",{className:"page-title"},s.title),p.map((function(t,p){return Pt("div",{className:"product-options",key:"optionView".concat(p)},Pt(t,{handleFormatChange:e,handleTypeChange:a,handleVariantChange:o,handleFormulaCalculatorClick:n,formulaCalculatorVisible:r,product:s,selectedVariant:i,variantFormats:c,variantTypes:l,variantSizesByType:u,index:p}))})),Pt(_t.a,{metafields:s.metafields}))},St=s.a.createElement;function Ct(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}var Mt=Object(i.injectIntl)((function(t){var e,a,i,v=t.productId,y=t.intl.formatMessage,g=Object(l.useRouter)(),O=Object(c.useDispatch)(),h=Object(c.useSelector)((function(t){return t.shopify})).products.find((function(t){return t.id===v})),_=Object(c.useSelector)((function(t){return Object(d.t)(t)(Object(l.useRouter)())}))||h,j=Object(d.v)(_)(Object(l.useRouter)()),P=Object(c.useSelector)((function(t){return t.currentVariant})),k=P.currentVariant,S=P.subscribeFrequencyType,C=Object(c.useSelector)((function(t){return t.shopify.config.cartConfiguration})),M=Object(r.useState)(j),D=M[0],F=M[1],N=Object(r.useState)(!1),V=N[0],I=N[1],T=Object(d.l)({variants:null===(e=_.variants)||void 0===e?void 0:e.map((function(t){return t.title}))}),E=Object(d.n)({variants:null===(a=_.variants)||void 0===a?void 0:a.map((function(t){return t.title})),selectedVariantTitle:null===D||void 0===D?void 0:D.title}),x=Object(r.useState)(!1),U=x[0],q=x[1];Object(r.useEffect)((function(){Object(f.c)().then((function(t){return q(t)}))}),[]);var z,L,B=Object(w.a)((null===C||void 0===C?void 0:C.snsItems)||[],_),R=B.isSpecialSnsEnabled,H=void 0===R?0:R,A=B.specialSnsDiscount,W=void 0===A?0:A,J=B.snsDiscount,K=Object(c.useSelector)((function(t){return t.webConfig})).isAMP,G=null===(i=_.variants)||void 0===i?void 0:i.map((function(t){var e,a,o=t.id,r=t.title,s=t.availableForSale,i=t.metafields,c=t.priceV2,l=t.compareAtPriceV2,u=t.parsedId,p=t.image,m=null===i||void 0===i?void 0:null===(e=i.find((function(t){return t.key===b.b})))||void 0===e?void 0:e.value,f=null===i||void 0===i?void 0:null===(a=i.find((function(t){return t.key===b.c})))||void 0===a?void 0:a.value,v=H&&!U&&"1"!==m?W:J,g=parseFloat(c.amount),O=S===b.h&&"1"!==f?function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ct(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},c,{amount:(g-g*(v/100)).toString()}):c;return Object(d.m)({id:o,availableForSale:s,metaFields:i,price:O,title:r,selectedVariantTitle:D?D.title:"",unitPrefix:y({id:"components.sk.components.shopify.productDetails.options.unitPrefix",defaultMessage:"per"}),comparePrice:l,parsedId:u,img:p,isAMP:K,collections:_.collections})})).filter((function(t){return t.id})),Q=Object(r.useCallback)((function(t){var e=_.variants&&_.variants.find((function(e){return e.title.includes(t)}));e&&(F(e),O(Object(u.c)({currentVariant:e})),O(Object(u.g)({isVariantSelected:!0})))}),[_,D]),Y=Object(r.useCallback)((function(t){var e=null===D||void 0===D?void 0:D.title.split("/")[0],a=_.variants&&_.variants.find((function(a){var o=a.selectedOptions,n=a.title,r=null===o||void 0===o?void 0:o.find((function(t){return"Type"===t.name}));return r&&r.value===t&&e&&n.includes(e)}));a&&(F(a),O(Object(u.c)({currentVariant:a})),O(Object(u.g)({isVariantSelected:!0})))}),[_,D]),Z=Object(r.useCallback)((function(t){I(t)}),[]),X=Object(r.useCallback)((function(t){var e=_.variants&&_.variants.find((function(e){return e.id===t}));e&&(F(e),O(Object(u.c)({currentVariant:e})),O(Object(u.g)({isVariantSelected:!0})))}),[_]);if(Object(r.useEffect)((function(){k&&F(k)}),[k]),Object(r.useEffect)((function(){var t=Object(d.v)(_)(g);O(Object(u.c)({currentVariant:t}))}),[_]),Object(r.useEffect)((function(){return _&&_.variants&&j&&(O(Object(u.c)({currentVariant:j})),O(Object(p.b)(_.id))),function(){O(Object(u.g)({isVariantSelected:!1}))}}),[]),K){var $=_.variants?_.variants[0]:null,tt={},et={};G&&G.forEach((function(t){Object.keys(tt).includes(t.format.trim())||(tt[t.format.trim()]=t.type.trim()),Object.keys(et).includes(t.type.trim())||(et[t.type.trim()]=t.id)}));var at=(L="type",(z=G).map((function(t){return t[L]})).map((function(t,e,a){return a.indexOf(t)===e&&e})).filter((function(t){return z[t]})).map((function(t){return z[t]}))),ot={};T&&T.forEach((function(t,e){ot[t.trim()]={nutriMetaIndex:e}}));var nt=function(t){var e=G?G.filter((function(e){return!e.isOutOfStock&&e.type.trim()===t})).map((function(t){return t.pricePerUnitValue})):[],a=Math.min.apply(Math,Object(o.a)(e)),n=e.filter((function(t){return t===a})).length>1;return 1===e.length||n?-1:a},rt={};G&&G.forEach((function(t,e){var a,o,n,r=0;_.images&&_.images.forEach((function(e,a){t.imageSrc===e.originalSrc&&(r=a)}));var s=null===(a=_.metafields)||void 0===a?void 0:null===(o=a.find((function(t){return"original_to_hidden_variant_map"===t.key})))||void 0===o?void 0:o.value,i=s?Object(m.a)(JSON.parse(s)):{},c=t.parsedId&&(null===(n=i[t.parsedId])||void 0===n?void 0:n.discountVariantId);rt[t.id]={id:t.id||null,type:t.type?t.type.trim():null,title:t.title?t.title.trim():null,parsedId:t.parsedId?t.parsedId.replace("'",""):null,variantId:c,pricePerUnit:t.pricePerUnit||null,price:t.ampAmount||null,comparePrice:t.compareAmount||null,discountedPrice:t.ampDiscountedAmount||null,snsDiscountedPrice:t.ampSnsDiscountedAmount||null,stock:y({id:t.isOutOfStock?"components.sk.components.shopify.productDetails.price.outOfStock":"components.sk.components.shopify.productDetails.price.inStock",defaultMessage:t.isOutOfStock?"Out of Stock":"In Stock"}),prepMetaIndex:e,slide:r}}));var st={variantFormats:[{current:{format:T[0]?T[0].trim():null},items:T&&T.slice(1).map((function(t){return{format:t?t.trim():null}}))}],variantTypes:[{current:{format:T[0]?T[0].trim():null,type:E[0]?E[0].trim():null,typeClass:E[0]?E[0].trim().toLowerCase().split(" ").join("-"):null},items:at&&at.slice(1).map((function(t){return{format:t.format?t.format.trim():null,type:t.type?t.type.trim():null,typeClass:t.type?t.type.trim().toLowerCase().split(" ").join("-"):null}}))}],selectedFormat:T[0]?T[0].trim():null,selectedType:E[0]?E[0].trim():null,selectedId:G&&G[0].id||null,defaultVariantTypes:tt,defaultVariantSizesByType:et,quantity:1,handle:_.handle||null,variantSizesByType:[{current:G?{id:G[0].id||null,type:G[0].type?G[0].type.trim():null,title:G[0].title?G[0].title.trim():null,pricePerUnit:G[0].pricePerUnit||null,price:G[0].price||null,bestValue:G[0].pricePerUnitValue&&G[0].type&&G[0].pricePerUnitValue===nt(G[0].type.trim())?y({id:"components.sk.components.shopify.productDetails.quantity.bestValue",defaultMessage:"BEST VALUE"}):null,stock:y({id:G[0].isOutOfStock?"components.sk.components.shopify.productDetails.price.outOfStock":"components.sk.components.shopify.productDetails.price.inStock",defaultMessage:G[0].isOutOfStock?"Out of Stock":"In Stock"})}:{},items:G&&G.slice(1).map((function(t){return{id:t.id||null,type:t.type?t.type.trim():null,title:t.title?t.title.trim():null,pricePerUnit:t.pricePerUnit||null,price:t.ampAmount||null,bestValue:t.pricePerUnitValue&&t.type&&t.pricePerUnitValue===nt(t.type.trim())?y({id:"components.sk.components.shopify.productDetails.quantity.bestValue",defaultMessage:"BEST VALUE"}):null,stock:y({id:t.isOutOfStock?"components.sk.components.shopify.productDetails.price.outOfStock":"components.sk.components.shopify.productDetails.price.inStock",defaultMessage:t.isOutOfStock?"Out of Stock":"In Stock"})}}))}],formats:ot,variants:rt};return St(s.a.Fragment,null,St("amp-state",{id:"product"},St("script",{type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify(st)}})),St(kt,{handleFormatChange:Q,handleTypeChange:Y,handleVariantChange:X,handleFormulaCalculatorClick:Z,formulaCalculatorVisible:V,product:_,selectedVariant:$,variantFormats:T,variantTypes:E,variantSizesByType:G}))}return St(kt,{handleFormatChange:Q,handleTypeChange:Y,handleVariantChange:X,handleFormulaCalculatorClick:Z,formulaCalculatorVisible:V,product:_,selectedVariant:D,variantFormats:T,variantTypes:E,variantSizesByType:G})}))}}]);