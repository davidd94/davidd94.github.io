this.analytics=this.analytics||{},this.analytics.js=function(e){"use strict";function t(e,t){if(0==e.length)return[];for(var n=[],r=0;r<e.length;r++){var a=e[r];t(a)&&n.push(a)}return n}function n(e,t,n,r){void 0===r&&(r=!1);var a="",o=r?"; secure":"";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),a="; expires="+i.toUTCString()}document.cookie=e+"="+t+a+"; path=/"+o}function r(e,t,n){var r="";if(n){var a=new Date;a.setTime(a.getTime()+60*n*60*1e3),r="; expires="+a.toUTCString()}document.cookie=e+"="+t+r+"; path=/"}function a(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var a=n[r];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}function o(e){return null==e}var i,u=(i=o,function(e){return!i(e)});function s(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var a=new XMLHttpRequest;if("withCredentials"in a)a.open(e,t,r),a.withCredentials=n;else{if("undefined"==typeof XDomainRequest)return null;(a=new XDomainRequest).open(e,t)}return a}var _="sandbox",c=new RegExp("^[a-z-]*(fe|jp)[a-z.-]*$"),d=new RegExp("^[a-z-]*(eu|uk|de)[a-z.-]*$"),f="https://",l=function(e,t){for(var n=[],r=e.length,a=0;a<r;a++){var o=e[a];n.push(t(o))}return n}(["payments","payments-eu","payments-sandbox","payments-eu-sandbox","payments-fe","pmt.integ","payments-eu.integ","payments-fe.integ","payments-preprod","payments-eu-preprod-dub.dub.proxy","payments-jp-preprod"],function(e){return"https://"+e+".amazon.com/checkout/signin"});function p(e){return!!e&&l.indexOf(e.action)>=0}function T(e,n){if(e){var r=t(Array.prototype.slice.call(e.querySelectorAll("input[type=hidden]")),function(e){return e.name==n})[0];if(r)return r.value}return"unknown"}function E(e){return p(e)?(t=e.action,(n=document.createElement("a")).href=t,n.hostname):null;var t,n}function m(e){return d.test(e)?"UK":c.test(e)?"JP":"US"}function h(e){return d.test(e)?"GBP":c.test(e)?"JPY":"USD"}function g(e){var t=T(e,_);return"unknown"!=t&&"true"==t}function N(e){for(var n=0,r=function(e){var n;return e?e instanceof HTMLElement&&(n=e.querySelectorAll("form")):n=document.querySelectorAll("form"),n?t(Array.prototype.slice.call(n),p):[]}(e);n<r.length;n++){var a=r[n];if(p(a))return a}return null}var A="apay-session-set",O={en:"en_US",fr:"fr_FR",it:"it_IT",es:"es_ES",de:"de_DE",ja:"ja_JP","en-us":"en_US","en-gb":"en_GB","fr-fr":"fr_FR","it-it":"it_IT","es-es":"es_ES","de-de":"de_DE","ja-jp":"ja_JP"},I=[],v="/gp/widgets/sessionstabilizer",S=365,y="true",U=!1;function C(){var e,t,n=N();if(n){var r=E(n);if(r)return""+f+r+v+"?"+(e={countryOfEstablishment:m(r),ledgerCurrency:h(r),isSandbox:g(n)},t=["originDomain","returnDomain"],Object.keys(e).map(function(n){return o(e[n])?null:n+"="+(t.indexOf(n)>-1?e[n]:encodeURIComponent(e[n]))}).filter(u).join("&"))}return null}function R(e,t){if(null!=a(A))e();else if(I.push(e),!U){var r=t||C();if(U=!0,r){var o=s("GET",r,!0);o&&(o.onload=function(){if(U=!1,o&&200===o.status){var e=JSON.parse(o.responseText);e&&(y=e.apaySessionSet)}for(n(A,y,S,!0);I.length>0;){var t=I.pop();"function"==typeof t&&t()}},o.send())}}}var D={HTML_BUTTON_RENDER:"apay-html-button-render",HTML_BUTTON_RENDER_TAG:"pwa",SUB_PAGE_TYPE:"sub-page-type",CSS_BUTTON:"css_button",PAGE_ACTION:"page-action",ADDITIONAL_REQUEST_DATA:"additional-request-data",MERCHANT_DOMAIN_KEY:"window",SESSION_ID:"session-id",CORS_FAILURE:"cors-failure",INVALID_RESPONSE:"invalid-response",LATENCY:"cookie-creation-latency",MAXO_BUTTON:"maxo-button",MAXO_BUTTON_RENDER:"maxo-button-render",MAXO_BUTTON_REDIRECT:"maxo-button-redirect",MAXO_BUTTON_CLICK:"maxo-button-click",MAXO_BUTTON_TAG:"maxo-button-tag",MAXO_BUTTON_RENDER_LATENCY:"maxo-button-render-latency",MAXO_BUTTON_REDIRECT_LATENCY:"maxo-button-redirect-latency",MAXO_BUTTON_DESIGN:"button-design",MAXO_BUTTON_COLOR:"color",BUTTON_PLACEMENT:"button-placement",CHECKOUT_SESSION_PRODUCT_TYPE:"checkout-session-product-type",CHANGE_SHIPPING_ADDRESS:"change-shipping-address",CHANGE_PAYMENT_METHOD:"change-payment-method",CHECKOUT_SESSION_ID:"checkout-session-id",MAXO_ADDITIONAL_INFO:"maxo-additional-info",INTEGRATION_TYPE:"integration-type",MAXO_DEFAULT_INTEGRATION:"maxo-default-integration",SIGNATURE_BUTTON_SESSION_CONFIG:"maxo-button-signature-session-config",SIGNATURE_BUTTON_OBJECT:"maxo-button-signature-object",SIGNATURE_BUTTON_REDIRECT:"maxo-button-signature-redirect",WEBLAB_DATA:"weblab-data",MAXO_BUTTON_VIEW_INITIATED:"maxo-button-view-initiated",VIEW_TYPE:"viewType"},b=function(e,t,r,o,i){var u="https://"+t+"/cs/uedata",_=function(){var t,_,c=s("POST",u,!0);c&&(i||(t=e,_={name:D.SESSION_ID,value:a(D.SESSION_ID)},t.addInfo(_)),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.onload=function(){},c.send(e.toQueryString()+"&countryOfEstablishment="+r+"&ledgerCurrency="+o),c.onerror=function(){c&&0===c.status&&!a("amazon-pay-cors-blocked-status")&&navigator.userAgent.match(/Firefox/i)&&n("amazon-pay-cors-blocked-status","true",1/24)},c&&4===c.readyState&&200===c.status&&e.reset())};!0===i?_():R(_)};var B,w,L=function(){function e(e,t){this.merchantId=e,this.metrics={counters:[],timings:[],info:[]},this.metricsPublisher=t}return e.prototype.addCounter=function(e){this.metrics.counters.push(e)},e.prototype.addTiming=function(e){this.metrics.timings.push(e)},e.prototype.addInfo=function(e){this.metrics.info.push(e)},e.prototype.publish=function(e){this.metricsPublisher&&this.metricsPublisher(this,e)},e.prototype.reset=function(){this.metrics.timings=[],this.metrics.counters=[]},e.prototype.toQueryString=function(){return"sellerId="+this.merchantId+"&data="+encodeURIComponent(JSON.stringify(this.metrics))},e}(),x="merchantId";function P(){if(w)return w;var e=N();if(e){B=E(e);var t=T(e,x);w=new L(t);var n={name:D.SUB_PAGE_TYPE,value:D.CSS_BUTTON},r={name:D.PAGE_ACTION,value:D.HTML_BUTTON_RENDER},a=D.MERCHANT_DOMAIN_KEY+":"+window.location.host,o={name:D.ADDITIONAL_REQUEST_DATA,value:a};return w.addInfo(n),w.addInfo(r),w.addInfo(o),w}return null}function H(){var e,t,n;e=D.HTML_BUTTON_RENDER,t={name:e,tags:[D.HTML_BUTTON_RENDER_TAG]},(n=P())&&n.addCounter(t)}var M={apchsHost:"https://apay-us.amazon.com",defaultAuthUIHost:"https://apay-us.amazon.com",authUIHostByLang:{en_US:"https://apay-us.amazon.com",en_GB:"__en_GB_authUIHost__",it_IT:"__it_IT_authUIHost__",de_DE:"__de_DE_authUIHost__",es_ES:"__es_ES_authUIHost__",fr_FR:"__fr_FR_authUIHost__",ja_JP:"__ja_JP_authUIHost__"},microTextVersion:{it_it:"_CB1558571088_",de_de:"_CB1558571088_",es_es:"_CB1558571088_",fr_fr:"_CB1558571088_",en_us:"_CB1558571088_",en_gb:"_CB440556592_",ja_jp:"_CB1568869902_"},coe:{USD:"US",EUR:"DE",GBP:"UK",JPY:"JP"},regionCode:"01",allowedLedgerCurrencies:"USD",domainFallbackLanguage:"en_US",allowedCheckoutLanguages:"en_US",supportedBrowserLanguages:"en,en-us"};var G="amazon-pay-connectedAuth",k={CONNECTEDAUTH_GENERAL:"connectedAuth_general",LWA_GENERAL:"lwa_general"},j="language",X="apay-session-set",z="isConnectedAuth",Y="language",F="apst",J="originURL";function q(e,t,n){if(n){var r=document.createElement("input");r.type="hidden",r.name=t,r.value=n,e.appendChild(r)}}function K(e){var t=T(e,Y);if("unknown"!==t)return t.replace("-","_");var n=function(){var e=navigator.languages;if(o(e)&&!o(navigator.language)&&(e=[navigator.language]),!o(e))for(var t=0;t<e.length;t++)if(M.supportedBrowserLanguages.split(",").indexOf(e[t].toLowerCase())>-1)return O[e[t].toLowerCase()];return null}();return n&&q(e,Y,n.replace("_","-")),n}function Q(e,t){var n;if(n=t||N()){e(),r(G,k.CONNECTEDAUTH_GENERAL,1),q(n,z,"true"),q(n,J,window.location.origin);var o=a(X);o&&q(n,F,o);var i=K(n);i&&r(j,i,1),b(w,B,m(B),h(B))}}var V=document.body;function W(e){Q(H,e)}W();return new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){var t=N(e);t&&W(t)})})}).observe(V,{childList:!0,subtree:!0}),e.onAmazonPayFormReady=W,e}({});
