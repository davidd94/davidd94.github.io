(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{pREp:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return Ct}));a("HAE/"),a("WLL4"),a("jm62"),a("ioFf"),a("pIFo");var o=a("KQm4"),n=(a("V+eJ"),a("Tze0"),a("rGqo"),a("yt8O"),a("RW0V"),a("8+KV"),a("f3/d"),a("KKXr"),a("Z2Ku"),a("L9s1"),a("a1Th"),a("h7Nl"),a("Btvt"),a("rePB")),r=(a("0l/t"),a("bWfx"),a("dRSK"),a("q1tI")),s=a.n(r),i=a("JRPe"),c=a("ZqbR"),l=a("nOHt"),u=a("ex4G"),p=a("JfNZ"),d=a("bnQg"),m=a("77NR"),f=a("Dczv"),b=a("aM5I"),y=a("TSYQ"),v=a.n(y),g=a("RMmg"),O=a("gIis"),h=a("3aMu"),_=s.a.createElement;function j(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}var P=Object(i.injectIntl)((function(t){var e=t.handleFormatChange,a=t.selectedVariant,o=t.variantFormats,r=t.index,s=a?Object(d.o)(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?j(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},{title:a.title,variantOption:d.f.format})):"",l=function(t){var e=t.trim().toLowerCase();return e=O.f[e]?O.f[e]:e,a&&s===e},u=Object(c.useSelector)((function(t){return t.webConfig})).isAMP,p=function(t){return _(g.Button,{type:"button",option:"{{".concat(t,"format}}"),ariaLabel:"{{".concat(t,"format}}"),className:"product-options__button","data-amp-bind-class":"(product.selectedFormat == '{{".concat(t,"format}}') ? 'product-options__button  product-options__button--active' : 'product-options__button'")},"{{".concat(t,"format}}"))};return _(g.Row,{className:"product-options__row"},_(h.a,{index:r,id:"components.sk.components.shopify.productDetails.options.format",defaultMessage:"Select format"}),u?_("amp-list",{src:"amp-state:product",items:"variantFormats",width:"auto",height:"60",layout:"flex-item"},_("div",{placeholder:!0,className:"amp_loader"},_(i.FormattedMessage,{id:"components.sk.components.amp.loading",defaultMessage:"Loading..."})),_("template",{type:"amp-mustache"},_("amp-selector",{name:"format",layout:"container","data-amp-bind-selected":"product.selectedFormat",on:"select:AMP.setState({ product: { selectedFormat: event.targetOption, selectedType: product.defaultVariantTypes[event.targetOption], selectedId: product.defaultVariantSizesByType[product.defaultVariantTypes[event.targetOption]], quantity: 1 }, nutriTab: 1, nutriId: product.formats[event.targetOption].nutriMetaIndex, prepId: product.variants[product.selectedId].prepMetaIndex, ampfrequency: { subscription: ampfrequency.subscription } })"},_("div",{className:"product-options__content product-options__content--format"},p("current."),"{{#items}}",p(""),"{{/items}}")))):_("div",{className:"product-options__content product-options__content--format"},o.map((function(t){return _(g.Button,{onClick:l(t)?void 0:function(){return e(t)},ariaLabel:t,key:t,className:v()("product-options__button",{"product-options__button--active":l(t)})},t)}))))})),k=s.a.createElement;function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}var C=Object(i.injectIntl)((function(t){var e=t.handleTypeChange,a=t.selectedVariant,o=t.variantTypes,r=t.index,s=function(t){var e=t.replace(d.g,"-").toLowerCase();return O.d[e]||e},l=Object(c.useSelector)((function(t){return t.webConfig})).isAMP,u=function(t){return k(g.Button,{type:"button",option:"{{".concat(t,"type}}"),ariaLabel:"{{".concat(t,"type}}"),className:"product-options__button product-options__button-{{current.type}}","data-amp-bind-class":"(product.selectedFormat == '{{".concat(t,"format}}' ? 'product-options__button' : 'element-hidden')+' '+(product.selectedType == '{{").concat(t,"type}}' ? 'product-options__button-{{").concat(t,"typeClass}} product-options__button--active product-options__button-{{").concat(t,"typeClass}}--active' : 'product-options__button product-options__button-{{").concat(t,"typeClass}}')")},"{{".concat(t,"type}}"))},p=a?Object(d.o)(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?S(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},{title:a.title,variantOption:d.f.type})):"",m=function(t){var e=t.trim().toLowerCase();return a&&(p===e||p===O.f[e])};return k(g.Row,{className:"product-options__row"},k(h.a,{index:r,id:"components.sk.components.shopify.productDetails.options.type",defaultMessage:"Select type"}),l?k("amp-list",{src:"amp-state:product",items:"variantTypes",width:"auto",height:"140",layout:"flex-item"},k("div",{placeholder:!0,className:"amp_loader"},k(i.FormattedMessage,{id:"components.sk.components.amp.loading",defaultMessage:"Loading..."})),k("template",{type:"amp-mustache"},k("amp-selector",{name:"type",layout:"container","data-amp-bind-selected":"product.selectedType",on:"select:AMP.setState({ product: { selectedType: event.targetOption, selectedId: product.defaultVariantSizesByType[event.targetOption], quantity: 1 }, nutriTab: 1, nutriId: product.formats[product.selectedFormat].nutriMetaIndex, prepId: product.variants[product.selectedId].prepMetaIndex, ampfrequency: { subscription: ampfrequency.subscription } })"},k("div",{className:"product-options__content product-options__content--type"},u("current."),"{{#items}}",u(""),"{{/items}}")))):k("div",{className:"product-options__content product-options__content--type"},o.map((function(t){return k(g.Button,{onClick:m(t)?void 0:function(){return e(t)},ariaLabel:t,key:t,className:v()("product-options__button product-options__button-".concat(s(t)),Object(n.a)({},"product-options__button--active product-options__button-".concat(s(t),"--active"),m(t)))},t)}))))})),M=(a("xfY5"),a("7h0T"),a("+21s")),D=a("LPWd"),F=a("z9QD"),N=a.n(F),w=a("4p/S"),V=(a("bHtr"),[{value:"1",key:"days",defaultMessage:"Day",pluralDefaultMessage:"Days",id:"components.sk.components.shopify.productDetails.formulaCalculator.durationDay",pluralId:"components.sk.components.shopify.productDetails.formulaCalculator.durationDay.plural"},{value:"7",key:"weeks",defaultMessage:"Week",pluralDefaultMessage:"Weeks",id:"components.sk.components.shopify.productDetails.formulaCalculator.durationWeek",pluralId:"components.sk.components.shopify.productDetails.formulaCalculator.durationWeek.plural"},{value:"30",key:"months",pluralDefaultMessage:"Months",defaultMessage:"Month",id:"components.sk.components.shopify.productDetails.formulaCalculator.durationMonth",pluralId:"components.sk.components.shopify.productDetails.formulaCalculator.durationMonth.plural"}]),I=[{value:"0-1",feddingHint:"6-8",volumeHint:"2-3"},{value:"1-2",feddingHint:"6-8",volumeHint:"4-5"},{value:"2-3",feddingHint:"6-8",volumeHint:"5-6"},{value:"3-6",feddingHint:"4-5",volumeHint:"6-8"},{value:"6-12",feddingHint:"3-4",volumeHint:"8"}],T=a("DIkY"),E=s.a.createElement;function x(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}var U=Object(i.injectIntl)((function(t){var e=t.options,a=t.placeholder,o=t.formulaParams,r=t.setFormulaParams,s=t.name,i=t.isError,c=t.intl.formatMessage;return E(T.a,{isSearchable:!1,key:s,className:v()("form-control__input form-control__input--select",{"form-control__input--error":i}),classNamePrefix:"select",options:e,onChange:function(t){var e,a=t.value,i=t.label;return r(function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?x(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},o,(e={},Object(n.a)(e,s,a),Object(n.a)(e,"".concat(s,"Label"),i),e)))},value:e.filter((function(t){return t.value===o[s]})),placeholder:a||c({id:"components.sk.components.shopify.productDetails.formulaCalculator.selectPlaceholder",defaultMessage:"Select one"})})})),q=a("wx14"),z=s.a.createElement;function L(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function B(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?L(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var R=function(t){var e=t.formulaParams,a=t.placeholder,o=t.setFormulaParams,r=t.name,s=t.errorMessage;return z("input",Object(q.a)({className:"form__input--text",type:"text",pattern:"[1-9]|[1-3][0-9]|[4][0]",required:!0,size:4,id:r,title:s,value:e[r],onBlur:function(t){var a;return o(B({},e,(a={},Object(n.a)(a,r,t.target.value),Object(n.a)(a,"valueForGtm",t.target.value),a)))},onChange:function(t){return o(B({},e,Object(n.a)({},r,t.target.value)))}},a?{placeholder:a}:{}))},H=s.a.createElement;function A(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function W(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?A(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var J=function(t){var e=t.hintValue,a=t.hintId,o=t.hintMessage;return H("div",{className:"form__label-hint"},e&&e!=={}?H(i.FormattedMessage,Object(q.a)({id:a,defaultMessage:o},{values:W({},e)})):null)},K=s.a.createElement,G=function(t){var e=t.controlFor,a=t.labelId,o=t.labelMessage,n=t.children,r=t.labelOptional;return K("div",{className:"form__control"},K("label",{className:"form__label",htmlFor:e},K(i.FormattedMessage,{id:a,defaultMessage:o}),r?K("span",{className:"form__label-optional"},r):null),n)},Q=s.a.createElement;function Z(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function Y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var X=function(t,e){return new Array(t).fill(1).map((function(t,a){return{value:(t+a).toString(),label:"".concat((t+a).toString()).concat(e||"")}}))},$=function(t){var e,a,o=t.formatMessage,n=t.formulaParams,c=t.setFormulaParams,l=t.submitFormulaForm,u=t.showResults,p=t.isNotSure,d=t.setIsNotSureForm,m=Object(r.useState)(!1),f=m[0],b=m[1],y=Object(r.useState)(!0),O=y[0],h=y[1],_=null===(e=I.find((function(t){return t.value===n.age})))||void 0===e?void 0:e.feddingHint,j=null===(a=I.find((function(t){return t.value===n.age})))||void 0===a?void 0:a.volumeHint,P=V.map((function(t){var e=t.value,a=t.id,n=t.defaultMessage;return Y({},{value:e,label:o({id:a,defaultMessage:n})})})),k=I.map((function(t){var e=t.value;return Y({},{value:e,label:"".concat(e," ").concat(o({id:"components.sk.components.shopify.productDetails.formulaCalculator.durationMonth",defaultMessage:"Month"}))})})),S=o({id:"components.sk.components.shopify.productDetails.formulaCalculator.notSure",defaultMessage:"I'm not sure"}),C=o({id:"components.sk.components.shopify.productDetails.formulaCalculator.back",defaultMessage:"Back"}),M=o({id:"components.sk.components.shopify.productDetails.formulaCalculator.changeResponses",defaultMessage:"Change responses"});return Q(g.Col,null,u?Q("div",{className:"formula-calculator__change-response-wrapper"},Q(g.Button,{onClick:function(){return b(!f)},className:v()("formula-calculator__change-response-button",{"formula-calculator__change-response-button--close":f}),ariaLabel:M},M)):null,f||!u?Q("form",{className:"form",onSubmit:function(t){t.preventDefault(),!p||""!==n.feedings&&""!==n.volume?(b(!!u&&!f),l()):h(!1)}},p?null:Q(s.a.Fragment,null,Q(G,{controlFor:"totalVolume",labelId:"components.sk.components.shopify.productDetails.formulaCalculator.totalInputVolume",labelMessage:"How many ounces of formula do you give your child every day?"},Q("div",{className:"form__placeholder-input"},Q(R,{formulaParams:n,setFormulaParams:c,placeholder:o({id:"components.sk.components.shopify.productDetails.formulaCalculator.inputPlaceholder",defaultMessage:"Amount"}),name:"totalVolume",errorMessage:o({id:"components.sk.components.shopify.productDetails.formulaCalculator.form.totalVolumeErrorText",defaultMessage:"Enter a number from 1 and 40"}),maxlength:"2"}),Q("div",{className:"form__placeholder-text"},Q(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.inputUnitsPlaceholder",defaultMessage:"fl oz"})))),Q(g.Button,{onClick:function(){return d(!0)},className:"formula-calculator__unsure-button",ariaLabel:S},Q("span",null,S))),p?Q(s.a.Fragment,null,Q(g.Button,{onClick:function(){return d(!1)},className:"formula-calculator__unsure-button",ariaLabel:C},Q("span",null,C)),Q(G,{controlFor:"age",labelId:"components.sk.components.shopify.productDetails.formulaCalculator.ageOfChild",labelMessage:"How old is your child?",labelOptional:o({id:"components.sk.components.shopify.productDetails.formulaCalculator.optional",defaultMessage:"Optional"})},Q(U,{options:k,formulaParams:n,setFormulaParams:c,name:"age"})),Q(G,{controlFor:"feedings",labelId:"components.sk.components.shopify.productDetails.formulaCalculator.inputFeedings",labelMessage:"How often does your little one drink formula?"},Q(J,{hintValue:_?{feedingHint:_}:null,hintId:"components.sk.components.shopify.productDetails.formulaCalculator.feedingHint",hintMessage:"Babies this age are typically fed {feedingHint} times a day."}),Q(U,{options:X(w.b.selectFormulaOption,o({id:"components.sk.components.shopify.productDetails.formulaCalculator.selectFrequencyText",defaultMessage:" times per day"})),formulaParams:n,setFormulaParams:c,name:"feedings",isError:!O&&""===n.feedings}),O||""!==n.feedings?null:Q(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.form.errorText",defaultMessage:" field is required"},(function(t){return Q("span",{className:"form__control-error-message"},"".concat(o({id:"components.sk.components.shopify.productDetails.formulaCalculator.form.feedingsErrorText",defaultMessage:"Feedings"})," ").concat(t))}))),Q(G,{controlFor:"volume",labelId:"components.sk.components.shopify.productDetails.formulaCalculator.inputVolume",labelMessage:"How much formula do you give your baby at each feeding?"},Q(J,{hintValue:j?{volumeHint:j}:null,hintId:"components.sk.components.shopify.productDetails.formulaCalculator.volumeHint",hintMessage:"Parents typically feed babies this age {volumeHint} fl oz of formula at a time."}),Q(U,{options:X(w.b.selectFormulaOption,o({id:"components.sk.components.shopify.productDetails.formulaCalculator.selectVolumeText",defaultMessage:" fl oz each"})),formulaParams:n,setFormulaParams:c,name:"volume",isError:!O&&""===n.volume}),O||""!==n.volume?null:Q(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.form.errorText",defaultMessage:" field is required"},(function(t){return Q("span",{className:"form__control-error-message"},"".concat(o({id:"components.sk.components.shopify.productDetails.formulaCalculator.form.volumeErrorText",defaultMessage:"Volume"})," ").concat(t))})))):null,Q("div",{className:"form__control"},Q("div",{className:"form__duration"},Q("label",{className:"form__label",htmlFor:"duration"},Q(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.duration",defaultMessage:"For what timeframe do you want to calculate your formula needs?"})),Q("div",{className:"form__duration-select"},Q(U,{options:X(w.b.selectTimeOption),formulaParams:n,setFormulaParams:c,name:"duration"}),Q(U,{options:P,formulaParams:n,setFormulaParams:c,name:"durationFactor"})))),Q("div",{className:"form__control"},Q(g.Button,{className:"form__submit",ariaLabel:o({id:"components.sk.components.shopify.productDetails.formulaCalculator.submit",defaultMessage:"Submit"}),type:"submit"},Q(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.submit",defaultMessage:"Submit"})))):null)},tt=a("ODXe"),et=a("usVm"),at=a("CZM4"),ot=s.a.createElement,nt=function(t){var e=t.image,a=e.originalSrc,o=e.altText,n=t.bgColor,r=t.title,s=Object(at.a)(n||""),i=Object(tt.a)(s,2),c=i[0],l=i[1];return ot(g.Col,null,ot("div",{style:l?{background:l}:{},className:"product product--".concat(c)},ot(et.default,{className:"product__image",image:{url:a,altText:o}}),ot("div",{className:"product__desc"},ot("p",{className:"product__title"},r))))},rt=(a("SRfc"),a("RndJ")),st=a("GJcV"),it=s.a.createElement;function ct(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}var lt=Object(i.injectIntl)((function(t){var e,a,o,l,u=t.id,p=t.minPricePerUnit,d=t.title,f=t.image,y=t.product,O=t.currencyCode,h=t.availableForSale,_=t.currentFormat,j=t.formulaCalculatorResults,P=t.getLabelText,k=t.formatMessage,S=k({id:"components.sk.components.shopify.productDetails.quantity.bestValue",defaultMessage:"BEST VALUE"}),C=Object(c.useSelector)((function(t){return t})),D=C.shopify.config.configuration,F=D.shopCheckoutNowUrl,N=D.shopSubscribeUrl,w=C.intl.locale,V=new URL(F);V.searchParams.set("variant_id",u),V.searchParams.set("quantity",j.quantity.toString()),V.searchParams.set("redirection","1"),w===b.a&&V.searchParams.set("locale",b.a);var I=Object(r.useState)(b.e),E=I[0],x=I[1],U=Object(r.useState)(j.frequencyData.length>0?j.frequencyData[0]:""),q=U[0],z=U[1],L=(null===(e=j.frequencyData)||void 0===e?void 0:e.length)?j.frequencyData.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ct(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},{value:t,label:"".concat(k({id:"components.sk.components.shopify.productDetails.options.deliverEvery",defaultMessage:"Deliver every"})," ").concat(t)})})):[],B=new URL(N),R=null===(a=y.metafields)||void 0===a?void 0:null===(o=a.find((function(t){return t.key===b.f})))||void 0===o?void 0:o.value,H=R?Object(m.a)(JSON.parse(R)):{};B.searchParams.set("default_id",u),B.searchParams.set("variant_id",null===(l=H[u])||void 0===l?void 0:l.discountVariantId),B.searchParams.set("quantity",j.quantity.toString()),B.searchParams.set("handle",y.handle);var A=q.split(" ");B.searchParams.set("frequency",A[0]),B.searchParams.set("unit_type",A[1]),w===b.a&&B.searchParams.set("locale",b.a);var W=j.totalPrice-j.totalPrice*(j.discountPercent/100);return it("div",{className:"results__item-wrapper",role:"presentation",onClick:function(t){return t.stopPropagation()}},it("div",{className:"results__item"},j.pricePerUnit===p?it("div",{className:"results__item-flag"},S):null,it("label",{className:"results__item-label",htmlFor:u},it("div",{className:"results__item-quantity-container"},it("span",{className:"results__item-quantity"},P({quantity:j.quantity,title:d,suffix:j.suffix})),it(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.resultCardQuantity",defaultMessage:" {totalWeight} {variantUnit} of {currentFormat}",values:{totalWeight:j.totalWeight,variantUnit:j.units,currentFormat:_}},(function(t){return it("span",{className:"results__item-weight-details"},t)})))),it("div",{className:"results__item-variant-container"},f?it(et.default,{className:"results__item-image",image:{url:f.mobileSrc,altText:f.altText}}):null,it("div",{className:"results__item-title-wrapper"},it("div",{className:"results__item-title"},y.title),it("div",{className:"results__item-type"},it("span",{className:"results__item-type-title"},d.split("/")[2]||d.split("/")[1]),it("span",{className:"results__item-type-quantity"},"x".concat(j.quantity))))),it("div",{className:"results__item-frequency-container"},it(g.Button,{ariaLabel:k({id:"components.sk.components.shopify.productDetails.formulaCalculator.resultsPrice",defaultMessage:"One-time order"}),className:v()("results__item-price-wrapper",{"results__item-price-wrapper--active":E===b.e}),onClick:function(){return x(b.e)}},it("div",{className:"results__item-price-title"},it(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.resultsPrice",defaultMessage:"One-time order"})),it("div",{className:"results__item-unit-wrapper"},it("div",{className:"results__item-price"},Object(M.b)(j.totalPrice,O)),it("div",{className:"results__item-price-unit"},j.pricePerUnitText))),j.isSnsEnabled&&H[u]&&it(s.a.Fragment,null,it(g.Button,{className:v()("results__item-price-wrapper",{"results__item-price-wrapper--active":E===b.h}),ariaLabel:k({id:"components.sk.components.shopify.productDetails.formulaCalculator.subscribe",defaultMessage:"Subscribe & save"}),onClick:function(){return x(b.h)}},it("div",{className:"results__item-price-title"},it(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.subscribe",defaultMessage:"Subscribe & save"})," ".concat(j.discountPercent,"%")),it("div",{className:"results__item-unit-wrapper"},it("div",{className:"results__item-price"},Object(M.b)(W,O)),it("div",{className:"results__item-price-unit"},j.snsPricePerUnitText))),E===b.h&&it(T.a,{classNamePrefix:"select",className:"form-control__input form-control__input--select",options:L,onChange:function(t){var e=t.value;return z(e)},value:L.filter((function(t){return t.value===q})),isSearchable:!1,maxMenuHeight:100}))),it("div",{className:"results__add-to-cart"},h&&it("div",{className:"product-options__button-container product-cta product-cta--wrapper"},it(st.default,{className:"product-options__button-add",to:E===b.h?B.toString():V.toString(),target:"_self"},it(i.FormattedMessage,{id:h?"components.sk.components.shopify.productDetails.addToCart":"components.sk.components.shopify.productDetails.soldOut",defaultMessage:h?"Add to cart":"Sold Out"}))))))})),ut=s.a.createElement,pt=Object(i.injectIntl)((function(t){var e=t.formatMessage,a=t.enhancedVariants,n=t.product,r=t.duration,s=t.durationFactor,c=t.currentFormat,l=t.calculatedVolume,u=t.baseUnit,p=V.find((function(t){return t.value===s})),m=Number(r)>1,f="".concat(r," ").concat(e({id:p?m?p.pluralId:p.id:"",defaultMessage:m?null===p||void 0===p?void 0:p.pluralDefaultMessage:null===p||void 0===p?void 0:p.defaultMessage})),b=function(t){var a=t.name,o=t.quantity,n=a.replace(d.a," ").trim().replace(d.g,"_").toLowerCase();return e(o>1?{id:"components.sk.components.shopify.productDetails.pack.".concat(n,".plural"),defaultMessage:a}:{id:"components.sk.components.shopify.productDetails.pack.".concat(n),defaultMessage:a})},y=a.map((function(t){var e;return null===(e=t.formulaCalculatorResults)||void 0===e?void 0:e.pricePerUnit})),v=Math.min.apply(Math,Object(o.a)(y)),O=y.filter((function(t){return t===v})).length>1,h=1===y.length||O?-1:v,_=function(t){var e=t.quantity,a=t.title,o="case"===t.suffix.toLowerCase(),n=(o?a.split("(")[1].match(d.b):1)*e;return"".concat(n," ").concat(b({name:a.split("/")[1]&&a.split("/")[1].trim(),quantity:n})).concat(o?"(".concat(e," ").concat(b({name:"case",quantity:e}),")"):"",":")};return ut(g.Col,null,ut("div",{className:"results"},ut(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.resultsTitle",defaultMessage:"Based on your responses, you\u2019ll need at least {minFormula} {formatUnit} for {durationText}",values:{minFormula:l.toFixed(2),formatUnit:u,durationText:f}},(function(t){return ut("h3",{className:"results__title"},t)})),ut("div",{className:"results__desc"},ut(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.resultsDescription",defaultMessage:"Here are a few options from closest to what you need, to slightly more at a better value. "})),ut("div",{className:"results__items"},ut(rt.a,{slidesToShow:1.1,cellAlign:"center"},a.map((function(t){var a=t.id,o=t.availableForSale,r=t.title,s=t.formulaCalculatorResults,i=t.priceV2.currencyCode,l=t.image,u=t.parsedId;return s?ut(lt,Object(q.a)({key:a},{id:u,formulaCalculatorResults:s,availableForSale:o,title:r,currencyCode:i,image:l,minPricePerUnit:h,getLabelText:_,product:n,currentFormat:c,formatMessage:e})):null}))))))})),dt=s.a.createElement,mt=Object(i.injectIntl)((function(t){var e,a=t.clearFormulaCalculatorState,o=t.product,n=t.product,r=n.images,s=n.title,c=n.metafields,l=t.formulaCalculatorVisible,u=t.intl.formatMessage,p=t.formulaParams,d=t.setFormulaParams,m=t.submitFormulaForm,f=t.enhancedVariants,b=t.showResults,y=t.currentFormat,v=t.calculatedVolume,O=t.baseUnit,h=t.isNotSure,_=t.setIsNotSureForm,j=t.imageIndex,P=void 0===j?0:j;return dt(g.Modal,{className:"formula-calculator",isOpen:l,onRequestClose:a},dt(g.Button,{className:"formula-calculator__close",onClick:a,ariaLabel:u({id:"components.sk.components.shopify.productDetails.formulaCalculator.close",defaultMessage:"Close"})},dt(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.close",defaultMessage:"Close"})),dt(g.Col,null,dt("h3",{className:"formula-calculator__title"},dt(i.FormattedMessage,{id:"components.sk.components.shopify.productDetails.formulaCalculator.title",defaultMessage:"Formula Calculator"}))),dt(nt,{image:r[P],bgColor:null===c||void 0===c?void 0:null===(e=c.find((function(t){return"pdp-bgcolor"===t.key})))||void 0===e?void 0:e.value,title:s}),dt($,{formatMessage:u,formulaParams:p,setFormulaParams:d,submitFormulaForm:m,showResults:b,isNotSure:h,setIsNotSureForm:_}),b?dt(pt,{formatMessage:u,enhancedVariants:f,product:o,duration:p.duration,durationFactor:p.durationFactor,currentFormat:y,calculatedVolume:v,baseUnit:O}):null)})),ft=(a("E0cn"),s.a.createElement);function bt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}function yt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?bt(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):bt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var vt=Object(i.injectIntl)((function(t){var e,a,n=t.handleFormulaCalculatorClick,s=t.product,i=t.product.variants,l=t.formulaCalculatorVisible,u=t.intl.formatMessage,p=Object(r.useState)({baseUnit:"",calculatedVolume:0}),m=p[0],y=p[1],v=Object(r.useState)(!1),g=v[0],O=v[1],h=Object(r.useState)(!1),_=h[0],j=h[1],P={feedings:"",volume:"",duration:"1",durationFactor:"30",totalVolume:"",age:"",ageLabel:"",feedingsLabel:"",volumeLabel:"",durationFactorLabel:"Month",valueForGtm:""},k=Object(r.useState)(!1),S=k[0],C=k[1];Object(r.useEffect)((function(){Object(f.c)().then((function(t){return C(t)}))}),[]);var F=Object(c.useSelector)((function(t){return t.shopify.config.cartConfiguration})),V=!!F&&(F.excludeSnsVariants&&F.excludeSnsVariants.find((function(t){return s.id===t}))),I=!(!F||V)&&F.isSnsEnabled,T=F?F.snsFrequency:[],E=F?F.snsDiscount:0,x=!!F&&F.isSpecialSnsEnabled,U=F?F.specialSnsDiscount:0,q=Object(r.useState)(P),z=q[0],L=q[1],B=Object(r.useState)(i),R=B[0],H=B[1],A=Object(r.useState)(!1),W=A[0],J=A[1],K=Object(c.useSelector)((function(t){return t.currentVariant})).currentVariant,G=null===K||void 0===K?void 0:null===(e=K.title)||void 0===e?void 0:e.split("/")[0],Q=parseInt(z.feedings,10),Z=parseInt(z.volume,10),Y=parseInt(z.duration,10)*parseInt(z.durationFactor,10),X=parseInt(z.totalVolume,10),$=Number.isNaN(X)||!Number.isNaN(Q)?Q*Z*Y:X*Y,tt=function(t){N()(z,P)||D.b.dispatch(D.a.formulaCalculatorStep,{formulaCalculatorStep:t,formulaParams:z,baseResultOptions:m,isNotSure:g})},et=function(){var t=[];R.forEach((function(e){var a,o,n,r,s=e.formulaCalculatorParams,i=Math.ceil($/Number(s.yield)),c=function(t,e,a){var o=t.weight,n=t.price,r=t.units,s=Object(d.y)(n/parseInt(o,10)),i=s-s*(a/100);return{pricePerUnit:s,pricePerUnitText:"".concat(Object(M.b)(s.toFixed(2),e)," ").concat(u({id:"components.sk.components.shopify.productDetails.options.unitPrefix",defaultMessage:"per"})," ").concat(r),snsPricePerUnit:i,snsPricePerUnitText:"".concat(Object(M.b)(i.toFixed(2),e)," ").concat(u({id:"components.sk.components.shopify.productDetails.options.unitPrefix",defaultMessage:"per"})," ").concat(r)}}(s,e.priceV2.currencyCode,E),l=c.pricePerUnit,p=c.pricePerUnitText,m=c.snsPricePerUnit,f=c.snsPricePerUnitText,y=Object(d.y)(i*s.price),v=Object(d.y)(i*Number(s.weight)),g=null===(a=e.metafields)||void 0===a?void 0:null===(o=a.find((function(t){return t.key===b.c})))||void 0===o?void 0:o.value,O=null===(n=e.metafields)||void 0===n?void 0:null===(r=n.find((function(t){return t.key===b.b})))||void 0===r?void 0:r.value;x&&!S&&"1"!==O&&(E=U),t.push(yt({},e,{formulaCalculatorResults:{quantity:i,pricePerUnit:l,pricePerUnitText:p,snsPricePerUnit:m,snsPricePerUnitText:f,totalPrice:y,totalWeight:v,isSnsEnabled:I&&"1"!==g,frequencyData:T,discountPercent:E,suffix:s.suffix,units:s.units}}))}));var e=Math.min.apply(Math,Object(o.a)(t.map((function(t){return t.formulaCalculatorResults.quantity})))),a=t.find((function(t){return t.formulaCalculatorResults.quantity===e}));if(a&&a.metafields){var n=Object(d.k)(d.c.yield,a.metafields),r=Object(d.k)(d.c.weight,a.metafields),s=n&&r?Number(n)/Number(r):1;y({baseUnit:Object(d.k)(d.c.units,a.metafields),calculatedVolume:$/s})}H(t),J(!0)};Object(r.useEffect)((function(){_&&(tt(w.a.result6),j(!1))}),[m]),Object(r.useEffect)((function(){tt(w.a.time5)}),[z.duration,z.durationFactor]),Object(r.useEffect)((function(){tt(w.a.intro1)}),[z.age]),Object(r.useEffect)((function(){tt(w.a.quantity2)}),[z.feedings]),Object(r.useEffect)((function(){tt(w.a.formula3)}),[z.volume]),Object(r.useEffect)((function(){tt(w.a.format4)}),[z.valueForGtm]);Object(r.useEffect)((function(){!function(){var t=[];i.forEach((function(e){var a={price:parseFloat(e.priceV2.amount),yield:"",weight:"",units:"",suffix:"",age:""};e&&e.metafields&&e.metafields.forEach((function(t){var e=t.namespace,o=t.key,n=t.value;e===d.d.glFormulaCalc&&(a[o]=n)})),""!==a.yield&&""!==a.weight&&""!==a.units&&t.push(yt({},e,{formulaCalculatorParams:a}))})),H(t),W&&et()}()}),[i]);var at=function(t){if(s.images){var e=0;return s.images.forEach((function(a,o){a.id===t&&(e=o)})),e}}(null===K||void 0===K?void 0:null===(a=K.image)||void 0===a?void 0:a.id);return ft(mt,{clearFormulaCalculatorState:function(){J(!1),L(P),n(!1)},product:s,formulaCalculatorVisible:l,formulaParams:z,setFormulaParams:L,submitFormulaForm:function(){j(!0),et()},enhancedVariants:R,showResults:W,currentFormat:G,calculatedVolume:m.calculatedVolume,baseUnit:m.baseUnit,isNotSure:g,setIsNotSureForm:O,imageIndex:at})})),gt=s.a.createElement,Ot=Object(i.injectIntl)((function(t){var e=t.handleVariantChange,a=t.handleFormulaCalculatorClick,n=t.formulaCalculatorVisible,r=t.product,s=t.selectedVariant,l=t.variantSizesByType,u=t.intl.formatMessage,p=t.index,m=u({id:"components.sk.components.shopify.productDetails.quantity.formulaCalculator",defaultMessage:"How much do I need?"}),f=u({id:"components.sk.components.shopify.productDetails.quantity.bestValue",defaultMessage:"BEST VALUE"}),b=u({id:"components.sk.components.shopify.productDetails.quantity.outOfStock",defaultMessage:"OUT OF STOCK"}),y=l?l.filter((function(t){return!t.isOutOfStock})).map((function(t){return t.pricePerUnitValue})):[],O=Math.min.apply(Math,Object(o.a)(y)),_=y.filter((function(t){return t===O})).length>1,j=1===y.length||_?-1:O,P=function(t){return gt(g.Button,{type:"button",option:"{{".concat(t,"id}}"),ariaLabel:"{{".concat(t,"id}}"),className:"product-options__size-button product-options__size-button--active","data-amp-bind-class":"(product.selectedType == '{{".concat(t,"type}}' ? 'product-options__size-button' : 'element-hidden')+' '+(product.selectedId == '{{").concat(t,"id}}' ? 'product-options__size-button--active' : '')")},gt("div",{className:"product-options__size-button-content"},gt("div",{className:"product-options__size-button-value {{".concat(t,"bestValue}}")},"{{".concat(t,"bestValue}}")),gt("div",{className:"product-options__size-button-title"},"{{".concat(t,"title}}")),gt("div",{className:"product-options__size-button-perunit"},"{{".concat(t,"pricePerUnit}}")),gt("div",{className:"product-options__size-button-price"},"{{".concat(t,"price}}")),gt("div",{"data-amp-bind-text":"('{{".concat(t,"stock}}' == '").concat(u({id:"components.sk.components.shopify.productDetails.price.inStock",defaultMessage:"In Stock"}),"') ? '' : '").concat(u({id:"components.sk.components.shopify.productDetails.quantity.outOfStock",defaultMessage:"OUT OF STOCK"}),"'"),"data-amp-bind-class":"('{{".concat(t,"stock}}' == '").concat(u({id:"components.sk.components.shopify.productDetails.price.inStock",defaultMessage:"In Stock"}),"') ? '' : 'product-options__size-button-no-stock'")})))};return Object(c.useSelector)((function(t){return t.webConfig})).isAMP?gt(g.Row,{className:"product-options__row"},gt(h.a,{index:p,id:"components.sk.components.shopify.productDetails.options.size",defaultMessage:"Select size"}),gt("amp-list",{src:"amp-state:product",items:"variantSizesByType",width:"auto",height:"140",layout:"flex-item"},gt("div",{placeholder:!0,className:"amp_loader"},gt(i.FormattedMessage,{id:"components.sk.components.amp.loading",defaultMessage:"Loading..."})),gt("template",{type:"amp-mustache"},gt("amp-selector",{name:"size",layout:"container","data-amp-bind-selected":"product.selectedId",on:"select:AMP.setState({ product: { selectedId: event.targetOption, quantity: 1 }, nutriTab: 1, nutriId: product.formats[product.selectedFormat].nutriMetaIndex, prepId: product.variants[event.targetOption].prepMetaIndex, ampfrequency: { subscription: ampfrequency.subscription } })"},gt("div",{className:"product-options__content product-options__content--size"},P("current."),"{{#items}}",P(""),"{{/items}}"))))):r.variants&&s?gt(g.Row,{className:"product-options__row"},gt(h.a,{index:p,id:"components.sk.components.shopify.productDetails.options.size",defaultMessage:"Select size"},r.variants.length>0&&Object(d.r)(r.variants)?gt("div",{className:"product-options__label-formula"},gt(g.Button,{onClick:a,className:"product-quantity__formula-calculator",ariaLabel:m},gt("span",null,m)),gt(vt,{formulaCalculatorVisible:n,handleFormulaCalculatorClick:a,product:r})):null),gt("div",{className:"product-options__content product-options__content--size"},l?l.map((function(t){var a=t.id,o=t.isOutOfStock,n=t.title,r=t.price,i=t.pricePerUnitValue,c=t.pricePerUnit;return""!==n&&null!=c?gt(g.Button,{onClick:a!==s.id?function(){return e(a)}:void 0,ariaLabel:n,key:a,className:v()("product-options__size-button",{"product-options__size-button--active":a===s.id&&!o},{"product-options__size-button--no-stock-active":a===s.id&&o},{"product-options__size-button--no-stock":a!==s.id&&o})},gt("div",{className:"product-options__size-button-content"},i===j?gt("div",{className:"product-options__size-button-value"},f):null,gt("div",{className:"product-options__size-button-title"},n),gt("div",{className:"product-options__size-button-perunit"},c),gt("div",{className:v()("product-options__size-button-price",{"product-options__size-button-price--no-stock-active":a===s.id&&o},{"product-options__size-button-price--no-stock":a!==s.id&&o})},r),o?gt("div",{className:"product-options__size-button-no-stock"},b):null)):null})):null)):null})),ht=a("o3ds"),_t=a("tQJn"),jt=s.a.createElement,Pt=function(t){var e=t.handleFormatChange,a=t.handleTypeChange,o=t.handleVariantChange,n=t.handleFormulaCalculatorClick,r=t.formulaCalculatorVisible,s=t.product,i=t.selectedVariant,c=t.variantFormats,l=t.variantTypes,u=t.variantSizesByType,p=[c.length>0&&P,s.variants&&l.length>0&&C,s.variants&&i&&Ot,s.variants&&i&&_t.default].filter(Boolean);return jt("div",{className:"product-options__wrapper"},jt("h1",{className:"page-title"},s.title),p.map((function(t,p){return jt("div",{className:"product-options",key:"optionView".concat(p)},jt(t,{handleFormatChange:e,handleTypeChange:a,handleVariantChange:o,handleFormulaCalculatorClick:n,formulaCalculatorVisible:r,product:s,selectedVariant:i,variantFormats:c,variantTypes:l,variantSizesByType:u,index:p}))})),jt(ht.a,{metafields:s.metafields}))},kt=s.a.createElement;function St(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,o)}return a}var Ct=Object(i.injectIntl)((function(t){var e,a,i,y=t.productId,v=t.intl.formatMessage,g=Object(l.useRouter)(),O=Object(c.useDispatch)(),h=Object(c.useSelector)((function(t){return t.shopify})).products.find((function(t){return t.id===y})),_=Object(c.useSelector)((function(t){return Object(d.t)(t)(Object(l.useRouter)())}))||h,j=Object(d.v)(_)(Object(l.useRouter)()),P=Object(c.useSelector)((function(t){return t.currentVariant})),k=P.currentVariant,S=P.subscribeFrequencyType,C=Object(c.useSelector)((function(t){return t.shopify.config.cartConfiguration})),M=Object(r.useState)(j),D=M[0],F=M[1],N=Object(r.useState)(!1),w=N[0],V=N[1],I=Object(d.l)({variants:null===(e=_.variants)||void 0===e?void 0:e.map((function(t){return t.title}))}),T=Object(d.n)({variants:null===(a=_.variants)||void 0===a?void 0:a.map((function(t){return t.title})),selectedVariantTitle:null===D||void 0===D?void 0:D.title}),E=Object(r.useState)(!1),x=E[0],U=E[1];Object(r.useEffect)((function(){Object(f.c)().then((function(t){return U(t)}))}),[]);var q,z,L=!!C&&C.isSpecialSnsEnabled,B=C?C.specialSnsDiscount:0,R=C?C.snsDiscount:0,H=Object(c.useSelector)((function(t){return t.webConfig})).isAMP,A=null===(i=_.variants)||void 0===i?void 0:i.map((function(t){var e,a,o=t.id,r=t.title,s=t.availableForSale,i=t.metafields,c=t.priceV2,l=t.compareAtPriceV2,u=t.parsedId,p=t.image,m=null===i||void 0===i?void 0:null===(e=i.find((function(t){return t.key===b.b})))||void 0===e?void 0:e.value,f=null===i||void 0===i?void 0:null===(a=i.find((function(t){return t.key===b.c})))||void 0===a?void 0:a.value,y=L&&!x&&"1"!==m?B:R,g=parseFloat(c.amount),O=S===b.h&&"1"!==f?function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?St(Object(a),!0).forEach((function(e){Object(n.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):St(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},c,{amount:(g-g*(y/100)).toString()}):c;return Object(d.m)({id:o,availableForSale:s,metaFields:i,price:O,title:r,selectedVariantTitle:D?D.title:"",unitPrefix:v({id:"components.sk.components.shopify.productDetails.options.unitPrefix",defaultMessage:"per"}),comparePrice:l,parsedId:u,img:p,isAMP:H})})).filter((function(t){return t.id})),W=Object(r.useCallback)((function(t){var e=_.variants&&_.variants.find((function(e){return e.title.includes(t)}));e&&(F(e),O(Object(u.c)({currentVariant:e})),O(Object(u.g)({isVariantSelected:!0})))}),[_,D]),J=Object(r.useCallback)((function(t){var e=null===D||void 0===D?void 0:D.title.split("/")[0],a=_.variants&&_.variants.find((function(a){var o=a.selectedOptions,n=a.title,r=null===o||void 0===o?void 0:o.find((function(t){return"Type"===t.name}));return r&&r.value===t&&e&&n.includes(e)}));a&&(F(a),O(Object(u.c)({currentVariant:a})),O(Object(u.g)({isVariantSelected:!0})))}),[_,D]),K=Object(r.useCallback)((function(t){V(t)}),[]),G=Object(r.useCallback)((function(t){var e=_.variants&&_.variants.find((function(e){return e.id===t}));e&&(F(e),O(Object(u.c)({currentVariant:e})),O(Object(u.g)({isVariantSelected:!0})))}),[_]);if(Object(r.useEffect)((function(){k&&F(k)}),[k]),Object(r.useEffect)((function(){var t=Object(d.v)(_)(g);O(Object(u.c)({currentVariant:t}))}),[_]),Object(r.useEffect)((function(){return _&&_.variants&&j&&(O(Object(u.c)({currentVariant:j})),O(Object(p.b)(_.id))),function(){O(Object(u.g)({isVariantSelected:!1}))}}),[]),H){var Q=_.variants?_.variants[0]:null,Z={},Y={};A&&A.forEach((function(t){Object.keys(Z).includes(t.format.trim())||(Z[t.format.trim()]=t.type.trim()),Object.keys(Y).includes(t.type.trim())||(Y[t.type.trim()]=t.id)}));var X=(z="type",(q=A).map((function(t){return t[z]})).map((function(t,e,a){return a.indexOf(t)===e&&e})).filter((function(t){return q[t]})).map((function(t){return q[t]}))),$={};I&&I.forEach((function(t,e){$[t.trim()]={nutriMetaIndex:e}}));var tt=function(t){var e=A?A.filter((function(e){return!e.isOutOfStock&&e.type.trim()===t})).map((function(t){return t.pricePerUnitValue})):[],a=Math.min.apply(Math,Object(o.a)(e)),n=e.filter((function(t){return t===a})).length>1;return 1===e.length||n?-1:a},et={};A&&A.forEach((function(t,e){var a,o,n,r=0;_.images&&_.images.forEach((function(e,a){t.imageSrc===e.originalSrc&&(r=a)}));var s=null===(a=_.metafields)||void 0===a?void 0:null===(o=a.find((function(t){return"original_to_hidden_variant_map"===t.key})))||void 0===o?void 0:o.value,i=s?Object(m.a)(JSON.parse(s)):{},c=t.parsedId&&(null===(n=i[t.parsedId])||void 0===n?void 0:n.discountVariantId);et[t.id]={id:t.id||null,type:t.type?t.type.trim():null,title:t.title?t.title.trim():null,parsedId:t.parsedId?t.parsedId.replace("'",""):null,variantId:c,pricePerUnit:t.pricePerUnit||null,price:t.ampAmount||null,comparePrice:t.compareAmount||null,discountedPrice:t.ampDiscountedAmount||null,snsDiscountedPrice:t.ampSnsDiscountedAmount||null,stock:v({id:t.isOutOfStock?"components.sk.components.shopify.productDetails.price.outOfStock":"components.sk.components.shopify.productDetails.price.inStock",defaultMessage:t.isOutOfStock?"Out of Stock":"In Stock"}),prepMetaIndex:e,slide:r}}));var at={variantFormats:[{current:{format:I[0]?I[0].trim():null},items:I&&I.slice(1).map((function(t){return{format:t?t.trim():null}}))}],variantTypes:[{current:{format:I[0]?I[0].trim():null,type:T[0]?T[0].trim():null,typeClass:T[0]?T[0].trim().toLowerCase().split(" ").join("-"):null},items:X&&X.slice(1).map((function(t){return{format:t.format?t.format.trim():null,type:t.type?t.type.trim():null,typeClass:t.type?t.type.trim().toLowerCase().split(" ").join("-"):null}}))}],selectedFormat:I[0]?I[0].trim():null,selectedType:T[0]?T[0].trim():null,selectedId:A&&A[0].id||null,defaultVariantTypes:Z,defaultVariantSizesByType:Y,quantity:1,handle:_.handle||null,variantSizesByType:[{current:A?{id:A[0].id||null,type:A[0].type?A[0].type.trim():null,title:A[0].title?A[0].title.trim():null,pricePerUnit:A[0].pricePerUnit||null,price:A[0].price||null,bestValue:A[0].pricePerUnitValue&&A[0].type&&A[0].pricePerUnitValue===tt(A[0].type.trim())?v({id:"components.sk.components.shopify.productDetails.quantity.bestValue",defaultMessage:"BEST VALUE"}):null,stock:v({id:A[0].isOutOfStock?"components.sk.components.shopify.productDetails.price.outOfStock":"components.sk.components.shopify.productDetails.price.inStock",defaultMessage:A[0].isOutOfStock?"Out of Stock":"In Stock"})}:{},items:A&&A.slice(1).map((function(t){return{id:t.id||null,type:t.type?t.type.trim():null,title:t.title?t.title.trim():null,pricePerUnit:t.pricePerUnit||null,price:t.ampAmount||null,bestValue:t.pricePerUnitValue&&t.type&&t.pricePerUnitValue===tt(t.type.trim())?v({id:"components.sk.components.shopify.productDetails.quantity.bestValue",defaultMessage:"BEST VALUE"}):null,stock:v({id:t.isOutOfStock?"components.sk.components.shopify.productDetails.price.outOfStock":"components.sk.components.shopify.productDetails.price.inStock",defaultMessage:t.isOutOfStock?"Out of Stock":"In Stock"})}}))}],formats:$,variants:et};return kt(s.a.Fragment,null,kt("amp-state",{id:"product"},kt("script",{type:"application/json",dangerouslySetInnerHTML:{__html:JSON.stringify(at)}})),kt(Pt,{handleFormatChange:W,handleTypeChange:J,handleVariantChange:G,handleFormulaCalculatorClick:K,formulaCalculatorVisible:w,product:_,selectedVariant:Q,variantFormats:I,variantTypes:T,variantSizesByType:A}))}return kt(Pt,{handleFormatChange:W,handleTypeChange:J,handleVariantChange:G,handleFormulaCalculatorClick:K,formulaCalculatorVisible:w,product:_,selectedVariant:D,variantFormats:I,variantTypes:T,variantSizesByType:A})}))}}]);